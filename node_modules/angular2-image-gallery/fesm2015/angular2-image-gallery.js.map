{"version":3,"file":"angular2-image-gallery.js.map","sources":["ng://angular2-image-gallery/lib/services/image.service.ts","ng://angular2-image-gallery/lib/gallery/gallery.component.ts","ng://angular2-image-gallery/lib/viewer/viewer.component.ts","ng://angular2-image-gallery/lib/angular2-image-gallery.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core'\nimport { Observable, Subject } from 'rxjs'\n\n@Injectable()\nexport class ImageService {\n    private imagesUpdatedSource = new Subject<Array<any>>()\n    private imageSelectedIndexUpdatedSource = new Subject<number>()\n    private showImageViewerSource = new Subject<boolean>()\n\n    imagesUpdated$: Observable<Array<any>> = this.imagesUpdatedSource.asObservable()\n    imageSelectedIndexUpdated$: Observable<number> = this.imageSelectedIndexUpdatedSource.asObservable()\n    showImageViewerChanged$: Observable<boolean> = this.showImageViewerSource.asObservable()\n\n    updateImages(images: Array<any>): void {\n        this.imagesUpdatedSource.next(images)\n    }\n\n    updateSelectedImageIndex(newIndex: number): void {\n        this.imageSelectedIndexUpdatedSource.next(newIndex)\n    }\n\n    showImageViewer(show: boolean): void {\n        this.showImageViewerSource.next(show)\n    }\n}\n","import {\n  ChangeDetectorRef, Component, ElementRef, EventEmitter, HostListener,\n  Input, OnChanges, OnDestroy, OnInit, Output, QueryList, SimpleChanges, ViewChild, ViewChildren\n} from '@angular/core'\nimport { ImageService } from '../services/image.service'\nimport { Subscription } from 'rxjs/internal/Subscription'\nimport { HttpClient } from '@angular/common/http'\n\n@Component({\n    selector: 'gallery',\n    template: `<div #galleryContainer class=\"galleryContainer\">\n    <div class=\"innerGalleryContainer\">\n        <div *ngFor='let imgrow of gallery | slice:rowIndex:rowIndex+rowsPerPage; let i = index'\n             class=\"imagerow\"\n             [style.margin-bottom.px]=\"calcImageMargin()\">\n            <img #imageElement\n                 *ngFor='let img of imgrow; let j = index'\n                 class=\"thumbnail\"\n                 [style.width.px]=\"img['width']\"\n                 [style.height.px]=\"img['height']\"\n                 (click)=\"openImageViewer(img)\"\n                 [src]=\"img['srcAfterFocus']\"\n                 [style.background]=\"img.dominantColor\"\n                 [style.margin-right.px]=\"calcImageMargin()\"/>\n        </div>\n    </div>\n\n    <div class=\"pagerContainer\" *ngIf=\"(!rightArrowInactive || !leftArrowInactive)\">\n        <img [ngClass]=\"{'inactive': leftArrowInactive}\" class=\"pager left\"\n             src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxzdmcgaWQ9IkxheWVyXzEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQ4IDQ4OyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNDggNDgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnPjxwYXRoIGQ9Ik0yNCw0NkMxMS45LDQ2LDIsMzYuMSwyLDI0UzExLjksMiwyNCwyczIyLDkuOSwyMiwyMlMzNi4xLDQ2LDI0LDQ2eiBNMjQsNEMxMyw0LDQsMTMsNCwyNGMwLDExLDksMjAsMjAsMjAgICBjMTEsMCwyMC05LDIwLTIwQzQ0LDEzLDM1LDQsMjQsNHoiLz48L2c+PGc+PHBvbHlnb24gcG9pbnRzPSIyNy42LDM2LjcgMTQuOSwyNCAyNy42LDExLjMgMjkuMSwxMi43IDE3LjgsMjQgMjkuMSwzNS4zICAiLz48L2c+PC9zdmc+\"\n             (click)=\"navigate(-1)\"/>\n        <img [ngClass]=\"{'inactive': rightArrowInactive}\" class=\"pager right\"\n             src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxzdmcgaWQ9IkxheWVyXzEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQ4IDQ4OyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNDggNDgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnPjxwYXRoIGQ9Ik0yNCw0NkMxMS45LDQ2LDIsMzYuMSwyLDI0UzExLjksMiwyNCwyczIyLDkuOSwyMiwyMlMzNi4xLDQ2LDI0LDQ2eiBNMjQsNEMxMyw0LDQsMTMsNCwyNHM5LDIwLDIwLDIwczIwLTksMjAtMjAgICBTMzUsNCwyNCw0eiIvPjwvZz48Zz48cG9seWdvbiBwb2ludHM9IjIxLjQsMzYuNyAxOS45LDM1LjMgMzEuMiwyNCAxOS45LDEyLjcgMjEuNCwxMS4zIDM0LjEsMjQgICIvPjwvZz48L3N2Zz4=\"\n             (click)=\"navigate(1)\"/>\n    </div>\n</div>\n\n<viewer></viewer>\n`,\n    styles: [`.innerGalleryContainer{position:relative}.galleryContainer{height:100%;width:100%;overflow:hidden}.innerGalleryContainer img:last-child{margin-right:-1px!important}.galleryContainer img:hover{-webkit-filter:brightness(50%);filter:brightness(50%);transition:all ease-out .2s;cursor:pointer}.imagerow{margin-right:1px;overflow:hidden;display:flex}::-webkit-scrollbar{display:none}.asyncLoadingContainer{position:absolute;background-color:transparent;height:0;width:0;bottom:120px}.pagerContainer{margin:40px auto;width:180px}.pager{display:block;height:60px}@media (max-width:700px){.pagerContainer{margin:40px auto;width:150px}.pager{display:block;height:45px}}.pager.inactive{opacity:.15}.pager.left{float:left}.pager.right{float:right}`]\n})\nexport class GalleryComponent implements OnInit, OnDestroy, OnChanges {\n    gallery: Array<any> = []\n    imageDataStaticPath: string = 'assets/img/gallery/'\n    imageDataCompletePath: string = ''\n    dataFileName: string = 'data.json'\n    images: Array<any> = []\n    minimalQualityCategory = 'preview_xxs'\n    viewerSubscription: Subscription\n    rowIndex: number = 0\n    rightArrowInactive: boolean = false\n    leftArrowInactive: boolean = false\n\n    @Input('flexBorderSize') providedImageMargin: number = 3\n    @Input('flexImageSize') providedImageSize: number = 7\n    @Input('galleryName') providedGalleryName: string = ''\n    @Input('metadataUri') providedMetadataUri: string = undefined\n    @Input('maxRowsPerPage') rowsPerPage: number = 200\n\n    @Output() viewerChange = new EventEmitter<boolean>()\n\n    @ViewChild('galleryContainer') galleryContainer: ElementRef\n    @ViewChildren('imageElement') imageElements: QueryList<any>\n\n    @HostListener('window:scroll', ['$event']) triggerCycle(event: any): void {\n        this.scaleGallery()\n    }\n\n    @HostListener('window:resize', ['$event']) windowResize(event: any): void {\n        this.render()\n    }\n\n    constructor(public imageService: ImageService, public http: HttpClient, public changeDetectorRef: ChangeDetectorRef) {\n    }\n\n    ngOnInit(): void {\n        this.fetchDataAndRender()\n        this.viewerSubscription = this.imageService.showImageViewerChanged$\n            .subscribe((visibility: boolean) => this.viewerChange.emit(visibility))\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        // input params changed\n        if (changes['providedGalleryName'] != undefined) {\n            this.fetchDataAndRender()\n        } else {\n            this.render()\n        }\n    }\n\n    ngOnDestroy(): void {\n        if (this.viewerSubscription) {\n            this.viewerSubscription.unsubscribe()\n        }\n    }\n\n    openImageViewer(img: any): void {\n        this.imageService.updateImages(this.images)\n        this.imageService.updateSelectedImageIndex(this.images.indexOf(img))\n        this.imageService.showImageViewer(true)\n    }\n\n    /**\n     * direction (-1: left, 1: right)\n     */\n    navigate(direction: number): void {\n        if ((direction === 1 && this.rowIndex < this.gallery.length - this.rowsPerPage)\n            || (direction === -1 && this.rowIndex > 0)) {\n            this.rowIndex += (this.rowsPerPage * direction)\n        }\n        this.refreshNavigationErrorState()\n    }\n\n    calcImageMargin(): number {\n        const galleryWidth = this.getGalleryWidth()\n        const ratio = galleryWidth / 1920\n        return Math.round(Math.max(1, this.providedImageMargin * ratio))\n    }\n\n    private fetchDataAndRender(): void {\n        this.imageDataCompletePath = this.providedMetadataUri\n\n        if (!this.providedMetadataUri) {\n            this.imageDataCompletePath = this.providedGalleryName !== '' ?\n                `${this.imageDataStaticPath + this.providedGalleryName}/${this.dataFileName}` :\n                this.imageDataStaticPath + this.dataFileName\n        }\n\n        this.http.get(this.imageDataCompletePath)\n          .subscribe(\n            (data: Array<any>) => {\n                    this.images = data\n                    this.imageService.updateImages(this.images)\n\n                    this.images.forEach(image => {\n                      image['galleryImageLoaded'] = false\n                      image['viewerImageLoaded'] = false\n                      image['srcAfterFocus'] = ''\n                    })\n                    // twice, single leads to different strange browser behaviour\n                    this.render()\n                    this.render()\n                },\n              err => {\n                    if (this.providedMetadataUri) {\n                      console.error(`Provided endpoint '${this.providedMetadataUri}' did not serve metadata correctly or in the expected format.\n      See here for more information: https://github.com/BenjaminBrandmeier/angular2-image-gallery/blob/master/docs/externalDataSource.md,\n      Original error: ${err}`)\n                    } else {\n                        console.error(`Did you run the convert script from angular2-image-gallery for your images first? Original error: ${err}`)\n                    }\n              },\n            () => undefined)\n    }\n\n    private render(): void {\n        this.gallery = []\n\n        let tempRow = [this.images[0]]\n        let currentRowIndex = 0\n        let i = 0\n\n        for (i; i < this.images.length; i++) {\n            while (this.images[i + 1] && this.shouldAddCandidate(tempRow, this.images[i + 1])) {\n                i++\n            }\n            if (this.images[i + 1]) {\n                tempRow.pop()\n            }\n            this.gallery[currentRowIndex++] = tempRow\n\n            tempRow = [this.images[i + 1]]\n        }\n\n        this.scaleGallery()\n    }\n\n    private shouldAddCandidate(imgRow: Array<any>, candidate: any): boolean {\n        const oldDifference = this.calcIdealHeight() - this.calcRowHeight(imgRow)\n        imgRow.push(candidate)\n        const newDifference = this.calcIdealHeight() - this.calcRowHeight(imgRow)\n\n        return Math.abs(oldDifference) > Math.abs(newDifference)\n    }\n\n    private calcRowHeight(imgRow: Array<any>): number {\n        const originalRowWidth = this.calcOriginalRowWidth(imgRow)\n\n        const ratio = (this.getGalleryWidth() - (imgRow.length - 1) * this.calcImageMargin()) / originalRowWidth\n        const rowHeight = imgRow[0][this.minimalQualityCategory]['height'] * ratio\n\n        return rowHeight\n    }\n\n    private calcOriginalRowWidth(imgRow: Array<any>): number {\n        let originalRowWidth = 0\n        imgRow.forEach(img => {\n            const individualRatio = this.calcIdealHeight() / img[this.minimalQualityCategory]['height']\n            img[this.minimalQualityCategory]['width'] = img[this.minimalQualityCategory]['width'] * individualRatio\n            img[this.minimalQualityCategory]['height'] = this.calcIdealHeight()\n            originalRowWidth += img[this.minimalQualityCategory]['width']\n        })\n\n        return originalRowWidth\n    }\n\n    private calcIdealHeight(): number {\n        return this.getGalleryWidth() / (80 / this.providedImageSize) + 100\n    }\n\n    private getGalleryWidth(): number {\n        if (this.galleryContainer.nativeElement.clientWidth === 0) {\n            // for IE11\n            return this.galleryContainer.nativeElement.scrollWidth\n        }\n        return this.galleryContainer.nativeElement.clientWidth\n    }\n\n    private scaleGallery(): void {\n        let imageCounter = 0\n        let maximumGalleryImageHeight = 0\n\n        this.gallery.slice(this.rowIndex, this.rowIndex + this.rowsPerPage)\n          .forEach(imgRow => {\n            const originalRowWidth = this.calcOriginalRowWidth(imgRow)\n\n            if (imgRow !== this.gallery[this.gallery.length - 1]) {\n                const ratio = (this.getGalleryWidth() - (imgRow.length - 1) * this.calcImageMargin()) / originalRowWidth\n\n                imgRow.forEach((img: any) => {\n                    img['width'] = img[this.minimalQualityCategory]['width'] * ratio\n                    img['height'] = img[this.minimalQualityCategory]['height'] * ratio\n                    maximumGalleryImageHeight = Math.max(maximumGalleryImageHeight, img['height'])\n                    this.checkForAsyncLoading(img, imageCounter++)\n                })\n            } else {\n                imgRow.forEach((img: any) => {\n                    img.width = img[this.minimalQualityCategory]['width']\n                    img.height = img[this.minimalQualityCategory]['height']\n                    maximumGalleryImageHeight = Math.max(maximumGalleryImageHeight, img['height'])\n                    this.checkForAsyncLoading(img, imageCounter++)\n                })\n            }\n        })\n\n        this.minimalQualityCategory = maximumGalleryImageHeight > 375 ? 'preview_xs' : 'preview_xxs'\n        this.refreshNavigationErrorState()\n\n        this.changeDetectorRef.detectChanges()\n    }\n\n    private checkForAsyncLoading(image: any, imageCounter: number): void {\n        const imageElements = this.imageElements.toArray()\n\n        if (image['galleryImageLoaded'] ||\n            (imageElements.length > 0 &&\n              imageElements[imageCounter] &&\n              this.isScrolledIntoView(imageElements[imageCounter].nativeElement))) {\n            image['galleryImageLoaded'] = true\n            image['srcAfterFocus'] = image[this.minimalQualityCategory]['path']\n        } else {\n            image['srcAfterFocus'] = ''\n        }\n    }\n\n    private isScrolledIntoView(element: any): boolean {\n        const elementTop = element.getBoundingClientRect().top\n        const elementBottom = element.getBoundingClientRect().bottom\n\n        return elementTop < window.innerHeight && elementBottom >= 0 && (elementBottom > 0 || elementTop > 0)\n    }\n\n    private refreshNavigationErrorState(): void {\n        this.leftArrowInactive = this.rowIndex == 0\n        this.rightArrowInactive = this.rowIndex > (this.gallery.length - this.rowsPerPage)\n    }\n}\n","import { ImageService } from '../services/image.service'\nimport { Component } from '@angular/core'\nimport { animate, state, style, transition, trigger } from '@angular/animations'\n\n@Component({\n    selector: 'viewer',\n    template: `<div class=\"outerContainer\" (window:resize)=\"onResize()\" *ngIf=\"showViewer\" [@showViewerTransition]=\"showViewer\">\n\n\n    <img [ngClass]=\"{'activeArrow': leftArrowActive}\" class=\"arrow left\"\n         src=\"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0cHgiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjx0aXRsZS8+PGRlc2MvPiAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgaWQ9Im1pdSIgc3Ryb2tlPSIjNTU1IiBzdHJva2Utd2lkdGg9IjAuMiI+ICAgICA8ZyBpZD0iQXJ0Ym9hcmQtMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM5NS4wMDAwMDAsIC0xOTEuMDAwMDAwKSI+PGcgaWQ9InNsaWNlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMTUuMDAwMDAwLCAxMTkuMDAwMDAwKSIvPjxwYXRoICAgICAgIGQ9Ik0zOTYsMjAyLjUgQzM5NiwxOTYuMTQ4NzI1IDQwMS4xNDg3MjUsMTkxIDQwNy41LDE5MSBDNDEzLjg1MTI3NSwxOTEgNDE5LDE5Ni4xNDg3MjUgNDE5LDIwMi41IEM0MTksMjA4Ljg1MTI3NSA0MTMuODUxMjc1LDIxNCA0MDcuNSwyMTQgQzQwMS4xNDg3MjUsMjE0IDM5NiwyMDguODUxMjc1IDM5NiwyMDIuNSBaIE00MDguNjU2ODU0LDE5Ni44NDMxNDYgTDQxMC4wNzEwNjgsMTk4LjI1NzM1OSBMNDA1LjgyODQyNywyMDIuNSBMNDEwLjA3MTA2OCwyMDYuNzQyNjQxIEw0MDguNjU2ODU0LDIwOC4xNTY4NTQgTDQwMywyMDIuNSBMNDA4LjY1Njg1NCwxOTYuODQzMTQ2IFoiICAgICAgIGZpbGw9IiNhYWEiICAgICAgIGlkPSJjaXJjbGUtYmFjay1hcnJvdy1nbHlwaCIvPjwvZz4gICA8L2c+IDwvc3ZnPg==\"\n         [hidden]=\"!leftArrowVisible\" (click)=\"navigate(-1, false)\"/>\n    <img [ngClass]=\"{'activeArrow': rightArrowActive}\" class=\"arrow right\"\n         src=\"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0cHgiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjx0aXRsZS8+PGRlc2MvPjxkZWZzLz4gICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGlkPSJtaXUiIHN0cm9rZT0iIzU1NSIgc3Ryb2tlLXdpZHRoPSIwLjIiPiAgICAgPGcgaWQ9IkFydGJvYXJkLTEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00NjcuMDAwMDAwLCAtMTkxLjAwMDAwMCkiPjxnIGlkPSJzbGljZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjE1LjAwMDAwMCwgMTE5LjAwMDAwMCkiLz48cGF0aCAgICAgICBkPSJNNDY4LDIwMi41IEM0NjgsMTk2LjE0ODcyNSA0NzMuMTQ4NzI1LDE5MSA0NzkuNSwxOTEgQzQ4NS44NTEyNzUsMTkxIDQ5MSwxOTYuMTQ4NzI1IDQ5MSwyMDIuNSBDNDkxLDIwOC44NTEyNzUgNDg1Ljg1MTI3NSwyMTQgNDc5LjUsMjE0IEM0NzMuMTQ4NzI1LDIxNCA0NjgsMjA4Ljg1MTI3NSA0NjgsMjAyLjUgWiBNNDgwLjY1Njg1NCwxOTYuODQzMTQ2IEw0ODIuMDcxMDY4LDE5OC4yNTczNTkgTDQ3Ny44Mjg0MjcsMjAyLjUgTDQ4Mi4wNzEwNjgsMjA2Ljc0MjY0MSBMNDgwLjY1Njg1NCwyMDguMTU2ODU0IEw0NzUsMjAyLjUgTDQ4MC42NTY4NTQsMTk2Ljg0MzE0NiBaIiAgICAgICBmaWxsPSIjYWFhIiAgICAgICBpZD0iY2lyY2xlLW5leHQtYXJyb3ctZGlzY2xvc3VyZS1nbHlwaCIgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDc5LjUwMDAwMCwgMjAyLjUwMDAwMCkgc2NhbGUoLTEsIDEpIHRyYW5zbGF0ZSgtNDc5LjUwMDAwMCwgLTIwMi41MDAwMDApICIvPjwvZz4gICA8L2c+IDwvc3ZnPg==\"\n         [hidden]=\"!rightArrowVisible\" (click)=\"navigate(1, false)\"/>\n\n    <div class=\"buttonContainer\">\n        <img class=\"action close\"\n             src=\"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjMwcHgiIGlkPSJMYXllcl8xIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgdmVyc2lvbj0iMS4xIiBmaWxsPSIjYWFhIiB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgd2lkdGg9IjI0cHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPiAgPHBhdGggICAgc3Ryb2tlLXdpZHRoPSIzMCIgc3Ryb2tlPSIjNDQ0IiAgICBkPSJNNDM3LjUsMzg2LjZMMzA2LjksMjU2bDEzMC42LTEzMC42YzE0LjEtMTQuMSwxNC4xLTM2LjgsMC01MC45Yy0xNC4xLTE0LjEtMzYuOC0xNC4xLTUwLjksMEwyNTYsMjA1LjFMMTI1LjQsNzQuNSAgYy0xNC4xLTE0LjEtMzYuOC0xNC4xLTUwLjksMGMtMTQuMSwxNC4xLTE0LjEsMzYuOCwwLDUwLjlMMjA1LjEsMjU2TDc0LjUsMzg2LjZjLTE0LjEsMTQuMS0xNC4xLDM2LjgsMCw1MC45ICBjMTQuMSwxNC4xLDM2LjgsMTQuMSw1MC45LDBMMjU2LDMwNi45bDEzMC42LDEzMC42YzE0LjEsMTQuMSwzNi44LDE0LjEsNTAuOSwwQzQ1MS41LDQyMy40LDQ1MS41LDQwMC42LDQzNy41LDM4Ni42eiIvPjwvc3ZnPg==\"\n             (click)=\"closeViewer()\"/>\n    </div>\n\n    <div class=\"imageContainer\"\n         (click)=\"showNavigationArrows()\"\n         (swipeleft)=\"navigate(1, $event)\"\n         (swiperight)=\"navigate(-1, $event)\"\n         (pan)=\"pan($event)\">\n\n        <div *ngFor='let img of images; let j = index'\n             class=\"image\"\n             [class.active]=\"img['active']\"\n             [style.background-image]=\"img['viewerImageLoaded'] ? 'url('+img[categorySelected]['path']+')' : math.abs(currentIdx-j) <=1 ? 'url('+img['preview_xxs']['path']+')' : ''\"\n             [style.left]=\"transform+'px'\"\n             [@imageTransition]=\"img['transition']\"></div>\n\n        <img *ngFor='let img of images; let j = index'\n             class=\"preloading-image\"\n             (load)=\"imageLoaded(img)\"\n             src=\"{{ math.abs(currentIdx-j) <=1 ? img[categorySelected]['path'] : ''}}\"/>\n    </div>\n</div>\n\n`,\n    styles: [`.outerContainer{top:0;bottom:0;left:0;right:0;height:100%;width:100%;position:fixed;background-color:rgba(0,0,0,.95);font-family:sans-serif;z-index:1031}.imageContainer{position:absolute;float:none;top:0;bottom:0;left:0;right:0}.imageContainer .image,.imageContainer .preloading-image{visibility:hidden}.imageContainer .image.active{position:absolute;visibility:visible;background-repeat:no-repeat;background-size:contain;background-position:center;margin:auto;left:0;right:0;top:0;bottom:0;height:100%;width:100%;opacity:1}.arrow{opacity:0}.arrow:hover{cursor:pointer}.outerContainer:hover .arrow.activeArrow{height:calc(20px + 1.5vw);position:absolute;top:calc(50% - (20px + 1.5vw)/ 2);bottom:50%;z-index:1;opacity:1;transition:all ease-out .5s}.arrow.left{left:2vw}.arrow.right{right:2vw}.arrow:not(.activeArrow):hover{opacity:0;cursor:pointer;transition:all ease-out .5s}.buttonContainer{position:absolute;top:20px;right:20px;height:20px;text-align:center;opacity:1;z-index:200;transition:all ease-out .5s}.buttonContainer .action{height:100%;cursor:pointer;vertical-align:top}.buttonContainer .action:focus{outline:0}.buttonContainer .action:hover{background-color:#222;transition:all ease-out .3s}.buttonContainer .action.close{width:26px;height:26px}md-button-toggle.checked{background-color:#a0a0a0}.menuButton{position:absolute;bottom:20px;right:20px;text-align:center;opacity:1;z-index:200;transition:all ease-out .5s}@font-face{font-family:'Material Icons';font-style:normal;font-weight:400;src:local('Material Icons'),local('MaterialIcons-Regular'),url(https://fonts.gstatic.com/s/materialicons/v19/2fcrYFNaTjcS6g4U3t-Y5ZjZjT5FdEJ140U2DJYC3mY.woff2) format('woff2')}.material-icons{font-family:'Material Icons';font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased}`],\n    host: {\n        '(document:keydown)': 'onKeydown($event)'\n    },\n    animations: [\n        trigger('imageTransition', [\n            state('enterFromRight', style({\n                opacity: 1,\n                transform: 'translate(0px, 0px)'\n            })),\n            state('enterFromLeft', style({\n                opacity: 1,\n                transform: 'translate(0px, 0px)'\n            })),\n            state('leaveToLeft', style({\n                opacity: 0,\n                transform: 'translate(-100px, 0px)'\n            })),\n            state('leaveToRight', style({\n                opacity: 0,\n                transform: 'translate(100px, 0px)'\n            })),\n            transition('* => enterFromRight', [\n                style({\n                    opacity: 0,\n                    transform: 'translate(30px, 0px)'\n                }),\n                animate('250ms 500ms ease-in')\n            ]),\n            transition('* => enterFromLeft', [\n                style({\n                    opacity: 0,\n                    transform: 'translate(-30px, 0px)'\n                }),\n                animate('250ms 500ms ease-in')\n            ]),\n            transition('* => leaveToLeft', [\n                style({\n                    opacity: 1\n                }),\n                animate('250ms ease-out')]\n            ),\n            transition('* => leaveToRight', [\n                style({\n                    opacity: 1\n                }),\n                animate('250ms ease-out')]\n            )\n        ]),\n        trigger('showViewerTransition', [\n            state('true', style({\n                opacity: 1\n            })),\n            state('void', style({\n                opacity: 0\n            })),\n            transition('void => *', [\n                style({\n                    opacity: 0\n                }),\n                animate('1000ms ease-in')]\n            ),\n            transition('* => void', [\n                style({\n                    opacity: 1\n                }),\n                animate('500ms ease-out')]\n            )\n        ])\n    ]\n})\n\nexport class ViewerComponent {\n    showViewer: boolean\n    images: Array<any> = [{}]\n    currentIdx: number = 0\n    leftArrowVisible: boolean = true\n    rightArrowVisible: boolean = true\n    categorySelected: string = 'preview_xxs'\n    transform: number\n    math: Math\n    private qualitySelectorShown: boolean = false\n    private qualitySelected: string = 'auto'\n\n    constructor(private imageService: ImageService) {\n        imageService.imagesUpdated$.subscribe(\n            images => {\n                this.images = images\n            })\n        imageService.imageSelectedIndexUpdated$.subscribe(\n            newIndex => {\n                this.currentIdx = newIndex\n                this.images.forEach(image => image['active'] = false)\n                this.images[this.currentIdx]['active'] = true\n                this.transform = 0\n                this.updateQuality()\n            })\n        imageService.showImageViewerChanged$.subscribe(\n            showViewer => {\n                this.showViewer = showViewer\n            })\n        this.math = Math\n    }\n\n    get leftArrowActive(): boolean {\n        return this.currentIdx > 0\n    }\n\n    get rightArrowActive(): boolean {\n        return this.currentIdx < this.images.length - 1\n    }\n\n    pan(swipe: any): void {\n        this.transform = swipe.deltaX\n    }\n\n    onResize(): void {\n        this.images.forEach(image => {\n            image['viewerImageLoaded'] = false\n            image['active'] = false\n        })\n        this.updateImage()\n    }\n\n    showQualitySelector(): void {\n        this.qualitySelectorShown = !this.qualitySelectorShown\n    }\n\n    qualityChanged(newQuality: any): void {\n        this.qualitySelected = newQuality\n        this.updateImage()\n    }\n\n    imageLoaded(image: any): void {\n        image['viewerImageLoaded'] = true\n    }\n\n    /**\n     * direction (-1: left, 1: right)\n     * swipe (user swiped)\n     */\n    navigate(direction: number, swipe: any): void {\n        if ((direction === 1 && this.currentIdx < this.images.length - 1) ||\n            (direction === -1 && this.currentIdx > 0)) {\n\n            if (direction == -1) {\n                this.images[this.currentIdx]['transition'] = 'leaveToRight'\n                this.images[this.currentIdx - 1]['transition'] = 'enterFromLeft'\n            } else {\n                this.images[this.currentIdx]['transition'] = 'leaveToLeft'\n                this.images[this.currentIdx + 1]['transition'] = 'enterFromRight'\n            }\n            this.currentIdx += direction\n\n            if (swipe) {\n                this.hideNavigationArrows()\n            } else {\n                this.showNavigationArrows()\n            }\n            this.updateImage()\n        }\n    }\n\n    showNavigationArrows(): void {\n        this.leftArrowVisible = true\n        this.rightArrowVisible = true\n    }\n\n    closeViewer(): void {\n        this.images.forEach(image => image['transition'] = undefined)\n        this.images.forEach(image => image['active'] = false)\n        this.imageService.showImageViewer(false)\n    }\n\n    onKeydown(event: KeyboardEvent): void {\n        const prevent = [37, 39, 27, 36, 35]\n            .find(no => no === event.keyCode)\n        if (prevent) {\n            event.preventDefault()\n        }\n\n        switch (prevent) {\n            case 37:\n                // navigate left\n                this.navigate(-1, false)\n                break\n            case 39:\n                // navigate right\n                this.navigate(1, false)\n                break\n            case 27:\n                // esc\n                this.closeViewer()\n                break\n            case 36:\n                // pos 1\n                this.images[this.currentIdx]['transition'] = 'leaveToRight'\n                this.currentIdx = 0\n                this.images[this.currentIdx]['transition'] = 'enterFromLeft'\n                this.updateImage()\n                break\n            case 35:\n                // end\n                this.images[this.currentIdx]['transition'] = 'leaveToLeft'\n                this.currentIdx = this.images.length - 1\n                this.images[this.currentIdx]['transition'] = 'enterFromRight'\n                this.updateImage()\n                break\n            default:\n                break\n        }\n    }\n\n    private hideNavigationArrows(): void {\n        this.leftArrowVisible = false\n        this.rightArrowVisible = false\n    }\n\n    private updateImage(): void {\n        // wait for animation to end\n        setTimeout(() => {\n            this.updateQuality()\n            this.images[this.currentIdx]['active'] = true\n            this.images.forEach(image => {\n                if (image != this.images[this.currentIdx]) {\n                    image['active'] = false\n                    this.transform = 0\n                }\n            })\n        }, 500)\n    }\n\n    private updateQuality(): void {\n        const screenWidth = window.innerWidth\n        const screenHeight = window.innerHeight\n\n        switch (this.qualitySelected) {\n            case 'auto': {\n                this.categorySelected = 'preview_xxs'\n\n                if (screenWidth > this.images[this.currentIdx]['preview_xxs'].width &&\n                    screenHeight > this.images[this.currentIdx]['preview_xxs'].height) {\n                    this.categorySelected = 'preview_xs'\n                }\n                if (screenWidth > this.images[this.currentIdx]['preview_xs'].width &&\n                    screenHeight > this.images[this.currentIdx]['preview_xs'].height) {\n                    this.categorySelected = 'preview_s'\n                }\n                if (screenWidth > this.images[this.currentIdx]['preview_s'].width &&\n                    screenHeight > this.images[this.currentIdx]['preview_s'].height) {\n                    this.categorySelected = 'preview_m'\n                }\n                if (screenWidth > this.images[this.currentIdx]['preview_m'].width &&\n                    screenHeight > this.images[this.currentIdx]['preview_m'].height) {\n                    this.categorySelected = 'preview_l'\n                }\n                if (screenWidth > this.images[this.currentIdx]['preview_l'].width &&\n                    screenHeight > this.images[this.currentIdx]['preview_l'].height) {\n                    this.categorySelected = 'preview_xl'\n                }\n                if (screenWidth > this.images[this.currentIdx]['preview_xl'].width &&\n                    screenHeight > this.images[this.currentIdx]['preview_xl'].height) {\n                    this.categorySelected = 'raw'\n                }\n                break\n            }\n            case 'low': {\n                this.categorySelected = 'preview_xxs'\n                break\n            }\n            case 'mid': {\n                this.categorySelected = 'preview_m'\n                break\n            }\n            case 'high': {\n                this.categorySelected = 'raw'\n                break\n            }\n            default: {\n              this.categorySelected = 'preview_m'\n            }\n        }\n    }\n}\n","import { NgModule } from '@angular/core'\nimport { ImageService } from './services/image.service'\nimport { GalleryComponent } from './gallery/gallery.component'\nimport { ViewerComponent } from './viewer/viewer.component'\nimport { FormsModule } from '@angular/forms'\nimport { CommonModule } from '@angular/common'\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations'\nimport { HttpClientModule } from '@angular/common/http'\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    HttpClientModule,\n    BrowserAnimationsModule\n  ],\n  declarations: [\n    GalleryComponent,\n    ViewerComponent\n  ],\n  providers: [\n    ImageService\n  ],\n  exports: [\n    GalleryComponent,\n    ViewerComponent\n  ]\n})\nexport class Angular2ImageGalleryModule {\n}\n"],"names":[],"mappings":"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"}
