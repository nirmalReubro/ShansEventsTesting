import { Injectable, ChangeDetectorRef, Component, EventEmitter, HostListener, Input, Output, ViewChild, ViewChildren, NgModule } from '@angular/core';
import { Subject } from 'rxjs';
import { HttpClient, HttpClientModule } from '@angular/common/http';
import { animate, state, style, transition, trigger } from '@angular/animations';
import { FormsModule } from '@angular/forms';
import { CommonModule } from '@angular/common';
import { BrowserAnimationsModule } from '@angular/platform-browser/animations';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class ImageService {
    constructor() {
        this.imagesUpdatedSource = new Subject();
        this.imageSelectedIndexUpdatedSource = new Subject();
        this.showImageViewerSource = new Subject();
        this.imagesUpdated$ = this.imagesUpdatedSource.asObservable();
        this.imageSelectedIndexUpdated$ = this.imageSelectedIndexUpdatedSource.asObservable();
        this.showImageViewerChanged$ = this.showImageViewerSource.asObservable();
    }
    /**
     * @param {?} images
     * @return {?}
     */
    updateImages(images) {
        this.imagesUpdatedSource.next(images);
    }
    /**
     * @param {?} newIndex
     * @return {?}
     */
    updateSelectedImageIndex(newIndex) {
        this.imageSelectedIndexUpdatedSource.next(newIndex);
    }
    /**
     * @param {?} show
     * @return {?}
     */
    showImageViewer(show) {
        this.showImageViewerSource.next(show);
    }
}
ImageService.decorators = [
    { type: Injectable },
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class GalleryComponent {
    /**
     * @param {?} imageService
     * @param {?} http
     * @param {?} changeDetectorRef
     */
    constructor(imageService, http, changeDetectorRef) {
        this.imageService = imageService;
        this.http = http;
        this.changeDetectorRef = changeDetectorRef;
        this.gallery = [];
        this.imageDataStaticPath = 'assets/img/gallery/';
        this.imageDataCompletePath = '';
        this.dataFileName = 'data.json';
        this.images = [];
        this.minimalQualityCategory = 'preview_xxs';
        this.rowIndex = 0;
        this.rightArrowInactive = false;
        this.leftArrowInactive = false;
        this.providedImageMargin = 3;
        this.providedImageSize = 7;
        this.providedGalleryName = '';
        this.providedMetadataUri = undefined;
        this.rowsPerPage = 200;
        this.viewerChange = new EventEmitter();
    }
    /**
     * @param {?} event
     * @return {?}
     */
    triggerCycle(event) {
        this.scaleGallery();
    }
    /**
     * @param {?} event
     * @return {?}
     */
    windowResize(event) {
        this.render();
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.fetchDataAndRender();
        this.viewerSubscription = this.imageService.showImageViewerChanged$
            .subscribe((visibility) => this.viewerChange.emit(visibility));
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        // input params changed
        if (changes['providedGalleryName'] != undefined) {
            this.fetchDataAndRender();
        }
        else {
            this.render();
        }
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        if (this.viewerSubscription) {
            this.viewerSubscription.unsubscribe();
        }
    }
    /**
     * @param {?} img
     * @return {?}
     */
    openImageViewer(img) {
        this.imageService.updateImages(this.images);
        this.imageService.updateSelectedImageIndex(this.images.indexOf(img));
        this.imageService.showImageViewer(true);
    }
    /**
     * direction (-1: left, 1: right)
     * @param {?} direction
     * @return {?}
     */
    navigate(direction) {
        if ((direction === 1 && this.rowIndex < this.gallery.length - this.rowsPerPage)
            || (direction === -1 && this.rowIndex > 0)) {
            this.rowIndex += (this.rowsPerPage * direction);
        }
        this.refreshNavigationErrorState();
    }
    /**
     * @return {?}
     */
    calcImageMargin() {
        const /** @type {?} */ galleryWidth = this.getGalleryWidth();
        const /** @type {?} */ ratio = galleryWidth / 1920;
        return Math.round(Math.max(1, this.providedImageMargin * ratio));
    }
    /**
     * @return {?}
     */
    fetchDataAndRender() {
        this.imageDataCompletePath = this.providedMetadataUri;
        if (!this.providedMetadataUri) {
            this.imageDataCompletePath = this.providedGalleryName !== '' ?
                `${this.imageDataStaticPath + this.providedGalleryName}/${this.dataFileName}` :
                this.imageDataStaticPath + this.dataFileName;
        }
        this.http.get(this.imageDataCompletePath)
            .subscribe((data) => {
            this.images = data;
            this.imageService.updateImages(this.images);
            this.images.forEach(image => {
                image['galleryImageLoaded'] = false;
                image['viewerImageLoaded'] = false;
                image['srcAfterFocus'] = '';
            });
            // twice, single leads to different strange browser behaviour
            this.render();
            this.render();
        }, err => {
            if (this.providedMetadataUri) {
                console.error(`Provided endpoint '${this.providedMetadataUri}' did not serve metadata correctly or in the expected format.
      See here for more information: https://github.com/BenjaminBrandmeier/angular2-image-gallery/blob/master/docs/externalDataSource.md,
      Original error: ${err}`);
            }
            else {
                console.error(`Did you run the convert script from angular2-image-gallery for your images first? Original error: ${err}`);
            }
        }, () => undefined);
    }
    /**
     * @return {?}
     */
    render() {
        this.gallery = [];
        let /** @type {?} */ tempRow = [this.images[0]];
        let /** @type {?} */ currentRowIndex = 0;
        let /** @type {?} */ i = 0;
        for (i; i < this.images.length; i++) {
            while (this.images[i + 1] && this.shouldAddCandidate(tempRow, this.images[i + 1])) {
                i++;
            }
            if (this.images[i + 1]) {
                tempRow.pop();
            }
            this.gallery[currentRowIndex++] = tempRow;
            tempRow = [this.images[i + 1]];
        }
        this.scaleGallery();
    }
    /**
     * @param {?} imgRow
     * @param {?} candidate
     * @return {?}
     */
    shouldAddCandidate(imgRow, candidate) {
        const /** @type {?} */ oldDifference = this.calcIdealHeight() - this.calcRowHeight(imgRow);
        imgRow.push(candidate);
        const /** @type {?} */ newDifference = this.calcIdealHeight() - this.calcRowHeight(imgRow);
        return Math.abs(oldDifference) > Math.abs(newDifference);
    }
    /**
     * @param {?} imgRow
     * @return {?}
     */
    calcRowHeight(imgRow) {
        const /** @type {?} */ originalRowWidth = this.calcOriginalRowWidth(imgRow);
        const /** @type {?} */ ratio = (this.getGalleryWidth() - (imgRow.length - 1) * this.calcImageMargin()) / originalRowWidth;
        const /** @type {?} */ rowHeight = imgRow[0][this.minimalQualityCategory]['height'] * ratio;
        return rowHeight;
    }
    /**
     * @param {?} imgRow
     * @return {?}
     */
    calcOriginalRowWidth(imgRow) {
        let /** @type {?} */ originalRowWidth = 0;
        imgRow.forEach(img => {
            const /** @type {?} */ individualRatio = this.calcIdealHeight() / img[this.minimalQualityCategory]['height'];
            img[this.minimalQualityCategory]['width'] = img[this.minimalQualityCategory]['width'] * individualRatio;
            img[this.minimalQualityCategory]['height'] = this.calcIdealHeight();
            originalRowWidth += img[this.minimalQualityCategory]['width'];
        });
        return originalRowWidth;
    }
    /**
     * @return {?}
     */
    calcIdealHeight() {
        return this.getGalleryWidth() / (80 / this.providedImageSize) + 100;
    }
    /**
     * @return {?}
     */
    getGalleryWidth() {
        if (this.galleryContainer.nativeElement.clientWidth === 0) {
            // for IE11
            return this.galleryContainer.nativeElement.scrollWidth;
        }
        return this.galleryContainer.nativeElement.clientWidth;
    }
    /**
     * @return {?}
     */
    scaleGallery() {
        let /** @type {?} */ imageCounter = 0;
        let /** @type {?} */ maximumGalleryImageHeight = 0;
        this.gallery.slice(this.rowIndex, this.rowIndex + this.rowsPerPage)
            .forEach(imgRow => {
            const /** @type {?} */ originalRowWidth = this.calcOriginalRowWidth(imgRow);
            if (imgRow !== this.gallery[this.gallery.length - 1]) {
                const /** @type {?} */ ratio = (this.getGalleryWidth() - (imgRow.length - 1) * this.calcImageMargin()) / originalRowWidth;
                imgRow.forEach((img) => {
                    img['width'] = img[this.minimalQualityCategory]['width'] * ratio;
                    img['height'] = img[this.minimalQualityCategory]['height'] * ratio;
                    maximumGalleryImageHeight = Math.max(maximumGalleryImageHeight, img['height']);
                    this.checkForAsyncLoading(img, imageCounter++);
                });
            }
            else {
                imgRow.forEach((img) => {
                    img.width = img[this.minimalQualityCategory]['width'];
                    img.height = img[this.minimalQualityCategory]['height'];
                    maximumGalleryImageHeight = Math.max(maximumGalleryImageHeight, img['height']);
                    this.checkForAsyncLoading(img, imageCounter++);
                });
            }
        });
        this.minimalQualityCategory = maximumGalleryImageHeight > 375 ? 'preview_xs' : 'preview_xxs';
        this.refreshNavigationErrorState();
        this.changeDetectorRef.detectChanges();
    }
    /**
     * @param {?} image
     * @param {?} imageCounter
     * @return {?}
     */
    checkForAsyncLoading(image, imageCounter) {
        const /** @type {?} */ imageElements = this.imageElements.toArray();
        if (image['galleryImageLoaded'] ||
            (imageElements.length > 0 &&
                imageElements[imageCounter] &&
                this.isScrolledIntoView(imageElements[imageCounter].nativeElement))) {
            image['galleryImageLoaded'] = true;
            image['srcAfterFocus'] = image[this.minimalQualityCategory]['path'];
        }
        else {
            image['srcAfterFocus'] = '';
        }
    }
    /**
     * @param {?} element
     * @return {?}
     */
    isScrolledIntoView(element) {
        const /** @type {?} */ elementTop = element.getBoundingClientRect().top;
        const /** @type {?} */ elementBottom = element.getBoundingClientRect().bottom;
        return elementTop < window.innerHeight && elementBottom >= 0 && (elementBottom > 0 || elementTop > 0);
    }
    /**
     * @return {?}
     */
    refreshNavigationErrorState() {
        this.leftArrowInactive = this.rowIndex == 0;
        this.rightArrowInactive = this.rowIndex > (this.gallery.length - this.rowsPerPage);
    }
}
GalleryComponent.decorators = [
    { type: Component, args: [{
                selector: 'gallery',
                template: `<div #galleryContainer class="galleryContainer">
    <div class="innerGalleryContainer">
        <div *ngFor='let imgrow of gallery | slice:rowIndex:rowIndex+rowsPerPage; let i = index'
             class="imagerow"
             [style.margin-bottom.px]="calcImageMargin()">
            <img #imageElement
                 *ngFor='let img of imgrow; let j = index'
                 class="thumbnail"
                 [style.width.px]="img['width']"
                 [style.height.px]="img['height']"
                 (click)="openImageViewer(img)"
                 [src]="img['srcAfterFocus']"
                 [style.background]="img.dominantColor"
                 [style.margin-right.px]="calcImageMargin()"/>
        </div>
    </div>

    <div class="pagerContainer" *ngIf="(!rightArrowInactive || !leftArrowInactive)">
        <img [ngClass]="{'inactive': leftArrowInactive}" class="pager left"
             src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxzdmcgaWQ9IkxheWVyXzEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQ4IDQ4OyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNDggNDgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnPjxwYXRoIGQ9Ik0yNCw0NkMxMS45LDQ2LDIsMzYuMSwyLDI0UzExLjksMiwyNCwyczIyLDkuOSwyMiwyMlMzNi4xLDQ2LDI0LDQ2eiBNMjQsNEMxMyw0LDQsMTMsNCwyNGMwLDExLDksMjAsMjAsMjAgICBjMTEsMCwyMC05LDIwLTIwQzQ0LDEzLDM1LDQsMjQsNHoiLz48L2c+PGc+PHBvbHlnb24gcG9pbnRzPSIyNy42LDM2LjcgMTQuOSwyNCAyNy42LDExLjMgMjkuMSwxMi43IDE3LjgsMjQgMjkuMSwzNS4zICAiLz48L2c+PC9zdmc+"
             (click)="navigate(-1)"/>
        <img [ngClass]="{'inactive': rightArrowInactive}" class="pager right"
             src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxzdmcgaWQ9IkxheWVyXzEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQ4IDQ4OyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNDggNDgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnPjxwYXRoIGQ9Ik0yNCw0NkMxMS45LDQ2LDIsMzYuMSwyLDI0UzExLjksMiwyNCwyczIyLDkuOSwyMiwyMlMzNi4xLDQ2LDI0LDQ2eiBNMjQsNEMxMyw0LDQsMTMsNCwyNHM5LDIwLDIwLDIwczIwLTksMjAtMjAgICBTMzUsNCwyNCw0eiIvPjwvZz48Zz48cG9seWdvbiBwb2ludHM9IjIxLjQsMzYuNyAxOS45LDM1LjMgMzEuMiwyNCAxOS45LDEyLjcgMjEuNCwxMS4zIDM0LjEsMjQgICIvPjwvZz48L3N2Zz4="
             (click)="navigate(1)"/>
    </div>
</div>

<viewer></viewer>
`,
                styles: [`.innerGalleryContainer{position:relative}.galleryContainer{height:100%;width:100%;overflow:hidden}.innerGalleryContainer img:last-child{margin-right:-1px!important}.galleryContainer img:hover{-webkit-filter:brightness(50%);filter:brightness(50%);transition:all ease-out .2s;cursor:pointer}.imagerow{margin-right:1px;overflow:hidden;display:flex}::-webkit-scrollbar{display:none}.asyncLoadingContainer{position:absolute;background-color:transparent;height:0;width:0;bottom:120px}.pagerContainer{margin:40px auto;width:180px}.pager{display:block;height:60px}@media (max-width:700px){.pagerContainer{margin:40px auto;width:150px}.pager{display:block;height:45px}}.pager.inactive{opacity:.15}.pager.left{float:left}.pager.right{float:right}`]
            },] },
];
/** @nocollapse */
GalleryComponent.ctorParameters = () => [
    { type: ImageService },
    { type: HttpClient },
    { type: ChangeDetectorRef }
];
GalleryComponent.propDecorators = {
    providedImageMargin: [{ type: Input, args: ['flexBorderSize',] }],
    providedImageSize: [{ type: Input, args: ['flexImageSize',] }],
    providedGalleryName: [{ type: Input, args: ['galleryName',] }],
    providedMetadataUri: [{ type: Input, args: ['metadataUri',] }],
    rowsPerPage: [{ type: Input, args: ['maxRowsPerPage',] }],
    viewerChange: [{ type: Output }],
    galleryContainer: [{ type: ViewChild, args: ['galleryContainer',] }],
    imageElements: [{ type: ViewChildren, args: ['imageElement',] }],
    triggerCycle: [{ type: HostListener, args: ['window:scroll', ['$event'],] }],
    windowResize: [{ type: HostListener, args: ['window:resize', ['$event'],] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class ViewerComponent {
    /**
     * @param {?} imageService
     */
    constructor(imageService) {
        this.imageService = imageService;
        this.images = [{}];
        this.currentIdx = 0;
        this.leftArrowVisible = true;
        this.rightArrowVisible = true;
        this.categorySelected = 'preview_xxs';
        this.qualitySelectorShown = false;
        this.qualitySelected = 'auto';
        imageService.imagesUpdated$.subscribe(images => {
            this.images = images;
        });
        imageService.imageSelectedIndexUpdated$.subscribe(newIndex => {
            this.currentIdx = newIndex;
            this.images.forEach(image => image['active'] = false);
            this.images[this.currentIdx]['active'] = true;
            this.transform = 0;
            this.updateQuality();
        });
        imageService.showImageViewerChanged$.subscribe(showViewer => {
            this.showViewer = showViewer;
        });
        this.math = Math;
    }
    /**
     * @return {?}
     */
    get leftArrowActive() {
        return this.currentIdx > 0;
    }
    /**
     * @return {?}
     */
    get rightArrowActive() {
        return this.currentIdx < this.images.length - 1;
    }
    /**
     * @param {?} swipe
     * @return {?}
     */
    pan(swipe) {
        this.transform = swipe.deltaX;
    }
    /**
     * @return {?}
     */
    onResize() {
        this.images.forEach(image => {
            image['viewerImageLoaded'] = false;
            image['active'] = false;
        });
        this.updateImage();
    }
    /**
     * @return {?}
     */
    showQualitySelector() {
        this.qualitySelectorShown = !this.qualitySelectorShown;
    }
    /**
     * @param {?} newQuality
     * @return {?}
     */
    qualityChanged(newQuality) {
        this.qualitySelected = newQuality;
        this.updateImage();
    }
    /**
     * @param {?} image
     * @return {?}
     */
    imageLoaded(image) {
        image['viewerImageLoaded'] = true;
    }
    /**
     * direction (-1: left, 1: right)
     * swipe (user swiped)
     * @param {?} direction
     * @param {?} swipe
     * @return {?}
     */
    navigate(direction, swipe) {
        if ((direction === 1 && this.currentIdx < this.images.length - 1) ||
            (direction === -1 && this.currentIdx > 0)) {
            if (direction == -1) {
                this.images[this.currentIdx]['transition'] = 'leaveToRight';
                this.images[this.currentIdx - 1]['transition'] = 'enterFromLeft';
            }
            else {
                this.images[this.currentIdx]['transition'] = 'leaveToLeft';
                this.images[this.currentIdx + 1]['transition'] = 'enterFromRight';
            }
            this.currentIdx += direction;
            if (swipe) {
                this.hideNavigationArrows();
            }
            else {
                this.showNavigationArrows();
            }
            this.updateImage();
        }
    }
    /**
     * @return {?}
     */
    showNavigationArrows() {
        this.leftArrowVisible = true;
        this.rightArrowVisible = true;
    }
    /**
     * @return {?}
     */
    closeViewer() {
        this.images.forEach(image => image['transition'] = undefined);
        this.images.forEach(image => image['active'] = false);
        this.imageService.showImageViewer(false);
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onKeydown(event) {
        const /** @type {?} */ prevent = [37, 39, 27, 36, 35]
            .find(no => no === event.keyCode);
        if (prevent) {
            event.preventDefault();
        }
        switch (prevent) {
            case 37:
                // navigate left
                this.navigate(-1, false);
                break;
            case 39:
                // navigate right
                this.navigate(1, false);
                break;
            case 27:
                // esc
                this.closeViewer();
                break;
            case 36:
                // pos 1
                this.images[this.currentIdx]['transition'] = 'leaveToRight';
                this.currentIdx = 0;
                this.images[this.currentIdx]['transition'] = 'enterFromLeft';
                this.updateImage();
                break;
            case 35:
                // end
                this.images[this.currentIdx]['transition'] = 'leaveToLeft';
                this.currentIdx = this.images.length - 1;
                this.images[this.currentIdx]['transition'] = 'enterFromRight';
                this.updateImage();
                break;
            default:
                break;
        }
    }
    /**
     * @return {?}
     */
    hideNavigationArrows() {
        this.leftArrowVisible = false;
        this.rightArrowVisible = false;
    }
    /**
     * @return {?}
     */
    updateImage() {
        // wait for animation to end
        setTimeout(() => {
            this.updateQuality();
            this.images[this.currentIdx]['active'] = true;
            this.images.forEach(image => {
                if (image != this.images[this.currentIdx]) {
                    image['active'] = false;
                    this.transform = 0;
                }
            });
        }, 500);
    }
    /**
     * @return {?}
     */
    updateQuality() {
        const /** @type {?} */ screenWidth = window.innerWidth;
        const /** @type {?} */ screenHeight = window.innerHeight;
        switch (this.qualitySelected) {
            case 'auto': {
                this.categorySelected = 'preview_xxs';
                if (screenWidth > this.images[this.currentIdx]['preview_xxs'].width &&
                    screenHeight > this.images[this.currentIdx]['preview_xxs'].height) {
                    this.categorySelected = 'preview_xs';
                }
                if (screenWidth > this.images[this.currentIdx]['preview_xs'].width &&
                    screenHeight > this.images[this.currentIdx]['preview_xs'].height) {
                    this.categorySelected = 'preview_s';
                }
                if (screenWidth > this.images[this.currentIdx]['preview_s'].width &&
                    screenHeight > this.images[this.currentIdx]['preview_s'].height) {
                    this.categorySelected = 'preview_m';
                }
                if (screenWidth > this.images[this.currentIdx]['preview_m'].width &&
                    screenHeight > this.images[this.currentIdx]['preview_m'].height) {
                    this.categorySelected = 'preview_l';
                }
                if (screenWidth > this.images[this.currentIdx]['preview_l'].width &&
                    screenHeight > this.images[this.currentIdx]['preview_l'].height) {
                    this.categorySelected = 'preview_xl';
                }
                if (screenWidth > this.images[this.currentIdx]['preview_xl'].width &&
                    screenHeight > this.images[this.currentIdx]['preview_xl'].height) {
                    this.categorySelected = 'raw';
                }
                break;
            }
            case 'low': {
                this.categorySelected = 'preview_xxs';
                break;
            }
            case 'mid': {
                this.categorySelected = 'preview_m';
                break;
            }
            case 'high': {
                this.categorySelected = 'raw';
                break;
            }
            default: {
                this.categorySelected = 'preview_m';
            }
        }
    }
}
ViewerComponent.decorators = [
    { type: Component, args: [{
                selector: 'viewer',
                template: `<div class="outerContainer" (window:resize)="onResize()" *ngIf="showViewer" [@showViewerTransition]="showViewer">


    <img [ngClass]="{'activeArrow': leftArrowActive}" class="arrow left"
         src="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0cHgiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjx0aXRsZS8+PGRlc2MvPiAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgaWQ9Im1pdSIgc3Ryb2tlPSIjNTU1IiBzdHJva2Utd2lkdGg9IjAuMiI+ICAgICA8ZyBpZD0iQXJ0Ym9hcmQtMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM5NS4wMDAwMDAsIC0xOTEuMDAwMDAwKSI+PGcgaWQ9InNsaWNlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMTUuMDAwMDAwLCAxMTkuMDAwMDAwKSIvPjxwYXRoICAgICAgIGQ9Ik0zOTYsMjAyLjUgQzM5NiwxOTYuMTQ4NzI1IDQwMS4xNDg3MjUsMTkxIDQwNy41LDE5MSBDNDEzLjg1MTI3NSwxOTEgNDE5LDE5Ni4xNDg3MjUgNDE5LDIwMi41IEM0MTksMjA4Ljg1MTI3NSA0MTMuODUxMjc1LDIxNCA0MDcuNSwyMTQgQzQwMS4xNDg3MjUsMjE0IDM5NiwyMDguODUxMjc1IDM5NiwyMDIuNSBaIE00MDguNjU2ODU0LDE5Ni44NDMxNDYgTDQxMC4wNzEwNjgsMTk4LjI1NzM1OSBMNDA1LjgyODQyNywyMDIuNSBMNDEwLjA3MTA2OCwyMDYuNzQyNjQxIEw0MDguNjU2ODU0LDIwOC4xNTY4NTQgTDQwMywyMDIuNSBMNDA4LjY1Njg1NCwxOTYuODQzMTQ2IFoiICAgICAgIGZpbGw9IiNhYWEiICAgICAgIGlkPSJjaXJjbGUtYmFjay1hcnJvdy1nbHlwaCIvPjwvZz4gICA8L2c+IDwvc3ZnPg=="
         [hidden]="!leftArrowVisible" (click)="navigate(-1, false)"/>
    <img [ngClass]="{'activeArrow': rightArrowActive}" class="arrow right"
         src="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0cHgiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjx0aXRsZS8+PGRlc2MvPjxkZWZzLz4gICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGlkPSJtaXUiIHN0cm9rZT0iIzU1NSIgc3Ryb2tlLXdpZHRoPSIwLjIiPiAgICAgPGcgaWQ9IkFydGJvYXJkLTEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00NjcuMDAwMDAwLCAtMTkxLjAwMDAwMCkiPjxnIGlkPSJzbGljZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjE1LjAwMDAwMCwgMTE5LjAwMDAwMCkiLz48cGF0aCAgICAgICBkPSJNNDY4LDIwMi41IEM0NjgsMTk2LjE0ODcyNSA0NzMuMTQ4NzI1LDE5MSA0NzkuNSwxOTEgQzQ4NS44NTEyNzUsMTkxIDQ5MSwxOTYuMTQ4NzI1IDQ5MSwyMDIuNSBDNDkxLDIwOC44NTEyNzUgNDg1Ljg1MTI3NSwyMTQgNDc5LjUsMjE0IEM0NzMuMTQ4NzI1LDIxNCA0NjgsMjA4Ljg1MTI3NSA0NjgsMjAyLjUgWiBNNDgwLjY1Njg1NCwxOTYuODQzMTQ2IEw0ODIuMDcxMDY4LDE5OC4yNTczNTkgTDQ3Ny44Mjg0MjcsMjAyLjUgTDQ4Mi4wNzEwNjgsMjA2Ljc0MjY0MSBMNDgwLjY1Njg1NCwyMDguMTU2ODU0IEw0NzUsMjAyLjUgTDQ4MC42NTY4NTQsMTk2Ljg0MzE0NiBaIiAgICAgICBmaWxsPSIjYWFhIiAgICAgICBpZD0iY2lyY2xlLW5leHQtYXJyb3ctZGlzY2xvc3VyZS1nbHlwaCIgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDc5LjUwMDAwMCwgMjAyLjUwMDAwMCkgc2NhbGUoLTEsIDEpIHRyYW5zbGF0ZSgtNDc5LjUwMDAwMCwgLTIwMi41MDAwMDApICIvPjwvZz4gICA8L2c+IDwvc3ZnPg=="
         [hidden]="!rightArrowVisible" (click)="navigate(1, false)"/>

    <div class="buttonContainer">
        <img class="action close"
             src="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjMwcHgiIGlkPSJMYXllcl8xIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgdmVyc2lvbj0iMS4xIiBmaWxsPSIjYWFhIiB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgd2lkdGg9IjI0cHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPiAgPHBhdGggICAgc3Ryb2tlLXdpZHRoPSIzMCIgc3Ryb2tlPSIjNDQ0IiAgICBkPSJNNDM3LjUsMzg2LjZMMzA2LjksMjU2bDEzMC42LTEzMC42YzE0LjEtMTQuMSwxNC4xLTM2LjgsMC01MC45Yy0xNC4xLTE0LjEtMzYuOC0xNC4xLTUwLjksMEwyNTYsMjA1LjFMMTI1LjQsNzQuNSAgYy0xNC4xLTE0LjEtMzYuOC0xNC4xLTUwLjksMGMtMTQuMSwxNC4xLTE0LjEsMzYuOCwwLDUwLjlMMjA1LjEsMjU2TDc0LjUsMzg2LjZjLTE0LjEsMTQuMS0xNC4xLDM2LjgsMCw1MC45ICBjMTQuMSwxNC4xLDM2LjgsMTQuMSw1MC45LDBMMjU2LDMwNi45bDEzMC42LDEzMC42YzE0LjEsMTQuMSwzNi44LDE0LjEsNTAuOSwwQzQ1MS41LDQyMy40LDQ1MS41LDQwMC42LDQzNy41LDM4Ni42eiIvPjwvc3ZnPg=="
             (click)="closeViewer()"/>
    </div>

    <div class="imageContainer"
         (click)="showNavigationArrows()"
         (swipeleft)="navigate(1, $event)"
         (swiperight)="navigate(-1, $event)"
         (pan)="pan($event)">

        <div *ngFor='let img of images; let j = index'
             class="image"
             [class.active]="img['active']"
             [style.background-image]="img['viewerImageLoaded'] ? 'url('+img[categorySelected]['path']+')' : math.abs(currentIdx-j) <=1 ? 'url('+img['preview_xxs']['path']+')' : ''"
             [style.left]="transform+'px'"
             [@imageTransition]="img['transition']"></div>

        <img *ngFor='let img of images; let j = index'
             class="preloading-image"
             (load)="imageLoaded(img)"
             src="{{ math.abs(currentIdx-j) <=1 ? img[categorySelected]['path'] : ''}}"/>
    </div>
</div>

`,
                styles: [`.outerContainer{top:0;bottom:0;left:0;right:0;height:100%;width:100%;position:fixed;background-color:rgba(0,0,0,.95);font-family:sans-serif;z-index:1031}.imageContainer{position:absolute;float:none;top:0;bottom:0;left:0;right:0}.imageContainer .image,.imageContainer .preloading-image{visibility:hidden}.imageContainer .image.active{position:absolute;visibility:visible;background-repeat:no-repeat;background-size:contain;background-position:center;margin:auto;left:0;right:0;top:0;bottom:0;height:100%;width:100%;opacity:1}.arrow{opacity:0}.arrow:hover{cursor:pointer}.outerContainer:hover .arrow.activeArrow{height:calc(20px + 1.5vw);position:absolute;top:calc(50% - (20px + 1.5vw)/ 2);bottom:50%;z-index:1;opacity:1;transition:all ease-out .5s}.arrow.left{left:2vw}.arrow.right{right:2vw}.arrow:not(.activeArrow):hover{opacity:0;cursor:pointer;transition:all ease-out .5s}.buttonContainer{position:absolute;top:20px;right:20px;height:20px;text-align:center;opacity:1;z-index:200;transition:all ease-out .5s}.buttonContainer .action{height:100%;cursor:pointer;vertical-align:top}.buttonContainer .action:focus{outline:0}.buttonContainer .action:hover{background-color:#222;transition:all ease-out .3s}.buttonContainer .action.close{width:26px;height:26px}md-button-toggle.checked{background-color:#a0a0a0}.menuButton{position:absolute;bottom:20px;right:20px;text-align:center;opacity:1;z-index:200;transition:all ease-out .5s}@font-face{font-family:'Material Icons';font-style:normal;font-weight:400;src:local('Material Icons'),local('MaterialIcons-Regular'),url(https://fonts.gstatic.com/s/materialicons/v19/2fcrYFNaTjcS6g4U3t-Y5ZjZjT5FdEJ140U2DJYC3mY.woff2) format('woff2')}.material-icons{font-family:'Material Icons';font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased}`],
                host: {
                    '(document:keydown)': 'onKeydown($event)'
                },
                animations: [
                    trigger('imageTransition', [
                        state('enterFromRight', style({
                            opacity: 1,
                            transform: 'translate(0px, 0px)'
                        })),
                        state('enterFromLeft', style({
                            opacity: 1,
                            transform: 'translate(0px, 0px)'
                        })),
                        state('leaveToLeft', style({
                            opacity: 0,
                            transform: 'translate(-100px, 0px)'
                        })),
                        state('leaveToRight', style({
                            opacity: 0,
                            transform: 'translate(100px, 0px)'
                        })),
                        transition('* => enterFromRight', [
                            style({
                                opacity: 0,
                                transform: 'translate(30px, 0px)'
                            }),
                            animate('250ms 500ms ease-in')
                        ]),
                        transition('* => enterFromLeft', [
                            style({
                                opacity: 0,
                                transform: 'translate(-30px, 0px)'
                            }),
                            animate('250ms 500ms ease-in')
                        ]),
                        transition('* => leaveToLeft', [
                            style({
                                opacity: 1
                            }),
                            animate('250ms ease-out')
                        ]),
                        transition('* => leaveToRight', [
                            style({
                                opacity: 1
                            }),
                            animate('250ms ease-out')
                        ])
                    ]),
                    trigger('showViewerTransition', [
                        state('true', style({
                            opacity: 1
                        })),
                        state('void', style({
                            opacity: 0
                        })),
                        transition('void => *', [
                            style({
                                opacity: 0
                            }),
                            animate('1000ms ease-in')
                        ]),
                        transition('* => void', [
                            style({
                                opacity: 1
                            }),
                            animate('500ms ease-out')
                        ])
                    ])
                ]
            },] },
];
/** @nocollapse */
ViewerComponent.ctorParameters = () => [
    { type: ImageService }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class Angular2ImageGalleryModule {
}
Angular2ImageGalleryModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    FormsModule,
                    HttpClientModule,
                    BrowserAnimationsModule
                ],
                declarations: [
                    GalleryComponent,
                    ViewerComponent
                ],
                providers: [
                    ImageService
                ],
                exports: [
                    GalleryComponent,
                    ViewerComponent
                ]
            },] },
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

export { ImageService, GalleryComponent, ViewerComponent, Angular2ImageGalleryModule };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ndWxhcjItaW1hZ2UtZ2FsbGVyeS5qcy5tYXAiLCJzb3VyY2VzIjpbIm5nOi8vYW5ndWxhcjItaW1hZ2UtZ2FsbGVyeS9saWIvc2VydmljZXMvaW1hZ2Uuc2VydmljZS50cyIsIm5nOi8vYW5ndWxhcjItaW1hZ2UtZ2FsbGVyeS9saWIvZ2FsbGVyeS9nYWxsZXJ5LmNvbXBvbmVudC50cyIsIm5nOi8vYW5ndWxhcjItaW1hZ2UtZ2FsbGVyeS9saWIvdmlld2VyL3ZpZXdlci5jb21wb25lbnQudHMiLCJuZzovL2FuZ3VsYXIyLWltYWdlLWdhbGxlcnkvbGliL2FuZ3VsYXIyLWltYWdlLWdhbGxlcnkubW9kdWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJ1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3ViamVjdCB9IGZyb20gJ3J4anMnXG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBJbWFnZVNlcnZpY2Uge1xuICAgIHByaXZhdGUgaW1hZ2VzVXBkYXRlZFNvdXJjZSA9IG5ldyBTdWJqZWN0PEFycmF5PGFueT4+KClcbiAgICBwcml2YXRlIGltYWdlU2VsZWN0ZWRJbmRleFVwZGF0ZWRTb3VyY2UgPSBuZXcgU3ViamVjdDxudW1iZXI+KClcbiAgICBwcml2YXRlIHNob3dJbWFnZVZpZXdlclNvdXJjZSA9IG5ldyBTdWJqZWN0PGJvb2xlYW4+KClcblxuICAgIGltYWdlc1VwZGF0ZWQkOiBPYnNlcnZhYmxlPEFycmF5PGFueT4+ID0gdGhpcy5pbWFnZXNVcGRhdGVkU291cmNlLmFzT2JzZXJ2YWJsZSgpXG4gICAgaW1hZ2VTZWxlY3RlZEluZGV4VXBkYXRlZCQ6IE9ic2VydmFibGU8bnVtYmVyPiA9IHRoaXMuaW1hZ2VTZWxlY3RlZEluZGV4VXBkYXRlZFNvdXJjZS5hc09ic2VydmFibGUoKVxuICAgIHNob3dJbWFnZVZpZXdlckNoYW5nZWQkOiBPYnNlcnZhYmxlPGJvb2xlYW4+ID0gdGhpcy5zaG93SW1hZ2VWaWV3ZXJTb3VyY2UuYXNPYnNlcnZhYmxlKClcblxuICAgIHVwZGF0ZUltYWdlcyhpbWFnZXM6IEFycmF5PGFueT4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5pbWFnZXNVcGRhdGVkU291cmNlLm5leHQoaW1hZ2VzKVxuICAgIH1cblxuICAgIHVwZGF0ZVNlbGVjdGVkSW1hZ2VJbmRleChuZXdJbmRleDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaW1hZ2VTZWxlY3RlZEluZGV4VXBkYXRlZFNvdXJjZS5uZXh0KG5ld0luZGV4KVxuICAgIH1cblxuICAgIHNob3dJbWFnZVZpZXdlcihzaG93OiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2hvd0ltYWdlVmlld2VyU291cmNlLm5leHQoc2hvdylcbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICBDaGFuZ2VEZXRlY3RvclJlZiwgQ29tcG9uZW50LCBFbGVtZW50UmVmLCBFdmVudEVtaXR0ZXIsIEhvc3RMaXN0ZW5lcixcbiAgSW5wdXQsIE9uQ2hhbmdlcywgT25EZXN0cm95LCBPbkluaXQsIE91dHB1dCwgUXVlcnlMaXN0LCBTaW1wbGVDaGFuZ2VzLCBWaWV3Q2hpbGQsIFZpZXdDaGlsZHJlblxufSBmcm9tICdAYW5ndWxhci9jb3JlJ1xuaW1wb3J0IHsgSW1hZ2VTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvaW1hZ2Uuc2VydmljZSdcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMvaW50ZXJuYWwvU3Vic2NyaXB0aW9uJ1xuaW1wb3J0IHsgSHR0cENsaWVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJ1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2dhbGxlcnknLFxuICAgIHRlbXBsYXRlOiBgPGRpdiAjZ2FsbGVyeUNvbnRhaW5lciBjbGFzcz1cImdhbGxlcnlDb250YWluZXJcIj5cbiAgICA8ZGl2IGNsYXNzPVwiaW5uZXJHYWxsZXJ5Q29udGFpbmVyXCI+XG4gICAgICAgIDxkaXYgKm5nRm9yPSdsZXQgaW1ncm93IG9mIGdhbGxlcnkgfCBzbGljZTpyb3dJbmRleDpyb3dJbmRleCtyb3dzUGVyUGFnZTsgbGV0IGkgPSBpbmRleCdcbiAgICAgICAgICAgICBjbGFzcz1cImltYWdlcm93XCJcbiAgICAgICAgICAgICBbc3R5bGUubWFyZ2luLWJvdHRvbS5weF09XCJjYWxjSW1hZ2VNYXJnaW4oKVwiPlxuICAgICAgICAgICAgPGltZyAjaW1hZ2VFbGVtZW50XG4gICAgICAgICAgICAgICAgICpuZ0Zvcj0nbGV0IGltZyBvZiBpbWdyb3c7IGxldCBqID0gaW5kZXgnXG4gICAgICAgICAgICAgICAgIGNsYXNzPVwidGh1bWJuYWlsXCJcbiAgICAgICAgICAgICAgICAgW3N0eWxlLndpZHRoLnB4XT1cImltZ1snd2lkdGgnXVwiXG4gICAgICAgICAgICAgICAgIFtzdHlsZS5oZWlnaHQucHhdPVwiaW1nWydoZWlnaHQnXVwiXG4gICAgICAgICAgICAgICAgIChjbGljayk9XCJvcGVuSW1hZ2VWaWV3ZXIoaW1nKVwiXG4gICAgICAgICAgICAgICAgIFtzcmNdPVwiaW1nWydzcmNBZnRlckZvY3VzJ11cIlxuICAgICAgICAgICAgICAgICBbc3R5bGUuYmFja2dyb3VuZF09XCJpbWcuZG9taW5hbnRDb2xvclwiXG4gICAgICAgICAgICAgICAgIFtzdHlsZS5tYXJnaW4tcmlnaHQucHhdPVwiY2FsY0ltYWdlTWFyZ2luKClcIi8+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuXG4gICAgPGRpdiBjbGFzcz1cInBhZ2VyQ29udGFpbmVyXCIgKm5nSWY9XCIoIXJpZ2h0QXJyb3dJbmFjdGl2ZSB8fCAhbGVmdEFycm93SW5hY3RpdmUpXCI+XG4gICAgICAgIDxpbWcgW25nQ2xhc3NdPVwieydpbmFjdGl2ZSc6IGxlZnRBcnJvd0luYWN0aXZlfVwiIGNsYXNzPVwicGFnZXIgbGVmdFwiXG4gICAgICAgICAgICAgc3JjPVwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUEvUGp4emRtY2dhV1E5SWt4aGVXVnlYekVpSUhOMGVXeGxQU0psYm1GaWJHVXRZbUZqYTJkeWIzVnVaRHB1WlhjZ01DQXdJRFE0SURRNE95SWdkbVZ5YzJsdmJqMGlNUzR4SWlCMmFXVjNRbTk0UFNJd0lEQWdORGdnTkRnaUlIaHRiRHB6Y0dGalpUMGljSEpsYzJWeWRtVWlJSGh0Ykc1elBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5SWdlRzFzYm5NNmVHeHBibXM5SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpFNU9Ua3ZlR3hwYm1zaVBqeG5Qanh3WVhSb0lHUTlJazB5TkN3ME5rTXhNUzQ1TERRMkxESXNNell1TVN3eUxESTBVekV4TGprc01pd3lOQ3d5Y3pJeUxEa3VPU3d5TWl3eU1sTXpOaTR4TERRMkxESTBMRFEyZWlCTk1qUXNORU14TXl3MExEUXNNVE1zTkN3eU5HTXdMREV4TERrc01qQXNNakFzTWpBZ0lDQmpNVEVzTUN3eU1DMDVMREl3TFRJd1F6UTBMREV6TERNMUxEUXNNalFzTkhvaUx6NDhMMmMrUEdjK1BIQnZiSGxuYjI0Z2NHOXBiblJ6UFNJeU55NDJMRE0yTGpjZ01UUXVPU3d5TkNBeU55NDJMREV4TGpNZ01qa3VNU3d4TWk0M0lERTNMamdzTWpRZ01qa3VNU3d6TlM0eklDQWlMejQ4TDJjK1BDOXpkbWMrXCJcbiAgICAgICAgICAgICAoY2xpY2spPVwibmF2aWdhdGUoLTEpXCIvPlxuICAgICAgICA8aW1nIFtuZ0NsYXNzXT1cInsnaW5hY3RpdmUnOiByaWdodEFycm93SW5hY3RpdmV9XCIgY2xhc3M9XCJwYWdlciByaWdodFwiXG4gICAgICAgICAgICAgc3JjPVwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUEvUGp4emRtY2dhV1E5SWt4aGVXVnlYekVpSUhOMGVXeGxQU0psYm1GaWJHVXRZbUZqYTJkeWIzVnVaRHB1WlhjZ01DQXdJRFE0SURRNE95SWdkbVZ5YzJsdmJqMGlNUzR4SWlCMmFXVjNRbTk0UFNJd0lEQWdORGdnTkRnaUlIaHRiRHB6Y0dGalpUMGljSEpsYzJWeWRtVWlJSGh0Ykc1elBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5SWdlRzFzYm5NNmVHeHBibXM5SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpFNU9Ua3ZlR3hwYm1zaVBqeG5Qanh3WVhSb0lHUTlJazB5TkN3ME5rTXhNUzQ1TERRMkxESXNNell1TVN3eUxESTBVekV4TGprc01pd3lOQ3d5Y3pJeUxEa3VPU3d5TWl3eU1sTXpOaTR4TERRMkxESTBMRFEyZWlCTk1qUXNORU14TXl3MExEUXNNVE1zTkN3eU5ITTVMREl3TERJd0xESXdjekl3TFRrc01qQXRNakFnSUNCVE16VXNOQ3d5TkN3MGVpSXZQand2Wno0OFp6NDhjRzlzZVdkdmJpQndiMmx1ZEhNOUlqSXhMalFzTXpZdU55QXhPUzQ1TERNMUxqTWdNekV1TWl3eU5DQXhPUzQ1TERFeUxqY2dNakV1TkN3eE1TNHpJRE0wTGpFc01qUWdJQ0l2UGp3dlp6NDhMM04yWno0PVwiXG4gICAgICAgICAgICAgKGNsaWNrKT1cIm5hdmlnYXRlKDEpXCIvPlxuICAgIDwvZGl2PlxuPC9kaXY+XG5cbjx2aWV3ZXI+PC92aWV3ZXI+XG5gLFxuICAgIHN0eWxlczogW2AuaW5uZXJHYWxsZXJ5Q29udGFpbmVye3Bvc2l0aW9uOnJlbGF0aXZlfS5nYWxsZXJ5Q29udGFpbmVye2hlaWdodDoxMDAlO3dpZHRoOjEwMCU7b3ZlcmZsb3c6aGlkZGVufS5pbm5lckdhbGxlcnlDb250YWluZXIgaW1nOmxhc3QtY2hpbGR7bWFyZ2luLXJpZ2h0Oi0xcHghaW1wb3J0YW50fS5nYWxsZXJ5Q29udGFpbmVyIGltZzpob3Zlcnstd2Via2l0LWZpbHRlcjpicmlnaHRuZXNzKDUwJSk7ZmlsdGVyOmJyaWdodG5lc3MoNTAlKTt0cmFuc2l0aW9uOmFsbCBlYXNlLW91dCAuMnM7Y3Vyc29yOnBvaW50ZXJ9LmltYWdlcm93e21hcmdpbi1yaWdodDoxcHg7b3ZlcmZsb3c6aGlkZGVuO2Rpc3BsYXk6ZmxleH06Oi13ZWJraXQtc2Nyb2xsYmFye2Rpc3BsYXk6bm9uZX0uYXN5bmNMb2FkaW5nQ29udGFpbmVye3Bvc2l0aW9uOmFic29sdXRlO2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7aGVpZ2h0OjA7d2lkdGg6MDtib3R0b206MTIwcHh9LnBhZ2VyQ29udGFpbmVye21hcmdpbjo0MHB4IGF1dG87d2lkdGg6MTgwcHh9LnBhZ2Vye2Rpc3BsYXk6YmxvY2s7aGVpZ2h0OjYwcHh9QG1lZGlhIChtYXgtd2lkdGg6NzAwcHgpey5wYWdlckNvbnRhaW5lcnttYXJnaW46NDBweCBhdXRvO3dpZHRoOjE1MHB4fS5wYWdlcntkaXNwbGF5OmJsb2NrO2hlaWdodDo0NXB4fX0ucGFnZXIuaW5hY3RpdmV7b3BhY2l0eTouMTV9LnBhZ2VyLmxlZnR7ZmxvYXQ6bGVmdH0ucGFnZXIucmlnaHR7ZmxvYXQ6cmlnaHR9YF1cbn0pXG5leHBvcnQgY2xhc3MgR2FsbGVyeUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95LCBPbkNoYW5nZXMge1xuICAgIGdhbGxlcnk6IEFycmF5PGFueT4gPSBbXVxuICAgIGltYWdlRGF0YVN0YXRpY1BhdGg6IHN0cmluZyA9ICdhc3NldHMvaW1nL2dhbGxlcnkvJ1xuICAgIGltYWdlRGF0YUNvbXBsZXRlUGF0aDogc3RyaW5nID0gJydcbiAgICBkYXRhRmlsZU5hbWU6IHN0cmluZyA9ICdkYXRhLmpzb24nXG4gICAgaW1hZ2VzOiBBcnJheTxhbnk+ID0gW11cbiAgICBtaW5pbWFsUXVhbGl0eUNhdGVnb3J5ID0gJ3ByZXZpZXdfeHhzJ1xuICAgIHZpZXdlclN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uXG4gICAgcm93SW5kZXg6IG51bWJlciA9IDBcbiAgICByaWdodEFycm93SW5hY3RpdmU6IGJvb2xlYW4gPSBmYWxzZVxuICAgIGxlZnRBcnJvd0luYWN0aXZlOiBib29sZWFuID0gZmFsc2VcblxuICAgIEBJbnB1dCgnZmxleEJvcmRlclNpemUnKSBwcm92aWRlZEltYWdlTWFyZ2luOiBudW1iZXIgPSAzXG4gICAgQElucHV0KCdmbGV4SW1hZ2VTaXplJykgcHJvdmlkZWRJbWFnZVNpemU6IG51bWJlciA9IDdcbiAgICBASW5wdXQoJ2dhbGxlcnlOYW1lJykgcHJvdmlkZWRHYWxsZXJ5TmFtZTogc3RyaW5nID0gJydcbiAgICBASW5wdXQoJ21ldGFkYXRhVXJpJykgcHJvdmlkZWRNZXRhZGF0YVVyaTogc3RyaW5nID0gdW5kZWZpbmVkXG4gICAgQElucHV0KCdtYXhSb3dzUGVyUGFnZScpIHJvd3NQZXJQYWdlOiBudW1iZXIgPSAyMDBcblxuICAgIEBPdXRwdXQoKSB2aWV3ZXJDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGJvb2xlYW4+KClcblxuICAgIEBWaWV3Q2hpbGQoJ2dhbGxlcnlDb250YWluZXInKSBnYWxsZXJ5Q29udGFpbmVyOiBFbGVtZW50UmVmXG4gICAgQFZpZXdDaGlsZHJlbignaW1hZ2VFbGVtZW50JykgaW1hZ2VFbGVtZW50czogUXVlcnlMaXN0PGFueT5cblxuICAgIEBIb3N0TGlzdGVuZXIoJ3dpbmRvdzpzY3JvbGwnLCBbJyRldmVudCddKSB0cmlnZ2VyQ3ljbGUoZXZlbnQ6IGFueSk6IHZvaWQge1xuICAgICAgICB0aGlzLnNjYWxlR2FsbGVyeSgpXG4gICAgfVxuXG4gICAgQEhvc3RMaXN0ZW5lcignd2luZG93OnJlc2l6ZScsIFsnJGV2ZW50J10pIHdpbmRvd1Jlc2l6ZShldmVudDogYW55KTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVuZGVyKClcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgaW1hZ2VTZXJ2aWNlOiBJbWFnZVNlcnZpY2UsIHB1YmxpYyBodHRwOiBIdHRwQ2xpZW50LCBwdWJsaWMgY2hhbmdlRGV0ZWN0b3JSZWY6IENoYW5nZURldGVjdG9yUmVmKSB7XG4gICAgfVxuXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZmV0Y2hEYXRhQW5kUmVuZGVyKClcbiAgICAgICAgdGhpcy52aWV3ZXJTdWJzY3JpcHRpb24gPSB0aGlzLmltYWdlU2VydmljZS5zaG93SW1hZ2VWaWV3ZXJDaGFuZ2VkJFxuICAgICAgICAgICAgLnN1YnNjcmliZSgodmlzaWJpbGl0eTogYm9vbGVhbikgPT4gdGhpcy52aWV3ZXJDaGFuZ2UuZW1pdCh2aXNpYmlsaXR5KSlcbiAgICB9XG5cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XG4gICAgICAgIC8vIGlucHV0IHBhcmFtcyBjaGFuZ2VkXG4gICAgICAgIGlmIChjaGFuZ2VzWydwcm92aWRlZEdhbGxlcnlOYW1lJ10gIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmZldGNoRGF0YUFuZFJlbmRlcigpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMudmlld2VyU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnZpZXdlclN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvcGVuSW1hZ2VWaWV3ZXIoaW1nOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5pbWFnZVNlcnZpY2UudXBkYXRlSW1hZ2VzKHRoaXMuaW1hZ2VzKVxuICAgICAgICB0aGlzLmltYWdlU2VydmljZS51cGRhdGVTZWxlY3RlZEltYWdlSW5kZXgodGhpcy5pbWFnZXMuaW5kZXhPZihpbWcpKVxuICAgICAgICB0aGlzLmltYWdlU2VydmljZS5zaG93SW1hZ2VWaWV3ZXIodHJ1ZSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBkaXJlY3Rpb24gKC0xOiBsZWZ0LCAxOiByaWdodClcbiAgICAgKi9cbiAgICBuYXZpZ2F0ZShkaXJlY3Rpb246IG51bWJlcik6IHZvaWQge1xuICAgICAgICBpZiAoKGRpcmVjdGlvbiA9PT0gMSAmJiB0aGlzLnJvd0luZGV4IDwgdGhpcy5nYWxsZXJ5Lmxlbmd0aCAtIHRoaXMucm93c1BlclBhZ2UpXG4gICAgICAgICAgICB8fCAoZGlyZWN0aW9uID09PSAtMSAmJiB0aGlzLnJvd0luZGV4ID4gMCkpIHtcbiAgICAgICAgICAgIHRoaXMucm93SW5kZXggKz0gKHRoaXMucm93c1BlclBhZ2UgKiBkaXJlY3Rpb24pXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZWZyZXNoTmF2aWdhdGlvbkVycm9yU3RhdGUoKVxuICAgIH1cblxuICAgIGNhbGNJbWFnZU1hcmdpbigpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBnYWxsZXJ5V2lkdGggPSB0aGlzLmdldEdhbGxlcnlXaWR0aCgpXG4gICAgICAgIGNvbnN0IHJhdGlvID0gZ2FsbGVyeVdpZHRoIC8gMTkyMFxuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChNYXRoLm1heCgxLCB0aGlzLnByb3ZpZGVkSW1hZ2VNYXJnaW4gKiByYXRpbykpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmZXRjaERhdGFBbmRSZW5kZXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaW1hZ2VEYXRhQ29tcGxldGVQYXRoID0gdGhpcy5wcm92aWRlZE1ldGFkYXRhVXJpXG5cbiAgICAgICAgaWYgKCF0aGlzLnByb3ZpZGVkTWV0YWRhdGFVcmkpIHtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VEYXRhQ29tcGxldGVQYXRoID0gdGhpcy5wcm92aWRlZEdhbGxlcnlOYW1lICE9PSAnJyA/XG4gICAgICAgICAgICAgICAgYCR7dGhpcy5pbWFnZURhdGFTdGF0aWNQYXRoICsgdGhpcy5wcm92aWRlZEdhbGxlcnlOYW1lfS8ke3RoaXMuZGF0YUZpbGVOYW1lfWAgOlxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VEYXRhU3RhdGljUGF0aCArIHRoaXMuZGF0YUZpbGVOYW1lXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmh0dHAuZ2V0KHRoaXMuaW1hZ2VEYXRhQ29tcGxldGVQYXRoKVxuICAgICAgICAgIC5zdWJzY3JpYmUoXG4gICAgICAgICAgICAoZGF0YTogQXJyYXk8YW55PikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlcyA9IGRhdGFcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWFnZVNlcnZpY2UudXBkYXRlSW1hZ2VzKHRoaXMuaW1hZ2VzKVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VzLmZvckVhY2goaW1hZ2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIGltYWdlWydnYWxsZXJ5SW1hZ2VMb2FkZWQnXSA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgaW1hZ2VbJ3ZpZXdlckltYWdlTG9hZGVkJ10gPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgIGltYWdlWydzcmNBZnRlckZvY3VzJ10gPSAnJ1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAvLyB0d2ljZSwgc2luZ2xlIGxlYWRzIHRvIGRpZmZlcmVudCBzdHJhbmdlIGJyb3dzZXIgYmVoYXZpb3VyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGVyciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb3ZpZGVkTWV0YWRhdGFVcmkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBQcm92aWRlZCBlbmRwb2ludCAnJHt0aGlzLnByb3ZpZGVkTWV0YWRhdGFVcml9JyBkaWQgbm90IHNlcnZlIG1ldGFkYXRhIGNvcnJlY3RseSBvciBpbiB0aGUgZXhwZWN0ZWQgZm9ybWF0LlxuICAgICAgU2VlIGhlcmUgZm9yIG1vcmUgaW5mb3JtYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9CZW5qYW1pbkJyYW5kbWVpZXIvYW5ndWxhcjItaW1hZ2UtZ2FsbGVyeS9ibG9iL21hc3Rlci9kb2NzL2V4dGVybmFsRGF0YVNvdXJjZS5tZCxcbiAgICAgIE9yaWdpbmFsIGVycm9yOiAke2Vycn1gKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRGlkIHlvdSBydW4gdGhlIGNvbnZlcnQgc2NyaXB0IGZyb20gYW5ndWxhcjItaW1hZ2UtZ2FsbGVyeSBmb3IgeW91ciBpbWFnZXMgZmlyc3Q/IE9yaWdpbmFsIGVycm9yOiAke2Vycn1gKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoKSA9PiB1bmRlZmluZWQpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZ2FsbGVyeSA9IFtdXG5cbiAgICAgICAgbGV0IHRlbXBSb3cgPSBbdGhpcy5pbWFnZXNbMF1dXG4gICAgICAgIGxldCBjdXJyZW50Um93SW5kZXggPSAwXG4gICAgICAgIGxldCBpID0gMFxuXG4gICAgICAgIGZvciAoaTsgaSA8IHRoaXMuaW1hZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB3aGlsZSAodGhpcy5pbWFnZXNbaSArIDFdICYmIHRoaXMuc2hvdWxkQWRkQ2FuZGlkYXRlKHRlbXBSb3csIHRoaXMuaW1hZ2VzW2kgKyAxXSkpIHtcbiAgICAgICAgICAgICAgICBpKytcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmltYWdlc1tpICsgMV0pIHtcbiAgICAgICAgICAgICAgICB0ZW1wUm93LnBvcCgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmdhbGxlcnlbY3VycmVudFJvd0luZGV4KytdID0gdGVtcFJvd1xuXG4gICAgICAgICAgICB0ZW1wUm93ID0gW3RoaXMuaW1hZ2VzW2kgKyAxXV1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2NhbGVHYWxsZXJ5KClcbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3VsZEFkZENhbmRpZGF0ZShpbWdSb3c6IEFycmF5PGFueT4sIGNhbmRpZGF0ZTogYW55KTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IG9sZERpZmZlcmVuY2UgPSB0aGlzLmNhbGNJZGVhbEhlaWdodCgpIC0gdGhpcy5jYWxjUm93SGVpZ2h0KGltZ1JvdylcbiAgICAgICAgaW1nUm93LnB1c2goY2FuZGlkYXRlKVxuICAgICAgICBjb25zdCBuZXdEaWZmZXJlbmNlID0gdGhpcy5jYWxjSWRlYWxIZWlnaHQoKSAtIHRoaXMuY2FsY1Jvd0hlaWdodChpbWdSb3cpXG5cbiAgICAgICAgcmV0dXJuIE1hdGguYWJzKG9sZERpZmZlcmVuY2UpID4gTWF0aC5hYnMobmV3RGlmZmVyZW5jZSlcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGNSb3dIZWlnaHQoaW1nUm93OiBBcnJheTxhbnk+KTogbnVtYmVyIHtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxSb3dXaWR0aCA9IHRoaXMuY2FsY09yaWdpbmFsUm93V2lkdGgoaW1nUm93KVxuXG4gICAgICAgIGNvbnN0IHJhdGlvID0gKHRoaXMuZ2V0R2FsbGVyeVdpZHRoKCkgLSAoaW1nUm93Lmxlbmd0aCAtIDEpICogdGhpcy5jYWxjSW1hZ2VNYXJnaW4oKSkgLyBvcmlnaW5hbFJvd1dpZHRoXG4gICAgICAgIGNvbnN0IHJvd0hlaWdodCA9IGltZ1Jvd1swXVt0aGlzLm1pbmltYWxRdWFsaXR5Q2F0ZWdvcnldWydoZWlnaHQnXSAqIHJhdGlvXG5cbiAgICAgICAgcmV0dXJuIHJvd0hlaWdodFxuICAgIH1cblxuICAgIHByaXZhdGUgY2FsY09yaWdpbmFsUm93V2lkdGgoaW1nUm93OiBBcnJheTxhbnk+KTogbnVtYmVyIHtcbiAgICAgICAgbGV0IG9yaWdpbmFsUm93V2lkdGggPSAwXG4gICAgICAgIGltZ1Jvdy5mb3JFYWNoKGltZyA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbmRpdmlkdWFsUmF0aW8gPSB0aGlzLmNhbGNJZGVhbEhlaWdodCgpIC8gaW1nW3RoaXMubWluaW1hbFF1YWxpdHlDYXRlZ29yeV1bJ2hlaWdodCddXG4gICAgICAgICAgICBpbWdbdGhpcy5taW5pbWFsUXVhbGl0eUNhdGVnb3J5XVsnd2lkdGgnXSA9IGltZ1t0aGlzLm1pbmltYWxRdWFsaXR5Q2F0ZWdvcnldWyd3aWR0aCddICogaW5kaXZpZHVhbFJhdGlvXG4gICAgICAgICAgICBpbWdbdGhpcy5taW5pbWFsUXVhbGl0eUNhdGVnb3J5XVsnaGVpZ2h0J10gPSB0aGlzLmNhbGNJZGVhbEhlaWdodCgpXG4gICAgICAgICAgICBvcmlnaW5hbFJvd1dpZHRoICs9IGltZ1t0aGlzLm1pbmltYWxRdWFsaXR5Q2F0ZWdvcnldWyd3aWR0aCddXG4gICAgICAgIH0pXG5cbiAgICAgICAgcmV0dXJuIG9yaWdpbmFsUm93V2lkdGhcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGNJZGVhbEhlaWdodCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRHYWxsZXJ5V2lkdGgoKSAvICg4MCAvIHRoaXMucHJvdmlkZWRJbWFnZVNpemUpICsgMTAwXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRHYWxsZXJ5V2lkdGgoKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKHRoaXMuZ2FsbGVyeUNvbnRhaW5lci5uYXRpdmVFbGVtZW50LmNsaWVudFdpZHRoID09PSAwKSB7XG4gICAgICAgICAgICAvLyBmb3IgSUUxMVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2FsbGVyeUNvbnRhaW5lci5uYXRpdmVFbGVtZW50LnNjcm9sbFdpZHRoXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2FsbGVyeUNvbnRhaW5lci5uYXRpdmVFbGVtZW50LmNsaWVudFdpZHRoXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzY2FsZUdhbGxlcnkoKTogdm9pZCB7XG4gICAgICAgIGxldCBpbWFnZUNvdW50ZXIgPSAwXG4gICAgICAgIGxldCBtYXhpbXVtR2FsbGVyeUltYWdlSGVpZ2h0ID0gMFxuXG4gICAgICAgIHRoaXMuZ2FsbGVyeS5zbGljZSh0aGlzLnJvd0luZGV4LCB0aGlzLnJvd0luZGV4ICsgdGhpcy5yb3dzUGVyUGFnZSlcbiAgICAgICAgICAuZm9yRWFjaChpbWdSb3cgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxSb3dXaWR0aCA9IHRoaXMuY2FsY09yaWdpbmFsUm93V2lkdGgoaW1nUm93KVxuXG4gICAgICAgICAgICBpZiAoaW1nUm93ICE9PSB0aGlzLmdhbGxlcnlbdGhpcy5nYWxsZXJ5Lmxlbmd0aCAtIDFdKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmF0aW8gPSAodGhpcy5nZXRHYWxsZXJ5V2lkdGgoKSAtIChpbWdSb3cubGVuZ3RoIC0gMSkgKiB0aGlzLmNhbGNJbWFnZU1hcmdpbigpKSAvIG9yaWdpbmFsUm93V2lkdGhcblxuICAgICAgICAgICAgICAgIGltZ1Jvdy5mb3JFYWNoKChpbWc6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpbWdbJ3dpZHRoJ10gPSBpbWdbdGhpcy5taW5pbWFsUXVhbGl0eUNhdGVnb3J5XVsnd2lkdGgnXSAqIHJhdGlvXG4gICAgICAgICAgICAgICAgICAgIGltZ1snaGVpZ2h0J10gPSBpbWdbdGhpcy5taW5pbWFsUXVhbGl0eUNhdGVnb3J5XVsnaGVpZ2h0J10gKiByYXRpb1xuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtR2FsbGVyeUltYWdlSGVpZ2h0ID0gTWF0aC5tYXgobWF4aW11bUdhbGxlcnlJbWFnZUhlaWdodCwgaW1nWydoZWlnaHQnXSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja0ZvckFzeW5jTG9hZGluZyhpbWcsIGltYWdlQ291bnRlcisrKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGltZ1Jvdy5mb3JFYWNoKChpbWc6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpbWcud2lkdGggPSBpbWdbdGhpcy5taW5pbWFsUXVhbGl0eUNhdGVnb3J5XVsnd2lkdGgnXVxuICAgICAgICAgICAgICAgICAgICBpbWcuaGVpZ2h0ID0gaW1nW3RoaXMubWluaW1hbFF1YWxpdHlDYXRlZ29yeV1bJ2hlaWdodCddXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW1HYWxsZXJ5SW1hZ2VIZWlnaHQgPSBNYXRoLm1heChtYXhpbXVtR2FsbGVyeUltYWdlSGVpZ2h0LCBpbWdbJ2hlaWdodCddKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrRm9yQXN5bmNMb2FkaW5nKGltZywgaW1hZ2VDb3VudGVyKyspXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICB0aGlzLm1pbmltYWxRdWFsaXR5Q2F0ZWdvcnkgPSBtYXhpbXVtR2FsbGVyeUltYWdlSGVpZ2h0ID4gMzc1ID8gJ3ByZXZpZXdfeHMnIDogJ3ByZXZpZXdfeHhzJ1xuICAgICAgICB0aGlzLnJlZnJlc2hOYXZpZ2F0aW9uRXJyb3JTdGF0ZSgpXG5cbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKClcbiAgICB9XG5cbiAgICBwcml2YXRlIGNoZWNrRm9yQXN5bmNMb2FkaW5nKGltYWdlOiBhbnksIGltYWdlQ291bnRlcjogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGltYWdlRWxlbWVudHMgPSB0aGlzLmltYWdlRWxlbWVudHMudG9BcnJheSgpXG5cbiAgICAgICAgaWYgKGltYWdlWydnYWxsZXJ5SW1hZ2VMb2FkZWQnXSB8fFxuICAgICAgICAgICAgKGltYWdlRWxlbWVudHMubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICBpbWFnZUVsZW1lbnRzW2ltYWdlQ291bnRlcl0gJiZcbiAgICAgICAgICAgICAgdGhpcy5pc1Njcm9sbGVkSW50b1ZpZXcoaW1hZ2VFbGVtZW50c1tpbWFnZUNvdW50ZXJdLm5hdGl2ZUVsZW1lbnQpKSkge1xuICAgICAgICAgICAgaW1hZ2VbJ2dhbGxlcnlJbWFnZUxvYWRlZCddID0gdHJ1ZVxuICAgICAgICAgICAgaW1hZ2VbJ3NyY0FmdGVyRm9jdXMnXSA9IGltYWdlW3RoaXMubWluaW1hbFF1YWxpdHlDYXRlZ29yeV1bJ3BhdGgnXVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW1hZ2VbJ3NyY0FmdGVyRm9jdXMnXSA9ICcnXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGlzU2Nyb2xsZWRJbnRvVmlldyhlbGVtZW50OiBhbnkpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgZWxlbWVudFRvcCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wXG4gICAgICAgIGNvbnN0IGVsZW1lbnRCb3R0b20gPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbVxuXG4gICAgICAgIHJldHVybiBlbGVtZW50VG9wIDwgd2luZG93LmlubmVySGVpZ2h0ICYmIGVsZW1lbnRCb3R0b20gPj0gMCAmJiAoZWxlbWVudEJvdHRvbSA+IDAgfHwgZWxlbWVudFRvcCA+IDApXG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWZyZXNoTmF2aWdhdGlvbkVycm9yU3RhdGUoKTogdm9pZCB7XG4gICAgICAgIHRoaXMubGVmdEFycm93SW5hY3RpdmUgPSB0aGlzLnJvd0luZGV4ID09IDBcbiAgICAgICAgdGhpcy5yaWdodEFycm93SW5hY3RpdmUgPSB0aGlzLnJvd0luZGV4ID4gKHRoaXMuZ2FsbGVyeS5sZW5ndGggLSB0aGlzLnJvd3NQZXJQYWdlKVxuICAgIH1cbn1cbiIsImltcG9ydCB7IEltYWdlU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2ltYWdlLnNlcnZpY2UnXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAYW5ndWxhci9jb3JlJ1xuaW1wb3J0IHsgYW5pbWF0ZSwgc3RhdGUsIHN0eWxlLCB0cmFuc2l0aW9uLCB0cmlnZ2VyIH0gZnJvbSAnQGFuZ3VsYXIvYW5pbWF0aW9ucydcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICd2aWV3ZXInLFxuICAgIHRlbXBsYXRlOiBgPGRpdiBjbGFzcz1cIm91dGVyQ29udGFpbmVyXCIgKHdpbmRvdzpyZXNpemUpPVwib25SZXNpemUoKVwiICpuZ0lmPVwic2hvd1ZpZXdlclwiIFtAc2hvd1ZpZXdlclRyYW5zaXRpb25dPVwic2hvd1ZpZXdlclwiPlxuXG5cbiAgICA8aW1nIFtuZ0NsYXNzXT1cInsnYWN0aXZlQXJyb3cnOiBsZWZ0QXJyb3dBY3RpdmV9XCIgY2xhc3M9XCJhcnJvdyBsZWZ0XCJcbiAgICAgICAgIHNyYz1cImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5Qm9aV2xuYUhROUlqSTBjSGdpSUhabGNuTnBiMjQ5SWpFdU1TSWdkbWxsZDBKdmVEMGlNQ0F3SURJMElESTBJaUIzYVdSMGFEMGlNalJ3ZUNJZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWlCNGJXeHVjenB6YTJWMFkyZzlJbWgwZEhBNkx5OTNkM2N1WW05b1pXMXBZVzVqYjJScGJtY3VZMjl0TDNOclpYUmphQzl1Y3lJZ2VHMXNibk02ZUd4cGJtczlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MekU1T1RrdmVHeHBibXNpUGp4MGFYUnNaUzgrUEdSbGMyTXZQaUFnSUR4bklHWnBiR3c5SW01dmJtVWlJR1pwYkd3dGNuVnNaVDBpWlhabGJtOWtaQ0lnYVdROUltMXBkU0lnYzNSeWIydGxQU0lqTlRVMUlpQnpkSEp2YTJVdGQybGtkR2c5SWpBdU1pSStJQ0FnSUNBOFp5QnBaRDBpUVhKMFltOWhjbVF0TVNJZ2RISmhibk5tYjNKdFBTSjBjbUZ1YzJ4aGRHVW9MVE01TlM0d01EQXdNREFzSUMweE9URXVNREF3TURBd0tTSStQR2NnYVdROUluTnNhV05sSWlCMGNtRnVjMlp2Y20wOUluUnlZVzV6YkdGMFpTZ3lNVFV1TURBd01EQXdMQ0F4TVRrdU1EQXdNREF3S1NJdlBqeHdZWFJvSUNBZ0lDQWdJR1E5SWswek9UWXNNakF5TGpVZ1F6TTVOaXd4T1RZdU1UUTROekkxSURRd01TNHhORGczTWpVc01Ua3hJRFF3Tnk0MUxERTVNU0JETkRFekxqZzFNVEkzTlN3eE9URWdOREU1TERFNU5pNHhORGczTWpVZ05ERTVMREl3TWk0MUlFTTBNVGtzTWpBNExqZzFNVEkzTlNBME1UTXVPRFV4TWpjMUxESXhOQ0EwTURjdU5Td3lNVFFnUXpRd01TNHhORGczTWpVc01qRTBJRE01Tml3eU1EZ3VPRFV4TWpjMUlETTVOaXd5TURJdU5TQmFJRTAwTURndU5qVTJPRFUwTERFNU5pNDRORE14TkRZZ1REUXhNQzR3TnpFd05qZ3NNVGs0TGpJMU56TTFPU0JNTkRBMUxqZ3lPRFF5Tnl3eU1ESXVOU0JNTkRFd0xqQTNNVEEyT0N3eU1EWXVOelF5TmpReElFdzBNRGd1TmpVMk9EVTBMREl3T0M0eE5UWTROVFFnVERRd015d3lNREl1TlNCTU5EQTRMalkxTmpnMU5Dd3hPVFl1T0RRek1UUTJJRm9pSUNBZ0lDQWdJR1pwYkd3OUlpTmhZV0VpSUNBZ0lDQWdJR2xrUFNKamFYSmpiR1V0WW1GamF5MWhjbkp2ZHkxbmJIbHdhQ0l2UGp3dlp6NGdJQ0E4TDJjK0lEd3ZjM1puUGc9PVwiXG4gICAgICAgICBbaGlkZGVuXT1cIiFsZWZ0QXJyb3dWaXNpYmxlXCIgKGNsaWNrKT1cIm5hdmlnYXRlKC0xLCBmYWxzZSlcIi8+XG4gICAgPGltZyBbbmdDbGFzc109XCJ7J2FjdGl2ZUFycm93JzogcmlnaHRBcnJvd0FjdGl2ZX1cIiBjbGFzcz1cImFycm93IHJpZ2h0XCJcbiAgICAgICAgIHNyYz1cImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5Qm9aV2xuYUhROUlqSTBjSGdpSUhabGNuTnBiMjQ5SWpFdU1TSWdkbWxsZDBKdmVEMGlNQ0F3SURJMElESTBJaUIzYVdSMGFEMGlNalJ3ZUNJZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWlCNGJXeHVjenB6YTJWMFkyZzlJbWgwZEhBNkx5OTNkM2N1WW05b1pXMXBZVzVqYjJScGJtY3VZMjl0TDNOclpYUmphQzl1Y3lJZ2VHMXNibk02ZUd4cGJtczlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MekU1T1RrdmVHeHBibXNpUGp4MGFYUnNaUzgrUEdSbGMyTXZQanhrWldaekx6NGdJQ0E4WnlCbWFXeHNQU0p1YjI1bElpQm1hV3hzTFhKMWJHVTlJbVYyWlc1dlpHUWlJR2xrUFNKdGFYVWlJSE4wY205clpUMGlJelUxTlNJZ2MzUnliMnRsTFhkcFpIUm9QU0l3TGpJaVBpQWdJQ0FnUEdjZ2FXUTlJa0Z5ZEdKdllYSmtMVEVpSUhSeVlXNXpabTl5YlQwaWRISmhibk5zWVhSbEtDMDBOamN1TURBd01EQXdMQ0F0TVRreExqQXdNREF3TUNraVBqeG5JR2xrUFNKemJHbGpaU0lnZEhKaGJuTm1iM0p0UFNKMGNtRnVjMnhoZEdVb01qRTFMakF3TURBd01Dd2dNVEU1TGpBd01EQXdNQ2tpTHo0OGNHRjBhQ0FnSUNBZ0lDQmtQU0pOTkRZNExESXdNaTQxSUVNME5qZ3NNVGsyTGpFME9EY3lOU0EwTnpNdU1UUTROekkxTERFNU1TQTBOemt1TlN3eE9URWdRelE0TlM0NE5URXlOelVzTVRreElEUTVNU3d4T1RZdU1UUTROekkxSURRNU1Td3lNREl1TlNCRE5Ea3hMREl3T0M0NE5URXlOelVnTkRnMUxqZzFNVEkzTlN3eU1UUWdORGM1TGpVc01qRTBJRU0wTnpNdU1UUTROekkxTERJeE5DQTBOamdzTWpBNExqZzFNVEkzTlNBME5qZ3NNakF5TGpVZ1dpQk5ORGd3TGpZMU5qZzFOQ3d4T1RZdU9EUXpNVFEySUV3ME9ESXVNRGN4TURZNExERTVPQzR5TlRjek5Ua2dURFEzTnk0NE1qZzBNamNzTWpBeUxqVWdURFE0TWk0d056RXdOamdzTWpBMkxqYzBNalkwTVNCTU5EZ3dMalkxTmpnMU5Dd3lNRGd1TVRVMk9EVTBJRXcwTnpVc01qQXlMalVnVERRNE1DNDJOVFk0TlRRc01UazJMamcwTXpFME5pQmFJaUFnSUNBZ0lDQm1hV3hzUFNJallXRmhJaUFnSUNBZ0lDQnBaRDBpWTJseVkyeGxMVzVsZUhRdFlYSnliM2N0WkdselkyeHZjM1Z5WlMxbmJIbHdhQ0lnSUNBZ0lDQWdkSEpoYm5ObWIzSnRQU0owY21GdWMyeGhkR1VvTkRjNUxqVXdNREF3TUN3Z01qQXlMalV3TURBd01Da2djMk5oYkdVb0xURXNJREVwSUhSeVlXNXpiR0YwWlNndE5EYzVMalV3TURBd01Dd2dMVEl3TWk0MU1EQXdNREFwSUNJdlBqd3ZaejRnSUNBOEwyYytJRHd2YzNablBnPT1cIlxuICAgICAgICAgW2hpZGRlbl09XCIhcmlnaHRBcnJvd1Zpc2libGVcIiAoY2xpY2spPVwibmF2aWdhdGUoMSwgZmFsc2UpXCIvPlxuXG4gICAgPGRpdiBjbGFzcz1cImJ1dHRvbkNvbnRhaW5lclwiPlxuICAgICAgICA8aW1nIGNsYXNzPVwiYWN0aW9uIGNsb3NlXCJcbiAgICAgICAgICAgICBzcmM9XCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUJvWldsbmFIUTlJak13Y0hnaUlHbGtQU0pNWVhsbGNsOHhJaUJ6ZEhsc1pUMGlaVzVoWW14bExXSmhZMnRuY205MWJtUTZibVYzSURBZ01DQTFNVElnTlRFeU95SWdkbVZ5YzJsdmJqMGlNUzR4SWlCbWFXeHNQU0lqWVdGaElpQjJhV1YzUW05NFBTSXdJREFnTlRFeUlEVXhNaUlnZDJsa2RHZzlJakkwY0hnaUlIaHRiRHB6Y0dGalpUMGljSEpsYzJWeWRtVWlJSGh0Ykc1elBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5SWdlRzFzYm5NNmVHeHBibXM5SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpFNU9Ua3ZlR3hwYm1zaVBpQWdQSEJoZEdnZ0lDQWdjM1J5YjJ0bExYZHBaSFJvUFNJek1DSWdjM1J5YjJ0bFBTSWpORFEwSWlBZ0lDQmtQU0pOTkRNM0xqVXNNemcyTGpaTU16QTJMamtzTWpVMmJERXpNQzQyTFRFek1DNDJZekUwTGpFdE1UUXVNU3d4TkM0eExUTTJMamdzTUMwMU1DNDVZeTB4TkM0eExURTBMakV0TXpZdU9DMHhOQzR4TFRVd0xqa3NNRXd5TlRZc01qQTFMakZNTVRJMUxqUXNOelF1TlNBZ1l5MHhOQzR4TFRFMExqRXRNell1T0MweE5DNHhMVFV3TGprc01HTXRNVFF1TVN3eE5DNHhMVEUwTGpFc016WXVPQ3d3TERVd0xqbE1NakExTGpFc01qVTJURGMwTGpVc016ZzJMalpqTFRFMExqRXNNVFF1TVMweE5DNHhMRE0yTGpnc01DdzFNQzQ1SUNCak1UUXVNU3d4TkM0eExETTJMamdzTVRRdU1TdzFNQzQ1TERCTU1qVTJMRE13Tmk0NWJERXpNQzQyTERFek1DNDJZekUwTGpFc01UUXVNU3d6Tmk0NExERTBMakVzTlRBdU9Td3dRelExTVM0MUxEUXlNeTQwTERRMU1TNDFMRFF3TUM0MkxEUXpOeTQxTERNNE5pNDJlaUl2UGp3dmMzWm5QZz09XCJcbiAgICAgICAgICAgICAoY2xpY2spPVwiY2xvc2VWaWV3ZXIoKVwiLz5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJpbWFnZUNvbnRhaW5lclwiXG4gICAgICAgICAoY2xpY2spPVwic2hvd05hdmlnYXRpb25BcnJvd3MoKVwiXG4gICAgICAgICAoc3dpcGVsZWZ0KT1cIm5hdmlnYXRlKDEsICRldmVudClcIlxuICAgICAgICAgKHN3aXBlcmlnaHQpPVwibmF2aWdhdGUoLTEsICRldmVudClcIlxuICAgICAgICAgKHBhbik9XCJwYW4oJGV2ZW50KVwiPlxuXG4gICAgICAgIDxkaXYgKm5nRm9yPSdsZXQgaW1nIG9mIGltYWdlczsgbGV0IGogPSBpbmRleCdcbiAgICAgICAgICAgICBjbGFzcz1cImltYWdlXCJcbiAgICAgICAgICAgICBbY2xhc3MuYWN0aXZlXT1cImltZ1snYWN0aXZlJ11cIlxuICAgICAgICAgICAgIFtzdHlsZS5iYWNrZ3JvdW5kLWltYWdlXT1cImltZ1sndmlld2VySW1hZ2VMb2FkZWQnXSA/ICd1cmwoJytpbWdbY2F0ZWdvcnlTZWxlY3RlZF1bJ3BhdGgnXSsnKScgOiBtYXRoLmFicyhjdXJyZW50SWR4LWopIDw9MSA/ICd1cmwoJytpbWdbJ3ByZXZpZXdfeHhzJ11bJ3BhdGgnXSsnKScgOiAnJ1wiXG4gICAgICAgICAgICAgW3N0eWxlLmxlZnRdPVwidHJhbnNmb3JtKydweCdcIlxuICAgICAgICAgICAgIFtAaW1hZ2VUcmFuc2l0aW9uXT1cImltZ1sndHJhbnNpdGlvbiddXCI+PC9kaXY+XG5cbiAgICAgICAgPGltZyAqbmdGb3I9J2xldCBpbWcgb2YgaW1hZ2VzOyBsZXQgaiA9IGluZGV4J1xuICAgICAgICAgICAgIGNsYXNzPVwicHJlbG9hZGluZy1pbWFnZVwiXG4gICAgICAgICAgICAgKGxvYWQpPVwiaW1hZ2VMb2FkZWQoaW1nKVwiXG4gICAgICAgICAgICAgc3JjPVwie3sgbWF0aC5hYnMoY3VycmVudElkeC1qKSA8PTEgPyBpbWdbY2F0ZWdvcnlTZWxlY3RlZF1bJ3BhdGgnXSA6ICcnfX1cIi8+XG4gICAgPC9kaXY+XG48L2Rpdj5cblxuYCxcbiAgICBzdHlsZXM6IFtgLm91dGVyQ29udGFpbmVye3RvcDowO2JvdHRvbTowO2xlZnQ6MDtyaWdodDowO2hlaWdodDoxMDAlO3dpZHRoOjEwMCU7cG9zaXRpb246Zml4ZWQ7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC45NSk7Zm9udC1mYW1pbHk6c2Fucy1zZXJpZjt6LWluZGV4OjEwMzF9LmltYWdlQ29udGFpbmVye3Bvc2l0aW9uOmFic29sdXRlO2Zsb2F0Om5vbmU7dG9wOjA7Ym90dG9tOjA7bGVmdDowO3JpZ2h0OjB9LmltYWdlQ29udGFpbmVyIC5pbWFnZSwuaW1hZ2VDb250YWluZXIgLnByZWxvYWRpbmctaW1hZ2V7dmlzaWJpbGl0eTpoaWRkZW59LmltYWdlQ29udGFpbmVyIC5pbWFnZS5hY3RpdmV7cG9zaXRpb246YWJzb2x1dGU7dmlzaWJpbGl0eTp2aXNpYmxlO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXNpemU6Y29udGFpbjtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlcjttYXJnaW46YXV0bztsZWZ0OjA7cmlnaHQ6MDt0b3A6MDtib3R0b206MDtoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO29wYWNpdHk6MX0uYXJyb3d7b3BhY2l0eTowfS5hcnJvdzpob3ZlcntjdXJzb3I6cG9pbnRlcn0ub3V0ZXJDb250YWluZXI6aG92ZXIgLmFycm93LmFjdGl2ZUFycm93e2hlaWdodDpjYWxjKDIwcHggKyAxLjV2dyk7cG9zaXRpb246YWJzb2x1dGU7dG9wOmNhbGMoNTAlIC0gKDIwcHggKyAxLjV2dykvIDIpO2JvdHRvbTo1MCU7ei1pbmRleDoxO29wYWNpdHk6MTt0cmFuc2l0aW9uOmFsbCBlYXNlLW91dCAuNXN9LmFycm93LmxlZnR7bGVmdDoydnd9LmFycm93LnJpZ2h0e3JpZ2h0OjJ2d30uYXJyb3c6bm90KC5hY3RpdmVBcnJvdyk6aG92ZXJ7b3BhY2l0eTowO2N1cnNvcjpwb2ludGVyO3RyYW5zaXRpb246YWxsIGVhc2Utb3V0IC41c30uYnV0dG9uQ29udGFpbmVye3Bvc2l0aW9uOmFic29sdXRlO3RvcDoyMHB4O3JpZ2h0OjIwcHg7aGVpZ2h0OjIwcHg7dGV4dC1hbGlnbjpjZW50ZXI7b3BhY2l0eToxO3otaW5kZXg6MjAwO3RyYW5zaXRpb246YWxsIGVhc2Utb3V0IC41c30uYnV0dG9uQ29udGFpbmVyIC5hY3Rpb257aGVpZ2h0OjEwMCU7Y3Vyc29yOnBvaW50ZXI7dmVydGljYWwtYWxpZ246dG9wfS5idXR0b25Db250YWluZXIgLmFjdGlvbjpmb2N1c3tvdXRsaW5lOjB9LmJ1dHRvbkNvbnRhaW5lciAuYWN0aW9uOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzIyMjt0cmFuc2l0aW9uOmFsbCBlYXNlLW91dCAuM3N9LmJ1dHRvbkNvbnRhaW5lciAuYWN0aW9uLmNsb3Nle3dpZHRoOjI2cHg7aGVpZ2h0OjI2cHh9bWQtYnV0dG9uLXRvZ2dsZS5jaGVja2Vke2JhY2tncm91bmQtY29sb3I6I2EwYTBhMH0ubWVudUJ1dHRvbntwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206MjBweDtyaWdodDoyMHB4O3RleHQtYWxpZ246Y2VudGVyO29wYWNpdHk6MTt6LWluZGV4OjIwMDt0cmFuc2l0aW9uOmFsbCBlYXNlLW91dCAuNXN9QGZvbnQtZmFjZXtmb250LWZhbWlseTonTWF0ZXJpYWwgSWNvbnMnO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtd2VpZ2h0OjQwMDtzcmM6bG9jYWwoJ01hdGVyaWFsIEljb25zJyksbG9jYWwoJ01hdGVyaWFsSWNvbnMtUmVndWxhcicpLHVybChodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tL3MvbWF0ZXJpYWxpY29ucy92MTkvMmZjcllGTmFUamNTNmc0VTN0LVk1WmpaalQ1RmRFSjE0MFUyREpZQzNtWS53b2ZmMikgZm9ybWF0KCd3b2ZmMicpfS5tYXRlcmlhbC1pY29uc3tmb250LWZhbWlseTonTWF0ZXJpYWwgSWNvbnMnO2ZvbnQtd2VpZ2h0OjQwMDtmb250LXN0eWxlOm5vcm1hbDtmb250LXNpemU6MjRweDtsaW5lLWhlaWdodDoxO2xldHRlci1zcGFjaW5nOm5vcm1hbDt0ZXh0LXRyYW5zZm9ybTpub25lO2Rpc3BsYXk6aW5saW5lLWJsb2NrO3doaXRlLXNwYWNlOm5vd3JhcDt3b3JkLXdyYXA6bm9ybWFsO2RpcmVjdGlvbjpsdHI7LXdlYmtpdC1mb250LWZlYXR1cmUtc2V0dGluZ3M6J2xpZ2EnOy13ZWJraXQtZm9udC1zbW9vdGhpbmc6YW50aWFsaWFzZWR9YF0sXG4gICAgaG9zdDoge1xuICAgICAgICAnKGRvY3VtZW50OmtleWRvd24pJzogJ29uS2V5ZG93bigkZXZlbnQpJ1xuICAgIH0sXG4gICAgYW5pbWF0aW9uczogW1xuICAgICAgICB0cmlnZ2VyKCdpbWFnZVRyYW5zaXRpb24nLCBbXG4gICAgICAgICAgICBzdGF0ZSgnZW50ZXJGcm9tUmlnaHQnLCBzdHlsZSh7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUoMHB4LCAwcHgpJ1xuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgc3RhdGUoJ2VudGVyRnJvbUxlZnQnLCBzdHlsZSh7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUoMHB4LCAwcHgpJ1xuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgc3RhdGUoJ2xlYXZlVG9MZWZ0Jywgc3R5bGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlKC0xMDBweCwgMHB4KSdcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgIHN0YXRlKCdsZWF2ZVRvUmlnaHQnLCBzdHlsZSh7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUoMTAwcHgsIDBweCknXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgICB0cmFuc2l0aW9uKCcqID0+IGVudGVyRnJvbVJpZ2h0JywgW1xuICAgICAgICAgICAgICAgIHN0eWxlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlKDMwcHgsIDBweCknXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgYW5pbWF0ZSgnMjUwbXMgNTAwbXMgZWFzZS1pbicpXG4gICAgICAgICAgICBdKSxcbiAgICAgICAgICAgIHRyYW5zaXRpb24oJyogPT4gZW50ZXJGcm9tTGVmdCcsIFtcbiAgICAgICAgICAgICAgICBzdHlsZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgtMzBweCwgMHB4KSdcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBhbmltYXRlKCcyNTBtcyA1MDBtcyBlYXNlLWluJylcbiAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgdHJhbnNpdGlvbignKiA9PiBsZWF2ZVRvTGVmdCcsIFtcbiAgICAgICAgICAgICAgICBzdHlsZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBhbmltYXRlKCcyNTBtcyBlYXNlLW91dCcpXVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHRyYW5zaXRpb24oJyogPT4gbGVhdmVUb1JpZ2h0JywgW1xuICAgICAgICAgICAgICAgIHN0eWxlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGFuaW1hdGUoJzI1MG1zIGVhc2Utb3V0JyldXG4gICAgICAgICAgICApXG4gICAgICAgIF0pLFxuICAgICAgICB0cmlnZ2VyKCdzaG93Vmlld2VyVHJhbnNpdGlvbicsIFtcbiAgICAgICAgICAgIHN0YXRlKCd0cnVlJywgc3R5bGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgIHN0YXRlKCd2b2lkJywgc3R5bGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgIHRyYW5zaXRpb24oJ3ZvaWQgPT4gKicsIFtcbiAgICAgICAgICAgICAgICBzdHlsZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBhbmltYXRlKCcxMDAwbXMgZWFzZS1pbicpXVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHRyYW5zaXRpb24oJyogPT4gdm9pZCcsIFtcbiAgICAgICAgICAgICAgICBzdHlsZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBhbmltYXRlKCc1MDBtcyBlYXNlLW91dCcpXVxuICAgICAgICAgICAgKVxuICAgICAgICBdKVxuICAgIF1cbn0pXG5cbmV4cG9ydCBjbGFzcyBWaWV3ZXJDb21wb25lbnQge1xuICAgIHNob3dWaWV3ZXI6IGJvb2xlYW5cbiAgICBpbWFnZXM6IEFycmF5PGFueT4gPSBbe31dXG4gICAgY3VycmVudElkeDogbnVtYmVyID0gMFxuICAgIGxlZnRBcnJvd1Zpc2libGU6IGJvb2xlYW4gPSB0cnVlXG4gICAgcmlnaHRBcnJvd1Zpc2libGU6IGJvb2xlYW4gPSB0cnVlXG4gICAgY2F0ZWdvcnlTZWxlY3RlZDogc3RyaW5nID0gJ3ByZXZpZXdfeHhzJ1xuICAgIHRyYW5zZm9ybTogbnVtYmVyXG4gICAgbWF0aDogTWF0aFxuICAgIHByaXZhdGUgcXVhbGl0eVNlbGVjdG9yU2hvd246IGJvb2xlYW4gPSBmYWxzZVxuICAgIHByaXZhdGUgcXVhbGl0eVNlbGVjdGVkOiBzdHJpbmcgPSAnYXV0bydcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgaW1hZ2VTZXJ2aWNlOiBJbWFnZVNlcnZpY2UpIHtcbiAgICAgICAgaW1hZ2VTZXJ2aWNlLmltYWdlc1VwZGF0ZWQkLnN1YnNjcmliZShcbiAgICAgICAgICAgIGltYWdlcyA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZXMgPSBpbWFnZXNcbiAgICAgICAgICAgIH0pXG4gICAgICAgIGltYWdlU2VydmljZS5pbWFnZVNlbGVjdGVkSW5kZXhVcGRhdGVkJC5zdWJzY3JpYmUoXG4gICAgICAgICAgICBuZXdJbmRleCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50SWR4ID0gbmV3SW5kZXhcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlcy5mb3JFYWNoKGltYWdlID0+IGltYWdlWydhY3RpdmUnXSA9IGZhbHNlKVxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ2FjdGl2ZSddID0gdHJ1ZVxuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtID0gMFxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUXVhbGl0eSgpXG4gICAgICAgICAgICB9KVxuICAgICAgICBpbWFnZVNlcnZpY2Uuc2hvd0ltYWdlVmlld2VyQ2hhbmdlZCQuc3Vic2NyaWJlKFxuICAgICAgICAgICAgc2hvd1ZpZXdlciA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93Vmlld2VyID0gc2hvd1ZpZXdlclxuICAgICAgICAgICAgfSlcbiAgICAgICAgdGhpcy5tYXRoID0gTWF0aFxuICAgIH1cblxuICAgIGdldCBsZWZ0QXJyb3dBY3RpdmUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRJZHggPiAwXG4gICAgfVxuXG4gICAgZ2V0IHJpZ2h0QXJyb3dBY3RpdmUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRJZHggPCB0aGlzLmltYWdlcy5sZW5ndGggLSAxXG4gICAgfVxuXG4gICAgcGFuKHN3aXBlOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSBzd2lwZS5kZWx0YVhcbiAgICB9XG5cbiAgICBvblJlc2l6ZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5pbWFnZXMuZm9yRWFjaChpbWFnZSA9PiB7XG4gICAgICAgICAgICBpbWFnZVsndmlld2VySW1hZ2VMb2FkZWQnXSA9IGZhbHNlXG4gICAgICAgICAgICBpbWFnZVsnYWN0aXZlJ10gPSBmYWxzZVxuICAgICAgICB9KVxuICAgICAgICB0aGlzLnVwZGF0ZUltYWdlKClcbiAgICB9XG5cbiAgICBzaG93UXVhbGl0eVNlbGVjdG9yKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnF1YWxpdHlTZWxlY3RvclNob3duID0gIXRoaXMucXVhbGl0eVNlbGVjdG9yU2hvd25cbiAgICB9XG5cbiAgICBxdWFsaXR5Q2hhbmdlZChuZXdRdWFsaXR5OiBhbnkpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5xdWFsaXR5U2VsZWN0ZWQgPSBuZXdRdWFsaXR5XG4gICAgICAgIHRoaXMudXBkYXRlSW1hZ2UoKVxuICAgIH1cblxuICAgIGltYWdlTG9hZGVkKGltYWdlOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgaW1hZ2VbJ3ZpZXdlckltYWdlTG9hZGVkJ10gPSB0cnVlXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZGlyZWN0aW9uICgtMTogbGVmdCwgMTogcmlnaHQpXG4gICAgICogc3dpcGUgKHVzZXIgc3dpcGVkKVxuICAgICAqL1xuICAgIG5hdmlnYXRlKGRpcmVjdGlvbjogbnVtYmVyLCBzd2lwZTogYW55KTogdm9pZCB7XG4gICAgICAgIGlmICgoZGlyZWN0aW9uID09PSAxICYmIHRoaXMuY3VycmVudElkeCA8IHRoaXMuaW1hZ2VzLmxlbmd0aCAtIDEpIHx8XG4gICAgICAgICAgICAoZGlyZWN0aW9uID09PSAtMSAmJiB0aGlzLmN1cnJlbnRJZHggPiAwKSkge1xuXG4gICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XVsndHJhbnNpdGlvbiddID0gJ2xlYXZlVG9SaWdodCdcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHggLSAxXVsndHJhbnNpdGlvbiddID0gJ2VudGVyRnJvbUxlZnQnXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ3RyYW5zaXRpb24nXSA9ICdsZWF2ZVRvTGVmdCdcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHggKyAxXVsndHJhbnNpdGlvbiddID0gJ2VudGVyRnJvbVJpZ2h0J1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jdXJyZW50SWR4ICs9IGRpcmVjdGlvblxuXG4gICAgICAgICAgICBpZiAoc3dpcGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVOYXZpZ2F0aW9uQXJyb3dzKClcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93TmF2aWdhdGlvbkFycm93cygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUltYWdlKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNob3dOYXZpZ2F0aW9uQXJyb3dzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmxlZnRBcnJvd1Zpc2libGUgPSB0cnVlXG4gICAgICAgIHRoaXMucmlnaHRBcnJvd1Zpc2libGUgPSB0cnVlXG4gICAgfVxuXG4gICAgY2xvc2VWaWV3ZXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaW1hZ2VzLmZvckVhY2goaW1hZ2UgPT4gaW1hZ2VbJ3RyYW5zaXRpb24nXSA9IHVuZGVmaW5lZClcbiAgICAgICAgdGhpcy5pbWFnZXMuZm9yRWFjaChpbWFnZSA9PiBpbWFnZVsnYWN0aXZlJ10gPSBmYWxzZSlcbiAgICAgICAgdGhpcy5pbWFnZVNlcnZpY2Uuc2hvd0ltYWdlVmlld2VyKGZhbHNlKVxuICAgIH1cblxuICAgIG9uS2V5ZG93bihldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgICAgICBjb25zdCBwcmV2ZW50ID0gWzM3LCAzOSwgMjcsIDM2LCAzNV1cbiAgICAgICAgICAgIC5maW5kKG5vID0+IG5vID09PSBldmVudC5rZXlDb2RlKVxuICAgICAgICBpZiAocHJldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICB9XG5cbiAgICAgICAgc3dpdGNoIChwcmV2ZW50KSB7XG4gICAgICAgICAgICBjYXNlIDM3OlxuICAgICAgICAgICAgICAgIC8vIG5hdmlnYXRlIGxlZnRcbiAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRlKC0xLCBmYWxzZSlcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAzOTpcbiAgICAgICAgICAgICAgICAvLyBuYXZpZ2F0ZSByaWdodFxuICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGUoMSwgZmFsc2UpXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgMjc6XG4gICAgICAgICAgICAgICAgLy8gZXNjXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVZpZXdlcigpXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgMzY6XG4gICAgICAgICAgICAgICAgLy8gcG9zIDFcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWyd0cmFuc2l0aW9uJ10gPSAnbGVhdmVUb1JpZ2h0J1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudElkeCA9IDBcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWyd0cmFuc2l0aW9uJ10gPSAnZW50ZXJGcm9tTGVmdCdcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUltYWdlKClcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAzNTpcbiAgICAgICAgICAgICAgICAvLyBlbmRcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWyd0cmFuc2l0aW9uJ10gPSAnbGVhdmVUb0xlZnQnXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50SWR4ID0gdGhpcy5pbWFnZXMubGVuZ3RoIC0gMVxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ3RyYW5zaXRpb24nXSA9ICdlbnRlckZyb21SaWdodCdcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUltYWdlKClcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoaWRlTmF2aWdhdGlvbkFycm93cygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5sZWZ0QXJyb3dWaXNpYmxlID0gZmFsc2VcbiAgICAgICAgdGhpcy5yaWdodEFycm93VmlzaWJsZSA9IGZhbHNlXG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVJbWFnZSgpOiB2b2lkIHtcbiAgICAgICAgLy8gd2FpdCBmb3IgYW5pbWF0aW9uIHRvIGVuZFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUXVhbGl0eSgpXG4gICAgICAgICAgICB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWydhY3RpdmUnXSA9IHRydWVcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VzLmZvckVhY2goaW1hZ2UgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpbWFnZSAhPSB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdKSB7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlWydhY3RpdmUnXSA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtID0gMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sIDUwMClcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZVF1YWxpdHkoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHNjcmVlbldpZHRoID0gd2luZG93LmlubmVyV2lkdGhcbiAgICAgICAgY29uc3Qgc2NyZWVuSGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0XG5cbiAgICAgICAgc3dpdGNoICh0aGlzLnF1YWxpdHlTZWxlY3RlZCkge1xuICAgICAgICAgICAgY2FzZSAnYXV0byc6IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhdGVnb3J5U2VsZWN0ZWQgPSAncHJldmlld194eHMnXG5cbiAgICAgICAgICAgICAgICBpZiAoc2NyZWVuV2lkdGggPiB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWydwcmV2aWV3X3h4cyddLndpZHRoICYmXG4gICAgICAgICAgICAgICAgICAgIHNjcmVlbkhlaWdodCA+IHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ3ByZXZpZXdfeHhzJ10uaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlTZWxlY3RlZCA9ICdwcmV2aWV3X3hzJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2NyZWVuV2lkdGggPiB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWydwcmV2aWV3X3hzJ10ud2lkdGggJiZcbiAgICAgICAgICAgICAgICAgICAgc2NyZWVuSGVpZ2h0ID4gdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XVsncHJldmlld194cyddLmhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhdGVnb3J5U2VsZWN0ZWQgPSAncHJldmlld19zJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2NyZWVuV2lkdGggPiB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWydwcmV2aWV3X3MnXS53aWR0aCAmJlxuICAgICAgICAgICAgICAgICAgICBzY3JlZW5IZWlnaHQgPiB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWydwcmV2aWV3X3MnXS5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeVNlbGVjdGVkID0gJ3ByZXZpZXdfbSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNjcmVlbldpZHRoID4gdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XVsncHJldmlld19tJ10ud2lkdGggJiZcbiAgICAgICAgICAgICAgICAgICAgc2NyZWVuSGVpZ2h0ID4gdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XVsncHJldmlld19tJ10uaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlTZWxlY3RlZCA9ICdwcmV2aWV3X2wnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzY3JlZW5XaWR0aCA+IHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ3ByZXZpZXdfbCddLndpZHRoICYmXG4gICAgICAgICAgICAgICAgICAgIHNjcmVlbkhlaWdodCA+IHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ3ByZXZpZXdfbCddLmhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhdGVnb3J5U2VsZWN0ZWQgPSAncHJldmlld194bCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNjcmVlbldpZHRoID4gdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XVsncHJldmlld194bCddLndpZHRoICYmXG4gICAgICAgICAgICAgICAgICAgIHNjcmVlbkhlaWdodCA+IHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ3ByZXZpZXdfeGwnXS5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeVNlbGVjdGVkID0gJ3JhdydcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2xvdyc6IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhdGVnb3J5U2VsZWN0ZWQgPSAncHJldmlld194eHMnXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ21pZCc6IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhdGVnb3J5U2VsZWN0ZWQgPSAncHJldmlld19tJ1xuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdoaWdoJzoge1xuICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlTZWxlY3RlZCA9ICdyYXcnXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeVNlbGVjdGVkID0gJ3ByZXZpZXdfbSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSdcbmltcG9ydCB7IEltYWdlU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvaW1hZ2Uuc2VydmljZSdcbmltcG9ydCB7IEdhbGxlcnlDb21wb25lbnQgfSBmcm9tICcuL2dhbGxlcnkvZ2FsbGVyeS5jb21wb25lbnQnXG5pbXBvcnQgeyBWaWV3ZXJDb21wb25lbnQgfSBmcm9tICcuL3ZpZXdlci92aWV3ZXIuY29tcG9uZW50J1xuaW1wb3J0IHsgRm9ybXNNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9mb3JtcydcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbidcbmltcG9ydCB7IEJyb3dzZXJBbmltYXRpb25zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlci9hbmltYXRpb25zJ1xuaW1wb3J0IHsgSHR0cENsaWVudE1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJ1xuXG5ATmdNb2R1bGUoe1xuICBpbXBvcnRzOiBbXG4gICAgQ29tbW9uTW9kdWxlLFxuICAgIEZvcm1zTW9kdWxlLFxuICAgIEh0dHBDbGllbnRNb2R1bGUsXG4gICAgQnJvd3NlckFuaW1hdGlvbnNNb2R1bGVcbiAgXSxcbiAgZGVjbGFyYXRpb25zOiBbXG4gICAgR2FsbGVyeUNvbXBvbmVudCxcbiAgICBWaWV3ZXJDb21wb25lbnRcbiAgXSxcbiAgcHJvdmlkZXJzOiBbXG4gICAgSW1hZ2VTZXJ2aWNlXG4gIF0sXG4gIGV4cG9ydHM6IFtcbiAgICBHYWxsZXJ5Q29tcG9uZW50LFxuICAgIFZpZXdlckNvbXBvbmVudFxuICBdXG59KVxuZXhwb3J0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