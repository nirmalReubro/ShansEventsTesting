/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { ImageService } from '../services/image.service';
import { Component } from '@angular/core';
import { animate, state, style, transition, trigger } from '@angular/animations';
export class ViewerComponent {
    /**
     * @param {?} imageService
     */
    constructor(imageService) {
        this.imageService = imageService;
        this.images = [{}];
        this.currentIdx = 0;
        this.leftArrowVisible = true;
        this.rightArrowVisible = true;
        this.categorySelected = 'preview_xxs';
        this.qualitySelectorShown = false;
        this.qualitySelected = 'auto';
        imageService.imagesUpdated$.subscribe(images => {
            this.images = images;
        });
        imageService.imageSelectedIndexUpdated$.subscribe(newIndex => {
            this.currentIdx = newIndex;
            this.images.forEach(image => image['active'] = false);
            this.images[this.currentIdx]['active'] = true;
            this.transform = 0;
            this.updateQuality();
        });
        imageService.showImageViewerChanged$.subscribe(showViewer => {
            this.showViewer = showViewer;
        });
        this.math = Math;
    }
    /**
     * @return {?}
     */
    get leftArrowActive() {
        return this.currentIdx > 0;
    }
    /**
     * @return {?}
     */
    get rightArrowActive() {
        return this.currentIdx < this.images.length - 1;
    }
    /**
     * @param {?} swipe
     * @return {?}
     */
    pan(swipe) {
        this.transform = swipe.deltaX;
    }
    /**
     * @return {?}
     */
    onResize() {
        this.images.forEach(image => {
            image['viewerImageLoaded'] = false;
            image['active'] = false;
        });
        this.updateImage();
    }
    /**
     * @return {?}
     */
    showQualitySelector() {
        this.qualitySelectorShown = !this.qualitySelectorShown;
    }
    /**
     * @param {?} newQuality
     * @return {?}
     */
    qualityChanged(newQuality) {
        this.qualitySelected = newQuality;
        this.updateImage();
    }
    /**
     * @param {?} image
     * @return {?}
     */
    imageLoaded(image) {
        image['viewerImageLoaded'] = true;
    }
    /**
     * direction (-1: left, 1: right)
     * swipe (user swiped)
     * @param {?} direction
     * @param {?} swipe
     * @return {?}
     */
    navigate(direction, swipe) {
        if ((direction === 1 && this.currentIdx < this.images.length - 1) ||
            (direction === -1 && this.currentIdx > 0)) {
            if (direction == -1) {
                this.images[this.currentIdx]['transition'] = 'leaveToRight';
                this.images[this.currentIdx - 1]['transition'] = 'enterFromLeft';
            }
            else {
                this.images[this.currentIdx]['transition'] = 'leaveToLeft';
                this.images[this.currentIdx + 1]['transition'] = 'enterFromRight';
            }
            this.currentIdx += direction;
            if (swipe) {
                this.hideNavigationArrows();
            }
            else {
                this.showNavigationArrows();
            }
            this.updateImage();
        }
    }
    /**
     * @return {?}
     */
    showNavigationArrows() {
        this.leftArrowVisible = true;
        this.rightArrowVisible = true;
    }
    /**
     * @return {?}
     */
    closeViewer() {
        this.images.forEach(image => image['transition'] = undefined);
        this.images.forEach(image => image['active'] = false);
        this.imageService.showImageViewer(false);
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onKeydown(event) {
        const /** @type {?} */ prevent = [37, 39, 27, 36, 35]
            .find(no => no === event.keyCode);
        if (prevent) {
            event.preventDefault();
        }
        switch (prevent) {
            case 37:
                // navigate left
                this.navigate(-1, false);
                break;
            case 39:
                // navigate right
                this.navigate(1, false);
                break;
            case 27:
                // esc
                this.closeViewer();
                break;
            case 36:
                // pos 1
                this.images[this.currentIdx]['transition'] = 'leaveToRight';
                this.currentIdx = 0;
                this.images[this.currentIdx]['transition'] = 'enterFromLeft';
                this.updateImage();
                break;
            case 35:
                // end
                this.images[this.currentIdx]['transition'] = 'leaveToLeft';
                this.currentIdx = this.images.length - 1;
                this.images[this.currentIdx]['transition'] = 'enterFromRight';
                this.updateImage();
                break;
            default:
                break;
        }
    }
    /**
     * @return {?}
     */
    hideNavigationArrows() {
        this.leftArrowVisible = false;
        this.rightArrowVisible = false;
    }
    /**
     * @return {?}
     */
    updateImage() {
        // wait for animation to end
        setTimeout(() => {
            this.updateQuality();
            this.images[this.currentIdx]['active'] = true;
            this.images.forEach(image => {
                if (image != this.images[this.currentIdx]) {
                    image['active'] = false;
                    this.transform = 0;
                }
            });
        }, 500);
    }
    /**
     * @return {?}
     */
    updateQuality() {
        const /** @type {?} */ screenWidth = window.innerWidth;
        const /** @type {?} */ screenHeight = window.innerHeight;
        switch (this.qualitySelected) {
            case 'auto': {
                this.categorySelected = 'preview_xxs';
                if (screenWidth > this.images[this.currentIdx]['preview_xxs'].width &&
                    screenHeight > this.images[this.currentIdx]['preview_xxs'].height) {
                    this.categorySelected = 'preview_xs';
                }
                if (screenWidth > this.images[this.currentIdx]['preview_xs'].width &&
                    screenHeight > this.images[this.currentIdx]['preview_xs'].height) {
                    this.categorySelected = 'preview_s';
                }
                if (screenWidth > this.images[this.currentIdx]['preview_s'].width &&
                    screenHeight > this.images[this.currentIdx]['preview_s'].height) {
                    this.categorySelected = 'preview_m';
                }
                if (screenWidth > this.images[this.currentIdx]['preview_m'].width &&
                    screenHeight > this.images[this.currentIdx]['preview_m'].height) {
                    this.categorySelected = 'preview_l';
                }
                if (screenWidth > this.images[this.currentIdx]['preview_l'].width &&
                    screenHeight > this.images[this.currentIdx]['preview_l'].height) {
                    this.categorySelected = 'preview_xl';
                }
                if (screenWidth > this.images[this.currentIdx]['preview_xl'].width &&
                    screenHeight > this.images[this.currentIdx]['preview_xl'].height) {
                    this.categorySelected = 'raw';
                }
                break;
            }
            case 'low': {
                this.categorySelected = 'preview_xxs';
                break;
            }
            case 'mid': {
                this.categorySelected = 'preview_m';
                break;
            }
            case 'high': {
                this.categorySelected = 'raw';
                break;
            }
            default: {
                this.categorySelected = 'preview_m';
            }
        }
    }
}
ViewerComponent.decorators = [
    { type: Component, args: [{
                selector: 'viewer',
                template: `<div class="outerContainer" (window:resize)="onResize()" *ngIf="showViewer" [@showViewerTransition]="showViewer">


    <img [ngClass]="{'activeArrow': leftArrowActive}" class="arrow left"
         src="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0cHgiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjx0aXRsZS8+PGRlc2MvPiAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgaWQ9Im1pdSIgc3Ryb2tlPSIjNTU1IiBzdHJva2Utd2lkdGg9IjAuMiI+ICAgICA8ZyBpZD0iQXJ0Ym9hcmQtMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM5NS4wMDAwMDAsIC0xOTEuMDAwMDAwKSI+PGcgaWQ9InNsaWNlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMTUuMDAwMDAwLCAxMTkuMDAwMDAwKSIvPjxwYXRoICAgICAgIGQ9Ik0zOTYsMjAyLjUgQzM5NiwxOTYuMTQ4NzI1IDQwMS4xNDg3MjUsMTkxIDQwNy41LDE5MSBDNDEzLjg1MTI3NSwxOTEgNDE5LDE5Ni4xNDg3MjUgNDE5LDIwMi41IEM0MTksMjA4Ljg1MTI3NSA0MTMuODUxMjc1LDIxNCA0MDcuNSwyMTQgQzQwMS4xNDg3MjUsMjE0IDM5NiwyMDguODUxMjc1IDM5NiwyMDIuNSBaIE00MDguNjU2ODU0LDE5Ni44NDMxNDYgTDQxMC4wNzEwNjgsMTk4LjI1NzM1OSBMNDA1LjgyODQyNywyMDIuNSBMNDEwLjA3MTA2OCwyMDYuNzQyNjQxIEw0MDguNjU2ODU0LDIwOC4xNTY4NTQgTDQwMywyMDIuNSBMNDA4LjY1Njg1NCwxOTYuODQzMTQ2IFoiICAgICAgIGZpbGw9IiNhYWEiICAgICAgIGlkPSJjaXJjbGUtYmFjay1hcnJvdy1nbHlwaCIvPjwvZz4gICA8L2c+IDwvc3ZnPg=="
         [hidden]="!leftArrowVisible" (click)="navigate(-1, false)"/>
    <img [ngClass]="{'activeArrow': rightArrowActive}" class="arrow right"
         src="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0cHgiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjx0aXRsZS8+PGRlc2MvPjxkZWZzLz4gICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGlkPSJtaXUiIHN0cm9rZT0iIzU1NSIgc3Ryb2tlLXdpZHRoPSIwLjIiPiAgICAgPGcgaWQ9IkFydGJvYXJkLTEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00NjcuMDAwMDAwLCAtMTkxLjAwMDAwMCkiPjxnIGlkPSJzbGljZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjE1LjAwMDAwMCwgMTE5LjAwMDAwMCkiLz48cGF0aCAgICAgICBkPSJNNDY4LDIwMi41IEM0NjgsMTk2LjE0ODcyNSA0NzMuMTQ4NzI1LDE5MSA0NzkuNSwxOTEgQzQ4NS44NTEyNzUsMTkxIDQ5MSwxOTYuMTQ4NzI1IDQ5MSwyMDIuNSBDNDkxLDIwOC44NTEyNzUgNDg1Ljg1MTI3NSwyMTQgNDc5LjUsMjE0IEM0NzMuMTQ4NzI1LDIxNCA0NjgsMjA4Ljg1MTI3NSA0NjgsMjAyLjUgWiBNNDgwLjY1Njg1NCwxOTYuODQzMTQ2IEw0ODIuMDcxMDY4LDE5OC4yNTczNTkgTDQ3Ny44Mjg0MjcsMjAyLjUgTDQ4Mi4wNzEwNjgsMjA2Ljc0MjY0MSBMNDgwLjY1Njg1NCwyMDguMTU2ODU0IEw0NzUsMjAyLjUgTDQ4MC42NTY4NTQsMTk2Ljg0MzE0NiBaIiAgICAgICBmaWxsPSIjYWFhIiAgICAgICBpZD0iY2lyY2xlLW5leHQtYXJyb3ctZGlzY2xvc3VyZS1nbHlwaCIgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDc5LjUwMDAwMCwgMjAyLjUwMDAwMCkgc2NhbGUoLTEsIDEpIHRyYW5zbGF0ZSgtNDc5LjUwMDAwMCwgLTIwMi41MDAwMDApICIvPjwvZz4gICA8L2c+IDwvc3ZnPg=="
         [hidden]="!rightArrowVisible" (click)="navigate(1, false)"/>

    <div class="buttonContainer">
        <img class="action close"
             src="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjMwcHgiIGlkPSJMYXllcl8xIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgdmVyc2lvbj0iMS4xIiBmaWxsPSIjYWFhIiB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgd2lkdGg9IjI0cHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPiAgPHBhdGggICAgc3Ryb2tlLXdpZHRoPSIzMCIgc3Ryb2tlPSIjNDQ0IiAgICBkPSJNNDM3LjUsMzg2LjZMMzA2LjksMjU2bDEzMC42LTEzMC42YzE0LjEtMTQuMSwxNC4xLTM2LjgsMC01MC45Yy0xNC4xLTE0LjEtMzYuOC0xNC4xLTUwLjksMEwyNTYsMjA1LjFMMTI1LjQsNzQuNSAgYy0xNC4xLTE0LjEtMzYuOC0xNC4xLTUwLjksMGMtMTQuMSwxNC4xLTE0LjEsMzYuOCwwLDUwLjlMMjA1LjEsMjU2TDc0LjUsMzg2LjZjLTE0LjEsMTQuMS0xNC4xLDM2LjgsMCw1MC45ICBjMTQuMSwxNC4xLDM2LjgsMTQuMSw1MC45LDBMMjU2LDMwNi45bDEzMC42LDEzMC42YzE0LjEsMTQuMSwzNi44LDE0LjEsNTAuOSwwQzQ1MS41LDQyMy40LDQ1MS41LDQwMC42LDQzNy41LDM4Ni42eiIvPjwvc3ZnPg=="
             (click)="closeViewer()"/>
    </div>

    <div class="imageContainer"
         (click)="showNavigationArrows()"
         (swipeleft)="navigate(1, $event)"
         (swiperight)="navigate(-1, $event)"
         (pan)="pan($event)">

        <div *ngFor='let img of images; let j = index'
             class="image"
             [class.active]="img['active']"
             [style.background-image]="img['viewerImageLoaded'] ? 'url('+img[categorySelected]['path']+')' : math.abs(currentIdx-j) <=1 ? 'url('+img['preview_xxs']['path']+')' : ''"
             [style.left]="transform+'px'"
             [@imageTransition]="img['transition']"></div>

        <img *ngFor='let img of images; let j = index'
             class="preloading-image"
             (load)="imageLoaded(img)"
             src="{{ math.abs(currentIdx-j) <=1 ? img[categorySelected]['path'] : ''}}"/>
    </div>
</div>

`,
                styles: [`.outerContainer{top:0;bottom:0;left:0;right:0;height:100%;width:100%;position:fixed;background-color:rgba(0,0,0,.95);font-family:sans-serif;z-index:1031}.imageContainer{position:absolute;float:none;top:0;bottom:0;left:0;right:0}.imageContainer .image,.imageContainer .preloading-image{visibility:hidden}.imageContainer .image.active{position:absolute;visibility:visible;background-repeat:no-repeat;background-size:contain;background-position:center;margin:auto;left:0;right:0;top:0;bottom:0;height:100%;width:100%;opacity:1}.arrow{opacity:0}.arrow:hover{cursor:pointer}.outerContainer:hover .arrow.activeArrow{height:calc(20px + 1.5vw);position:absolute;top:calc(50% - (20px + 1.5vw)/ 2);bottom:50%;z-index:1;opacity:1;transition:all ease-out .5s}.arrow.left{left:2vw}.arrow.right{right:2vw}.arrow:not(.activeArrow):hover{opacity:0;cursor:pointer;transition:all ease-out .5s}.buttonContainer{position:absolute;top:20px;right:20px;height:20px;text-align:center;opacity:1;z-index:200;transition:all ease-out .5s}.buttonContainer .action{height:100%;cursor:pointer;vertical-align:top}.buttonContainer .action:focus{outline:0}.buttonContainer .action:hover{background-color:#222;transition:all ease-out .3s}.buttonContainer .action.close{width:26px;height:26px}md-button-toggle.checked{background-color:#a0a0a0}.menuButton{position:absolute;bottom:20px;right:20px;text-align:center;opacity:1;z-index:200;transition:all ease-out .5s}@font-face{font-family:'Material Icons';font-style:normal;font-weight:400;src:local('Material Icons'),local('MaterialIcons-Regular'),url(https://fonts.gstatic.com/s/materialicons/v19/2fcrYFNaTjcS6g4U3t-Y5ZjZjT5FdEJ140U2DJYC3mY.woff2) format('woff2')}.material-icons{font-family:'Material Icons';font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased}`],
                host: {
                    '(document:keydown)': 'onKeydown($event)'
                },
                animations: [
                    trigger('imageTransition', [
                        state('enterFromRight', style({
                            opacity: 1,
                            transform: 'translate(0px, 0px)'
                        })),
                        state('enterFromLeft', style({
                            opacity: 1,
                            transform: 'translate(0px, 0px)'
                        })),
                        state('leaveToLeft', style({
                            opacity: 0,
                            transform: 'translate(-100px, 0px)'
                        })),
                        state('leaveToRight', style({
                            opacity: 0,
                            transform: 'translate(100px, 0px)'
                        })),
                        transition('* => enterFromRight', [
                            style({
                                opacity: 0,
                                transform: 'translate(30px, 0px)'
                            }),
                            animate('250ms 500ms ease-in')
                        ]),
                        transition('* => enterFromLeft', [
                            style({
                                opacity: 0,
                                transform: 'translate(-30px, 0px)'
                            }),
                            animate('250ms 500ms ease-in')
                        ]),
                        transition('* => leaveToLeft', [
                            style({
                                opacity: 1
                            }),
                            animate('250ms ease-out')
                        ]),
                        transition('* => leaveToRight', [
                            style({
                                opacity: 1
                            }),
                            animate('250ms ease-out')
                        ])
                    ]),
                    trigger('showViewerTransition', [
                        state('true', style({
                            opacity: 1
                        })),
                        state('void', style({
                            opacity: 0
                        })),
                        transition('void => *', [
                            style({
                                opacity: 0
                            }),
                            animate('1000ms ease-in')
                        ]),
                        transition('* => void', [
                            style({
                                opacity: 1
                            }),
                            animate('500ms ease-out')
                        ])
                    ])
                ]
            },] },
];
/** @nocollapse */
ViewerComponent.ctorParameters = () => [
    { type: ImageService }
];
function ViewerComponent_tsickle_Closure_declarations() {
    /** @type {?} */
    ViewerComponent.prototype.showViewer;
    /** @type {?} */
    ViewerComponent.prototype.images;
    /** @type {?} */
    ViewerComponent.prototype.currentIdx;
    /** @type {?} */
    ViewerComponent.prototype.leftArrowVisible;
    /** @type {?} */
    ViewerComponent.prototype.rightArrowVisible;
    /** @type {?} */
    ViewerComponent.prototype.categorySelected;
    /** @type {?} */
    ViewerComponent.prototype.transform;
    /** @type {?} */
    ViewerComponent.prototype.math;
    /** @type {?} */
    ViewerComponent.prototype.qualitySelectorShown;
    /** @type {?} */
    ViewerComponent.prototype.qualitySelected;
    /** @type {?} */
    ViewerComponent.prototype.imageService;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlld2VyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2FuZ3VsYXIyLWltYWdlLWdhbGxlcnkvIiwic291cmNlcyI6WyJsaWIvdmlld2VyL3ZpZXdlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQTtBQUN4RCxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFBO0FBQ3pDLE9BQU8sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsT0FBTyxFQUFFLE1BQU0scUJBQXFCLENBQUE7QUFpSGhGLE1BQU07Ozs7SUFZRixZQUFvQixZQUEwQjtRQUExQixpQkFBWSxHQUFaLFlBQVksQ0FBYztzQkFWekIsQ0FBQyxFQUFFLENBQUM7MEJBQ0osQ0FBQztnQ0FDTSxJQUFJO2lDQUNILElBQUk7Z0NBQ04sYUFBYTtvQ0FHQSxLQUFLOytCQUNYLE1BQU07UUFHcEMsWUFBWSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQ2pDLE1BQU0sQ0FBQyxFQUFFO1lBQ0wsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUE7U0FDdkIsQ0FBQyxDQUFBO1FBQ04sWUFBWSxDQUFDLDBCQUEwQixDQUFDLFNBQVMsQ0FDN0MsUUFBUSxDQUFDLEVBQUU7WUFDUCxJQUFJLENBQUMsVUFBVSxHQUFHLFFBQVEsQ0FBQTtZQUMxQixJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQTtZQUNyRCxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxJQUFJLENBQUE7WUFDN0MsSUFBSSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUE7WUFDbEIsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFBO1NBQ3ZCLENBQUMsQ0FBQTtRQUNOLFlBQVksQ0FBQyx1QkFBdUIsQ0FBQyxTQUFTLENBQzFDLFVBQVUsQ0FBQyxFQUFFO1lBQ1QsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUE7U0FDL0IsQ0FBQyxDQUFBO1FBQ04sSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUE7S0FDbkI7Ozs7SUFFRCxJQUFJLGVBQWU7UUFDZixNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUE7S0FDN0I7Ozs7SUFFRCxJQUFJLGdCQUFnQjtRQUNoQixNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUE7S0FDbEQ7Ozs7O0lBRUQsR0FBRyxDQUFDLEtBQVU7UUFDVixJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUE7S0FDaEM7Ozs7SUFFRCxRQUFRO1FBQ0osSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFDeEIsS0FBSyxDQUFDLG1CQUFtQixDQUFDLEdBQUcsS0FBSyxDQUFBO1lBQ2xDLEtBQUssQ0FBQyxRQUFRLENBQUMsR0FBRyxLQUFLLENBQUE7U0FDMUIsQ0FBQyxDQUFBO1FBQ0YsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFBO0tBQ3JCOzs7O0lBRUQsbUJBQW1CO1FBQ2YsSUFBSSxDQUFDLG9CQUFvQixHQUFHLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFBO0tBQ3pEOzs7OztJQUVELGNBQWMsQ0FBQyxVQUFlO1FBQzFCLElBQUksQ0FBQyxlQUFlLEdBQUcsVUFBVSxDQUFBO1FBQ2pDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQTtLQUNyQjs7Ozs7SUFFRCxXQUFXLENBQUMsS0FBVTtRQUNsQixLQUFLLENBQUMsbUJBQW1CLENBQUMsR0FBRyxJQUFJLENBQUE7S0FDcEM7Ozs7Ozs7O0lBTUQsUUFBUSxDQUFDLFNBQWlCLEVBQUUsS0FBVTtRQUNsQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFNBQVMsS0FBSyxDQUFDLElBQUksSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7WUFDN0QsQ0FBQyxTQUFTLEtBQUssQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFNUMsRUFBRSxDQUFDLENBQUMsU0FBUyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDbEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsWUFBWSxDQUFDLEdBQUcsY0FBYyxDQUFBO2dCQUMzRCxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLEdBQUcsZUFBZSxDQUFBO2FBQ25FO1lBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ0osSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsWUFBWSxDQUFDLEdBQUcsYUFBYSxDQUFBO2dCQUMxRCxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLEdBQUcsZ0JBQWdCLENBQUE7YUFDcEU7WUFDRCxJQUFJLENBQUMsVUFBVSxJQUFJLFNBQVMsQ0FBQTtZQUU1QixFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2dCQUNSLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFBO2FBQzlCO1lBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ0osSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUE7YUFDOUI7WUFDRCxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUE7U0FDckI7S0FDSjs7OztJQUVELG9CQUFvQjtRQUNoQixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFBO1FBQzVCLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUE7S0FDaEM7Ozs7SUFFRCxXQUFXO1FBQ1AsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUE7UUFDN0QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUE7UUFDckQsSUFBSSxDQUFDLFlBQVksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLENBQUE7S0FDM0M7Ozs7O0lBRUQsU0FBUyxDQUFDLEtBQW9CO1FBQzFCLHVCQUFNLE9BQU8sR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUM7YUFDL0IsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUNyQyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1lBQ1YsS0FBSyxDQUFDLGNBQWMsRUFBRSxDQUFBO1NBQ3pCO1FBRUQsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztZQUNkLEtBQUssRUFBRTs7Z0JBRUgsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQTtnQkFDeEIsS0FBSyxDQUFBO1lBQ1QsS0FBSyxFQUFFOztnQkFFSCxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQTtnQkFDdkIsS0FBSyxDQUFBO1lBQ1QsS0FBSyxFQUFFOztnQkFFSCxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUE7Z0JBQ2xCLEtBQUssQ0FBQTtZQUNULEtBQUssRUFBRTs7Z0JBRUgsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsWUFBWSxDQUFDLEdBQUcsY0FBYyxDQUFBO2dCQUMzRCxJQUFJLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQTtnQkFDbkIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsWUFBWSxDQUFDLEdBQUcsZUFBZSxDQUFBO2dCQUM1RCxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUE7Z0JBQ2xCLEtBQUssQ0FBQTtZQUNULEtBQUssRUFBRTs7Z0JBRUgsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsWUFBWSxDQUFDLEdBQUcsYUFBYSxDQUFBO2dCQUMxRCxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQTtnQkFDeEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsWUFBWSxDQUFDLEdBQUcsZ0JBQWdCLENBQUE7Z0JBQzdELElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQTtnQkFDbEIsS0FBSyxDQUFBO1lBQ1Q7Z0JBQ0ksS0FBSyxDQUFBO1NBQ1o7S0FDSjs7OztJQUVPLG9CQUFvQjtRQUN4QixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsS0FBSyxDQUFBO1FBQzdCLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxLQUFLLENBQUE7Ozs7O0lBRzFCLFdBQVc7O1FBRWYsVUFBVSxDQUFDLEdBQUcsRUFBRTtZQUNaLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQTtZQUNwQixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxJQUFJLENBQUE7WUFDN0MsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUU7Z0JBQ3hCLEVBQUUsQ0FBQyxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ3hDLEtBQUssQ0FBQyxRQUFRLENBQUMsR0FBRyxLQUFLLENBQUE7b0JBQ3ZCLElBQUksQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFBO2lCQUNyQjthQUNKLENBQUMsQ0FBQTtTQUNMLEVBQUUsR0FBRyxDQUFDLENBQUE7Ozs7O0lBR0gsYUFBYTtRQUNqQix1QkFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQTtRQUNyQyx1QkFBTSxZQUFZLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQTtRQUV2QyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQztZQUMzQixLQUFLLE1BQU0sRUFBRSxDQUFDO2dCQUNWLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxhQUFhLENBQUE7Z0JBRXJDLEVBQUUsQ0FBQyxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxLQUFLO29CQUMvRCxZQUFZLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztvQkFDcEUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLFlBQVksQ0FBQTtpQkFDdkM7Z0JBQ0QsRUFBRSxDQUFDLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLEtBQUs7b0JBQzlELFlBQVksR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO29CQUNuRSxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsV0FBVyxDQUFBO2lCQUN0QztnQkFDRCxFQUFFLENBQUMsQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsS0FBSztvQkFDN0QsWUFBWSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7b0JBQ2xFLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxXQUFXLENBQUE7aUJBQ3RDO2dCQUNELEVBQUUsQ0FBQyxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxLQUFLO29CQUM3RCxZQUFZLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztvQkFDbEUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLFdBQVcsQ0FBQTtpQkFDdEM7Z0JBQ0QsRUFBRSxDQUFDLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEtBQUs7b0JBQzdELFlBQVksR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO29CQUNsRSxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsWUFBWSxDQUFBO2lCQUN2QztnQkFDRCxFQUFFLENBQUMsQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsS0FBSztvQkFDOUQsWUFBWSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7b0JBQ25FLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxLQUFLLENBQUE7aUJBQ2hDO2dCQUNELEtBQUssQ0FBQTthQUNSO1lBQ0QsS0FBSyxLQUFLLEVBQUUsQ0FBQztnQkFDVCxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsYUFBYSxDQUFBO2dCQUNyQyxLQUFLLENBQUE7YUFDUjtZQUNELEtBQUssS0FBSyxFQUFFLENBQUM7Z0JBQ1QsSUFBSSxDQUFDLGdCQUFnQixHQUFHLFdBQVcsQ0FBQTtnQkFDbkMsS0FBSyxDQUFBO2FBQ1I7WUFDRCxLQUFLLE1BQU0sRUFBRSxDQUFDO2dCQUNWLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxLQUFLLENBQUE7Z0JBQzdCLEtBQUssQ0FBQTthQUNSO1lBQ0QsU0FBUyxDQUFDO2dCQUNSLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxXQUFXLENBQUE7YUFDcEM7U0FDSjs7OztZQWhVUixTQUFTLFNBQUM7Z0JBQ1AsUUFBUSxFQUFFLFFBQVE7Z0JBQ2xCLFFBQVEsRUFBRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBb0NiO2dCQUNHLE1BQU0sRUFBRSxDQUFDLHE3REFBcTdELENBQUM7Z0JBQy83RCxJQUFJLEVBQUU7b0JBQ0Ysb0JBQW9CLEVBQUUsbUJBQW1CO2lCQUM1QztnQkFDRCxVQUFVLEVBQUU7b0JBQ1IsT0FBTyxDQUFDLGlCQUFpQixFQUFFO3dCQUN2QixLQUFLLENBQUMsZ0JBQWdCLEVBQUUsS0FBSyxDQUFDOzRCQUMxQixPQUFPLEVBQUUsQ0FBQzs0QkFDVixTQUFTLEVBQUUscUJBQXFCO3lCQUNuQyxDQUFDLENBQUM7d0JBQ0gsS0FBSyxDQUFDLGVBQWUsRUFBRSxLQUFLLENBQUM7NEJBQ3pCLE9BQU8sRUFBRSxDQUFDOzRCQUNWLFNBQVMsRUFBRSxxQkFBcUI7eUJBQ25DLENBQUMsQ0FBQzt3QkFDSCxLQUFLLENBQUMsYUFBYSxFQUFFLEtBQUssQ0FBQzs0QkFDdkIsT0FBTyxFQUFFLENBQUM7NEJBQ1YsU0FBUyxFQUFFLHdCQUF3Qjt5QkFDdEMsQ0FBQyxDQUFDO3dCQUNILEtBQUssQ0FBQyxjQUFjLEVBQUUsS0FBSyxDQUFDOzRCQUN4QixPQUFPLEVBQUUsQ0FBQzs0QkFDVixTQUFTLEVBQUUsdUJBQXVCO3lCQUNyQyxDQUFDLENBQUM7d0JBQ0gsVUFBVSxDQUFDLHFCQUFxQixFQUFFOzRCQUM5QixLQUFLLENBQUM7Z0NBQ0YsT0FBTyxFQUFFLENBQUM7Z0NBQ1YsU0FBUyxFQUFFLHNCQUFzQjs2QkFDcEMsQ0FBQzs0QkFDRixPQUFPLENBQUMscUJBQXFCLENBQUM7eUJBQ2pDLENBQUM7d0JBQ0YsVUFBVSxDQUFDLG9CQUFvQixFQUFFOzRCQUM3QixLQUFLLENBQUM7Z0NBQ0YsT0FBTyxFQUFFLENBQUM7Z0NBQ1YsU0FBUyxFQUFFLHVCQUF1Qjs2QkFDckMsQ0FBQzs0QkFDRixPQUFPLENBQUMscUJBQXFCLENBQUM7eUJBQ2pDLENBQUM7d0JBQ0YsVUFBVSxDQUFDLGtCQUFrQixFQUFFOzRCQUMzQixLQUFLLENBQUM7Z0NBQ0YsT0FBTyxFQUFFLENBQUM7NkJBQ2IsQ0FBQzs0QkFDRixPQUFPLENBQUMsZ0JBQWdCLENBQUM7eUJBQUMsQ0FDN0I7d0JBQ0QsVUFBVSxDQUFDLG1CQUFtQixFQUFFOzRCQUM1QixLQUFLLENBQUM7Z0NBQ0YsT0FBTyxFQUFFLENBQUM7NkJBQ2IsQ0FBQzs0QkFDRixPQUFPLENBQUMsZ0JBQWdCLENBQUM7eUJBQUMsQ0FDN0I7cUJBQ0osQ0FBQztvQkFDRixPQUFPLENBQUMsc0JBQXNCLEVBQUU7d0JBQzVCLEtBQUssQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDOzRCQUNoQixPQUFPLEVBQUUsQ0FBQzt5QkFDYixDQUFDLENBQUM7d0JBQ0gsS0FBSyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUM7NEJBQ2hCLE9BQU8sRUFBRSxDQUFDO3lCQUNiLENBQUMsQ0FBQzt3QkFDSCxVQUFVLENBQUMsV0FBVyxFQUFFOzRCQUNwQixLQUFLLENBQUM7Z0NBQ0YsT0FBTyxFQUFFLENBQUM7NkJBQ2IsQ0FBQzs0QkFDRixPQUFPLENBQUMsZ0JBQWdCLENBQUM7eUJBQUMsQ0FDN0I7d0JBQ0QsVUFBVSxDQUFDLFdBQVcsRUFBRTs0QkFDcEIsS0FBSyxDQUFDO2dDQUNGLE9BQU8sRUFBRSxDQUFDOzZCQUNiLENBQUM7NEJBQ0YsT0FBTyxDQUFDLGdCQUFnQixDQUFDO3lCQUFDLENBQzdCO3FCQUNKLENBQUM7aUJBQ0w7YUFDSjs7OztZQWpIUSxZQUFZIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW1hZ2VTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvaW1hZ2Uuc2VydmljZSdcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnXG5pbXBvcnQgeyBhbmltYXRlLCBzdGF0ZSwgc3R5bGUsIHRyYW5zaXRpb24sIHRyaWdnZXIgfSBmcm9tICdAYW5ndWxhci9hbmltYXRpb25zJ1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ3ZpZXdlcicsXG4gICAgdGVtcGxhdGU6IGA8ZGl2IGNsYXNzPVwib3V0ZXJDb250YWluZXJcIiAod2luZG93OnJlc2l6ZSk9XCJvblJlc2l6ZSgpXCIgKm5nSWY9XCJzaG93Vmlld2VyXCIgW0BzaG93Vmlld2VyVHJhbnNpdGlvbl09XCJzaG93Vmlld2VyXCI+XG5cblxuICAgIDxpbWcgW25nQ2xhc3NdPVwieydhY3RpdmVBcnJvdyc6IGxlZnRBcnJvd0FjdGl2ZX1cIiBjbGFzcz1cImFycm93IGxlZnRcIlxuICAgICAgICAgc3JjPVwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCb1pXbG5hSFE5SWpJMGNIZ2lJSFpsY25OcGIyNDlJakV1TVNJZ2RtbGxkMEp2ZUQwaU1DQXdJREkwSURJMElpQjNhV1IwYUQwaU1qUndlQ0lnZUcxc2JuTTlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5Mekl3TURBdmMzWm5JaUI0Yld4dWN6cHphMlYwWTJnOUltaDBkSEE2THk5M2QzY3VZbTlvWlcxcFlXNWpiMlJwYm1jdVkyOXRMM05yWlhSamFDOXVjeUlnZUcxc2JuTTZlR3hwYm1zOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6RTVPVGt2ZUd4cGJtc2lQangwYVhSc1pTOCtQR1JsYzJNdlBpQWdJRHhuSUdacGJHdzlJbTV2Ym1VaUlHWnBiR3d0Y25Wc1pUMGlaWFpsYm05a1pDSWdhV1E5SW0xcGRTSWdjM1J5YjJ0bFBTSWpOVFUxSWlCemRISnZhMlV0ZDJsa2RHZzlJakF1TWlJK0lDQWdJQ0E4WnlCcFpEMGlRWEowWW05aGNtUXRNU0lnZEhKaGJuTm1iM0p0UFNKMGNtRnVjMnhoZEdVb0xUTTVOUzR3TURBd01EQXNJQzB4T1RFdU1EQXdNREF3S1NJK1BHY2dhV1E5SW5Oc2FXTmxJaUIwY21GdWMyWnZjbTA5SW5SeVlXNXpiR0YwWlNneU1UVXVNREF3TURBd0xDQXhNVGt1TURBd01EQXdLU0l2UGp4d1lYUm9JQ0FnSUNBZ0lHUTlJazB6T1RZc01qQXlMalVnUXpNNU5pd3hPVFl1TVRRNE56STFJRFF3TVM0eE5EZzNNalVzTVRreElEUXdOeTQxTERFNU1TQkROREV6TGpnMU1USTNOU3d4T1RFZ05ERTVMREU1Tmk0eE5EZzNNalVnTkRFNUxESXdNaTQxSUVNME1Ua3NNakE0TGpnMU1USTNOU0EwTVRNdU9EVXhNamMxTERJeE5DQTBNRGN1TlN3eU1UUWdRelF3TVM0eE5EZzNNalVzTWpFMElETTVOaXd5TURndU9EVXhNamMxSURNNU5pd3lNREl1TlNCYUlFMDBNRGd1TmpVMk9EVTBMREU1Tmk0NE5ETXhORFlnVERReE1DNHdOekV3Tmpnc01UazRMakkxTnpNMU9TQk1OREExTGpneU9EUXlOeXd5TURJdU5TQk1OREV3TGpBM01UQTJPQ3d5TURZdU56UXlOalF4SUV3ME1EZ3VOalUyT0RVMExESXdPQzR4TlRZNE5UUWdURFF3TXl3eU1ESXVOU0JNTkRBNExqWTFOamcxTkN3eE9UWXVPRFF6TVRRMklGb2lJQ0FnSUNBZ0lHWnBiR3c5SWlOaFlXRWlJQ0FnSUNBZ0lHbGtQU0pqYVhKamJHVXRZbUZqYXkxaGNuSnZkeTFuYkhsd2FDSXZQand2Wno0Z0lDQThMMmMrSUR3dmMzWm5QZz09XCJcbiAgICAgICAgIFtoaWRkZW5dPVwiIWxlZnRBcnJvd1Zpc2libGVcIiAoY2xpY2spPVwibmF2aWdhdGUoLTEsIGZhbHNlKVwiLz5cbiAgICA8aW1nIFtuZ0NsYXNzXT1cInsnYWN0aXZlQXJyb3cnOiByaWdodEFycm93QWN0aXZlfVwiIGNsYXNzPVwiYXJyb3cgcmlnaHRcIlxuICAgICAgICAgc3JjPVwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCb1pXbG5hSFE5SWpJMGNIZ2lJSFpsY25OcGIyNDlJakV1TVNJZ2RtbGxkMEp2ZUQwaU1DQXdJREkwSURJMElpQjNhV1IwYUQwaU1qUndlQ0lnZUcxc2JuTTlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5Mekl3TURBdmMzWm5JaUI0Yld4dWN6cHphMlYwWTJnOUltaDBkSEE2THk5M2QzY3VZbTlvWlcxcFlXNWpiMlJwYm1jdVkyOXRMM05yWlhSamFDOXVjeUlnZUcxc2JuTTZlR3hwYm1zOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6RTVPVGt2ZUd4cGJtc2lQangwYVhSc1pTOCtQR1JsYzJNdlBqeGtaV1p6THo0Z0lDQThaeUJtYVd4c1BTSnViMjVsSWlCbWFXeHNMWEoxYkdVOUltVjJaVzV2WkdRaUlHbGtQU0p0YVhVaUlITjBjbTlyWlQwaUl6VTFOU0lnYzNSeWIydGxMWGRwWkhSb1BTSXdMaklpUGlBZ0lDQWdQR2NnYVdROUlrRnlkR0p2WVhKa0xURWlJSFJ5WVc1elptOXliVDBpZEhKaGJuTnNZWFJsS0MwME5qY3VNREF3TURBd0xDQXRNVGt4TGpBd01EQXdNQ2tpUGp4bklHbGtQU0p6YkdsalpTSWdkSEpoYm5ObWIzSnRQU0owY21GdWMyeGhkR1VvTWpFMUxqQXdNREF3TUN3Z01URTVMakF3TURBd01Da2lMejQ4Y0dGMGFDQWdJQ0FnSUNCa1BTSk5ORFk0TERJd01pNDFJRU0wTmpnc01UazJMakUwT0RjeU5TQTBOek11TVRRNE56STFMREU1TVNBME56a3VOU3d4T1RFZ1F6UTROUzQ0TlRFeU56VXNNVGt4SURRNU1Td3hPVFl1TVRRNE56STFJRFE1TVN3eU1ESXVOU0JETkRreExESXdPQzQ0TlRFeU56VWdORGcxTGpnMU1USTNOU3d5TVRRZ05EYzVMalVzTWpFMElFTTBOek11TVRRNE56STFMREl4TkNBME5qZ3NNakE0TGpnMU1USTNOU0EwTmpnc01qQXlMalVnV2lCTk5EZ3dMalkxTmpnMU5Dd3hPVFl1T0RRek1UUTJJRXcwT0RJdU1EY3hNRFk0TERFNU9DNHlOVGN6TlRrZ1REUTNOeTQ0TWpnME1qY3NNakF5TGpVZ1REUTRNaTR3TnpFd05qZ3NNakEyTGpjME1qWTBNU0JNTkRnd0xqWTFOamcxTkN3eU1EZ3VNVFUyT0RVMElFdzBOelVzTWpBeUxqVWdURFE0TUM0Mk5UWTROVFFzTVRrMkxqZzBNekUwTmlCYUlpQWdJQ0FnSUNCbWFXeHNQU0lqWVdGaElpQWdJQ0FnSUNCcFpEMGlZMmx5WTJ4bExXNWxlSFF0WVhKeWIzY3RaR2x6WTJ4dmMzVnlaUzFuYkhsd2FDSWdJQ0FnSUNBZ2RISmhibk5tYjNKdFBTSjBjbUZ1YzJ4aGRHVW9ORGM1TGpVd01EQXdNQ3dnTWpBeUxqVXdNREF3TUNrZ2MyTmhiR1VvTFRFc0lERXBJSFJ5WVc1emJHRjBaU2d0TkRjNUxqVXdNREF3TUN3Z0xUSXdNaTQxTURBd01EQXBJQ0l2UGp3dlp6NGdJQ0E4TDJjK0lEd3ZjM1puUGc9PVwiXG4gICAgICAgICBbaGlkZGVuXT1cIiFyaWdodEFycm93VmlzaWJsZVwiIChjbGljayk9XCJuYXZpZ2F0ZSgxLCBmYWxzZSlcIi8+XG5cbiAgICA8ZGl2IGNsYXNzPVwiYnV0dG9uQ29udGFpbmVyXCI+XG4gICAgICAgIDxpbWcgY2xhc3M9XCJhY3Rpb24gY2xvc2VcIlxuICAgICAgICAgICAgIHNyYz1cImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5Qm9aV2xuYUhROUlqTXdjSGdpSUdsa1BTSk1ZWGxsY2w4eElpQnpkSGxzWlQwaVpXNWhZbXhsTFdKaFkydG5jbTkxYm1RNmJtVjNJREFnTUNBMU1USWdOVEV5T3lJZ2RtVnljMmx2YmowaU1TNHhJaUJtYVd4c1BTSWpZV0ZoSWlCMmFXVjNRbTk0UFNJd0lEQWdOVEV5SURVeE1pSWdkMmxrZEdnOUlqSTBjSGdpSUhodGJEcHpjR0ZqWlQwaWNISmxjMlZ5ZG1VaUlIaHRiRzV6UFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eU1EQXdMM04yWnlJZ2VHMXNibk02ZUd4cGJtczlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MekU1T1RrdmVHeHBibXNpUGlBZ1BIQmhkR2dnSUNBZ2MzUnliMnRsTFhkcFpIUm9QU0l6TUNJZ2MzUnliMnRsUFNJak5EUTBJaUFnSUNCa1BTSk5ORE0zTGpVc016ZzJMalpNTXpBMkxqa3NNalUyYkRFek1DNDJMVEV6TUM0Mll6RTBMakV0TVRRdU1Td3hOQzR4TFRNMkxqZ3NNQzAxTUM0NVl5MHhOQzR4TFRFMExqRXRNell1T0MweE5DNHhMVFV3TGprc01Fd3lOVFlzTWpBMUxqRk1NVEkxTGpRc056UXVOU0FnWXkweE5DNHhMVEUwTGpFdE16WXVPQzB4TkM0eExUVXdMamtzTUdNdE1UUXVNU3d4TkM0eExURTBMakVzTXpZdU9Dd3dMRFV3TGpsTU1qQTFMakVzTWpVMlREYzBMalVzTXpnMkxqWmpMVEUwTGpFc01UUXVNUzB4TkM0eExETTJMamdzTUN3MU1DNDVJQ0JqTVRRdU1Td3hOQzR4TERNMkxqZ3NNVFF1TVN3MU1DNDVMREJNTWpVMkxETXdOaTQ1YkRFek1DNDJMREV6TUM0Mll6RTBMakVzTVRRdU1Td3pOaTQ0TERFMExqRXNOVEF1T1N3d1F6UTFNUzQxTERReU15NDBMRFExTVM0MUxEUXdNQzQyTERRek55NDFMRE00Tmk0MmVpSXZQand2YzNablBnPT1cIlxuICAgICAgICAgICAgIChjbGljayk9XCJjbG9zZVZpZXdlcigpXCIvPlxuICAgIDwvZGl2PlxuXG4gICAgPGRpdiBjbGFzcz1cImltYWdlQ29udGFpbmVyXCJcbiAgICAgICAgIChjbGljayk9XCJzaG93TmF2aWdhdGlvbkFycm93cygpXCJcbiAgICAgICAgIChzd2lwZWxlZnQpPVwibmF2aWdhdGUoMSwgJGV2ZW50KVwiXG4gICAgICAgICAoc3dpcGVyaWdodCk9XCJuYXZpZ2F0ZSgtMSwgJGV2ZW50KVwiXG4gICAgICAgICAocGFuKT1cInBhbigkZXZlbnQpXCI+XG5cbiAgICAgICAgPGRpdiAqbmdGb3I9J2xldCBpbWcgb2YgaW1hZ2VzOyBsZXQgaiA9IGluZGV4J1xuICAgICAgICAgICAgIGNsYXNzPVwiaW1hZ2VcIlxuICAgICAgICAgICAgIFtjbGFzcy5hY3RpdmVdPVwiaW1nWydhY3RpdmUnXVwiXG4gICAgICAgICAgICAgW3N0eWxlLmJhY2tncm91bmQtaW1hZ2VdPVwiaW1nWyd2aWV3ZXJJbWFnZUxvYWRlZCddID8gJ3VybCgnK2ltZ1tjYXRlZ29yeVNlbGVjdGVkXVsncGF0aCddKycpJyA6IG1hdGguYWJzKGN1cnJlbnRJZHgtaikgPD0xID8gJ3VybCgnK2ltZ1sncHJldmlld194eHMnXVsncGF0aCddKycpJyA6ICcnXCJcbiAgICAgICAgICAgICBbc3R5bGUubGVmdF09XCJ0cmFuc2Zvcm0rJ3B4J1wiXG4gICAgICAgICAgICAgW0BpbWFnZVRyYW5zaXRpb25dPVwiaW1nWyd0cmFuc2l0aW9uJ11cIj48L2Rpdj5cblxuICAgICAgICA8aW1nICpuZ0Zvcj0nbGV0IGltZyBvZiBpbWFnZXM7IGxldCBqID0gaW5kZXgnXG4gICAgICAgICAgICAgY2xhc3M9XCJwcmVsb2FkaW5nLWltYWdlXCJcbiAgICAgICAgICAgICAobG9hZCk9XCJpbWFnZUxvYWRlZChpbWcpXCJcbiAgICAgICAgICAgICBzcmM9XCJ7eyBtYXRoLmFicyhjdXJyZW50SWR4LWopIDw9MSA/IGltZ1tjYXRlZ29yeVNlbGVjdGVkXVsncGF0aCddIDogJyd9fVwiLz5cbiAgICA8L2Rpdj5cbjwvZGl2PlxuXG5gLFxuICAgIHN0eWxlczogW2Aub3V0ZXJDb250YWluZXJ7dG9wOjA7Ym90dG9tOjA7bGVmdDowO3JpZ2h0OjA7aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJTtwb3NpdGlvbjpmaXhlZDtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsLjk1KTtmb250LWZhbWlseTpzYW5zLXNlcmlmO3otaW5kZXg6MTAzMX0uaW1hZ2VDb250YWluZXJ7cG9zaXRpb246YWJzb2x1dGU7ZmxvYXQ6bm9uZTt0b3A6MDtib3R0b206MDtsZWZ0OjA7cmlnaHQ6MH0uaW1hZ2VDb250YWluZXIgLmltYWdlLC5pbWFnZUNvbnRhaW5lciAucHJlbG9hZGluZy1pbWFnZXt2aXNpYmlsaXR5OmhpZGRlbn0uaW1hZ2VDb250YWluZXIgLmltYWdlLmFjdGl2ZXtwb3NpdGlvbjphYnNvbHV0ZTt2aXNpYmlsaXR5OnZpc2libGU7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtc2l6ZTpjb250YWluO2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyO21hcmdpbjphdXRvO2xlZnQ6MDtyaWdodDowO3RvcDowO2JvdHRvbTowO2hlaWdodDoxMDAlO3dpZHRoOjEwMCU7b3BhY2l0eToxfS5hcnJvd3tvcGFjaXR5OjB9LmFycm93OmhvdmVye2N1cnNvcjpwb2ludGVyfS5vdXRlckNvbnRhaW5lcjpob3ZlciAuYXJyb3cuYWN0aXZlQXJyb3d7aGVpZ2h0OmNhbGMoMjBweCArIDEuNXZ3KTtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6Y2FsYyg1MCUgLSAoMjBweCArIDEuNXZ3KS8gMik7Ym90dG9tOjUwJTt6LWluZGV4OjE7b3BhY2l0eToxO3RyYW5zaXRpb246YWxsIGVhc2Utb3V0IC41c30uYXJyb3cubGVmdHtsZWZ0OjJ2d30uYXJyb3cucmlnaHR7cmlnaHQ6MnZ3fS5hcnJvdzpub3QoLmFjdGl2ZUFycm93KTpob3ZlcntvcGFjaXR5OjA7Y3Vyc29yOnBvaW50ZXI7dHJhbnNpdGlvbjphbGwgZWFzZS1vdXQgLjVzfS5idXR0b25Db250YWluZXJ7cG9zaXRpb246YWJzb2x1dGU7dG9wOjIwcHg7cmlnaHQ6MjBweDtoZWlnaHQ6MjBweDt0ZXh0LWFsaWduOmNlbnRlcjtvcGFjaXR5OjE7ei1pbmRleDoyMDA7dHJhbnNpdGlvbjphbGwgZWFzZS1vdXQgLjVzfS5idXR0b25Db250YWluZXIgLmFjdGlvbntoZWlnaHQ6MTAwJTtjdXJzb3I6cG9pbnRlcjt2ZXJ0aWNhbC1hbGlnbjp0b3B9LmJ1dHRvbkNvbnRhaW5lciAuYWN0aW9uOmZvY3Vze291dGxpbmU6MH0uYnV0dG9uQ29udGFpbmVyIC5hY3Rpb246aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojMjIyO3RyYW5zaXRpb246YWxsIGVhc2Utb3V0IC4zc30uYnV0dG9uQ29udGFpbmVyIC5hY3Rpb24uY2xvc2V7d2lkdGg6MjZweDtoZWlnaHQ6MjZweH1tZC1idXR0b24tdG9nZ2xlLmNoZWNrZWR7YmFja2dyb3VuZC1jb2xvcjojYTBhMGEwfS5tZW51QnV0dG9ue3Bvc2l0aW9uOmFic29sdXRlO2JvdHRvbToyMHB4O3JpZ2h0OjIwcHg7dGV4dC1hbGlnbjpjZW50ZXI7b3BhY2l0eToxO3otaW5kZXg6MjAwO3RyYW5zaXRpb246YWxsIGVhc2Utb3V0IC41c31AZm9udC1mYWNle2ZvbnQtZmFtaWx5OidNYXRlcmlhbCBJY29ucyc7Zm9udC1zdHlsZTpub3JtYWw7Zm9udC13ZWlnaHQ6NDAwO3NyYzpsb2NhbCgnTWF0ZXJpYWwgSWNvbnMnKSxsb2NhbCgnTWF0ZXJpYWxJY29ucy1SZWd1bGFyJyksdXJsKGh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20vcy9tYXRlcmlhbGljb25zL3YxOS8yZmNyWUZOYVRqY1M2ZzRVM3QtWTVaalpqVDVGZEVKMTQwVTJESllDM21ZLndvZmYyKSBmb3JtYXQoJ3dvZmYyJyl9Lm1hdGVyaWFsLWljb25ze2ZvbnQtZmFtaWx5OidNYXRlcmlhbCBJY29ucyc7Zm9udC13ZWlnaHQ6NDAwO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtc2l6ZToyNHB4O2xpbmUtaGVpZ2h0OjE7bGV0dGVyLXNwYWNpbmc6bm9ybWFsO3RleHQtdHJhbnNmb3JtOm5vbmU7ZGlzcGxheTppbmxpbmUtYmxvY2s7d2hpdGUtc3BhY2U6bm93cmFwO3dvcmQtd3JhcDpub3JtYWw7ZGlyZWN0aW9uOmx0cjstd2Via2l0LWZvbnQtZmVhdHVyZS1zZXR0aW5nczonbGlnYSc7LXdlYmtpdC1mb250LXNtb290aGluZzphbnRpYWxpYXNlZH1gXSxcbiAgICBob3N0OiB7XG4gICAgICAgICcoZG9jdW1lbnQ6a2V5ZG93biknOiAnb25LZXlkb3duKCRldmVudCknXG4gICAgfSxcbiAgICBhbmltYXRpb25zOiBbXG4gICAgICAgIHRyaWdnZXIoJ2ltYWdlVHJhbnNpdGlvbicsIFtcbiAgICAgICAgICAgIHN0YXRlKCdlbnRlckZyb21SaWdodCcsIHN0eWxlKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgwcHgsIDBweCknXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgICBzdGF0ZSgnZW50ZXJGcm9tTGVmdCcsIHN0eWxlKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgwcHgsIDBweCknXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgICBzdGF0ZSgnbGVhdmVUb0xlZnQnLCBzdHlsZSh7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUoLTEwMHB4LCAwcHgpJ1xuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgc3RhdGUoJ2xlYXZlVG9SaWdodCcsIHN0eWxlKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgxMDBweCwgMHB4KSdcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgIHRyYW5zaXRpb24oJyogPT4gZW50ZXJGcm9tUmlnaHQnLCBbXG4gICAgICAgICAgICAgICAgc3R5bGUoe1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUoMzBweCwgMHB4KSdcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBhbmltYXRlKCcyNTBtcyA1MDBtcyBlYXNlLWluJylcbiAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgdHJhbnNpdGlvbignKiA9PiBlbnRlckZyb21MZWZ0JywgW1xuICAgICAgICAgICAgICAgIHN0eWxlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlKC0zMHB4LCAwcHgpJ1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGFuaW1hdGUoJzI1MG1zIDUwMG1zIGVhc2UtaW4nKVxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgICB0cmFuc2l0aW9uKCcqID0+IGxlYXZlVG9MZWZ0JywgW1xuICAgICAgICAgICAgICAgIHN0eWxlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGFuaW1hdGUoJzI1MG1zIGVhc2Utb3V0JyldXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgdHJhbnNpdGlvbignKiA9PiBsZWF2ZVRvUmlnaHQnLCBbXG4gICAgICAgICAgICAgICAgc3R5bGUoe1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgYW5pbWF0ZSgnMjUwbXMgZWFzZS1vdXQnKV1cbiAgICAgICAgICAgIClcbiAgICAgICAgXSksXG4gICAgICAgIHRyaWdnZXIoJ3Nob3dWaWV3ZXJUcmFuc2l0aW9uJywgW1xuICAgICAgICAgICAgc3RhdGUoJ3RydWUnLCBzdHlsZSh7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgc3RhdGUoJ3ZvaWQnLCBzdHlsZSh7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgdHJhbnNpdGlvbigndm9pZCA9PiAqJywgW1xuICAgICAgICAgICAgICAgIHN0eWxlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGFuaW1hdGUoJzEwMDBtcyBlYXNlLWluJyldXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgdHJhbnNpdGlvbignKiA9PiB2b2lkJywgW1xuICAgICAgICAgICAgICAgIHN0eWxlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGFuaW1hdGUoJzUwMG1zIGVhc2Utb3V0JyldXG4gICAgICAgICAgICApXG4gICAgICAgIF0pXG4gICAgXVxufSlcblxuZXhwb3J0IGNsYXNzIFZpZXdlckNvbXBvbmVudCB7XG4gICAgc2hvd1ZpZXdlcjogYm9vbGVhblxuICAgIGltYWdlczogQXJyYXk8YW55PiA9IFt7fV1cbiAgICBjdXJyZW50SWR4OiBudW1iZXIgPSAwXG4gICAgbGVmdEFycm93VmlzaWJsZTogYm9vbGVhbiA9IHRydWVcbiAgICByaWdodEFycm93VmlzaWJsZTogYm9vbGVhbiA9IHRydWVcbiAgICBjYXRlZ29yeVNlbGVjdGVkOiBzdHJpbmcgPSAncHJldmlld194eHMnXG4gICAgdHJhbnNmb3JtOiBudW1iZXJcbiAgICBtYXRoOiBNYXRoXG4gICAgcHJpdmF0ZSBxdWFsaXR5U2VsZWN0b3JTaG93bjogYm9vbGVhbiA9IGZhbHNlXG4gICAgcHJpdmF0ZSBxdWFsaXR5U2VsZWN0ZWQ6IHN0cmluZyA9ICdhdXRvJ1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBpbWFnZVNlcnZpY2U6IEltYWdlU2VydmljZSkge1xuICAgICAgICBpbWFnZVNlcnZpY2UuaW1hZ2VzVXBkYXRlZCQuc3Vic2NyaWJlKFxuICAgICAgICAgICAgaW1hZ2VzID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlcyA9IGltYWdlc1xuICAgICAgICAgICAgfSlcbiAgICAgICAgaW1hZ2VTZXJ2aWNlLmltYWdlU2VsZWN0ZWRJbmRleFVwZGF0ZWQkLnN1YnNjcmliZShcbiAgICAgICAgICAgIG5ld0luZGV4ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRJZHggPSBuZXdJbmRleFxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VzLmZvckVhY2goaW1hZ2UgPT4gaW1hZ2VbJ2FjdGl2ZSddID0gZmFsc2UpXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XVsnYWN0aXZlJ10gPSB0cnVlXG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSAwXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVRdWFsaXR5KClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIGltYWdlU2VydmljZS5zaG93SW1hZ2VWaWV3ZXJDaGFuZ2VkJC5zdWJzY3JpYmUoXG4gICAgICAgICAgICBzaG93Vmlld2VyID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dWaWV3ZXIgPSBzaG93Vmlld2VyXG4gICAgICAgICAgICB9KVxuICAgICAgICB0aGlzLm1hdGggPSBNYXRoXG4gICAgfVxuXG4gICAgZ2V0IGxlZnRBcnJvd0FjdGl2ZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudElkeCA+IDBcbiAgICB9XG5cbiAgICBnZXQgcmlnaHRBcnJvd0FjdGl2ZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudElkeCA8IHRoaXMuaW1hZ2VzLmxlbmd0aCAtIDFcbiAgICB9XG5cbiAgICBwYW4oc3dpcGU6IGFueSk6IHZvaWQge1xuICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IHN3aXBlLmRlbHRhWFxuICAgIH1cblxuICAgIG9uUmVzaXplKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmltYWdlcy5mb3JFYWNoKGltYWdlID0+IHtcbiAgICAgICAgICAgIGltYWdlWyd2aWV3ZXJJbWFnZUxvYWRlZCddID0gZmFsc2VcbiAgICAgICAgICAgIGltYWdlWydhY3RpdmUnXSA9IGZhbHNlXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMudXBkYXRlSW1hZ2UoKVxuICAgIH1cblxuICAgIHNob3dRdWFsaXR5U2VsZWN0b3IoKTogdm9pZCB7XG4gICAgICAgIHRoaXMucXVhbGl0eVNlbGVjdG9yU2hvd24gPSAhdGhpcy5xdWFsaXR5U2VsZWN0b3JTaG93blxuICAgIH1cblxuICAgIHF1YWxpdHlDaGFuZ2VkKG5ld1F1YWxpdHk6IGFueSk6IHZvaWQge1xuICAgICAgICB0aGlzLnF1YWxpdHlTZWxlY3RlZCA9IG5ld1F1YWxpdHlcbiAgICAgICAgdGhpcy51cGRhdGVJbWFnZSgpXG4gICAgfVxuXG4gICAgaW1hZ2VMb2FkZWQoaW1hZ2U6IGFueSk6IHZvaWQge1xuICAgICAgICBpbWFnZVsndmlld2VySW1hZ2VMb2FkZWQnXSA9IHRydWVcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBkaXJlY3Rpb24gKC0xOiBsZWZ0LCAxOiByaWdodClcbiAgICAgKiBzd2lwZSAodXNlciBzd2lwZWQpXG4gICAgICovXG4gICAgbmF2aWdhdGUoZGlyZWN0aW9uOiBudW1iZXIsIHN3aXBlOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgaWYgKChkaXJlY3Rpb24gPT09IDEgJiYgdGhpcy5jdXJyZW50SWR4IDwgdGhpcy5pbWFnZXMubGVuZ3RoIC0gMSkgfHxcbiAgICAgICAgICAgIChkaXJlY3Rpb24gPT09IC0xICYmIHRoaXMuY3VycmVudElkeCA+IDApKSB7XG5cbiAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWyd0cmFuc2l0aW9uJ10gPSAnbGVhdmVUb1JpZ2h0J1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeCAtIDFdWyd0cmFuc2l0aW9uJ10gPSAnZW50ZXJGcm9tTGVmdCdcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XVsndHJhbnNpdGlvbiddID0gJ2xlYXZlVG9MZWZ0J1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeCArIDFdWyd0cmFuc2l0aW9uJ10gPSAnZW50ZXJGcm9tUmlnaHQnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJZHggKz0gZGlyZWN0aW9uXG5cbiAgICAgICAgICAgIGlmIChzd2lwZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZU5hdmlnYXRpb25BcnJvd3MoKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dOYXZpZ2F0aW9uQXJyb3dzKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlSW1hZ2UoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2hvd05hdmlnYXRpb25BcnJvd3MoKTogdm9pZCB7XG4gICAgICAgIHRoaXMubGVmdEFycm93VmlzaWJsZSA9IHRydWVcbiAgICAgICAgdGhpcy5yaWdodEFycm93VmlzaWJsZSA9IHRydWVcbiAgICB9XG5cbiAgICBjbG9zZVZpZXdlcigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5pbWFnZXMuZm9yRWFjaChpbWFnZSA9PiBpbWFnZVsndHJhbnNpdGlvbiddID0gdW5kZWZpbmVkKVxuICAgICAgICB0aGlzLmltYWdlcy5mb3JFYWNoKGltYWdlID0+IGltYWdlWydhY3RpdmUnXSA9IGZhbHNlKVxuICAgICAgICB0aGlzLmltYWdlU2VydmljZS5zaG93SW1hZ2VWaWV3ZXIoZmFsc2UpXG4gICAgfVxuXG4gICAgb25LZXlkb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHByZXZlbnQgPSBbMzcsIDM5LCAyNywgMzYsIDM1XVxuICAgICAgICAgICAgLmZpbmQobm8gPT4gbm8gPT09IGV2ZW50LmtleUNvZGUpXG4gICAgICAgIGlmIChwcmV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2ggKHByZXZlbnQpIHtcbiAgICAgICAgICAgIGNhc2UgMzc6XG4gICAgICAgICAgICAgICAgLy8gbmF2aWdhdGUgbGVmdFxuICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGUoLTEsIGZhbHNlKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIDM5OlxuICAgICAgICAgICAgICAgIC8vIG5hdmlnYXRlIHJpZ2h0XG4gICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZSgxLCBmYWxzZSlcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAyNzpcbiAgICAgICAgICAgICAgICAvLyBlc2NcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlVmlld2VyKClcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAzNjpcbiAgICAgICAgICAgICAgICAvLyBwb3MgMVxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ3RyYW5zaXRpb24nXSA9ICdsZWF2ZVRvUmlnaHQnXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50SWR4ID0gMFxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ3RyYW5zaXRpb24nXSA9ICdlbnRlckZyb21MZWZ0J1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlSW1hZ2UoKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIDM1OlxuICAgICAgICAgICAgICAgIC8vIGVuZFxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ3RyYW5zaXRpb24nXSA9ICdsZWF2ZVRvTGVmdCdcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRJZHggPSB0aGlzLmltYWdlcy5sZW5ndGggLSAxXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XVsndHJhbnNpdGlvbiddID0gJ2VudGVyRnJvbVJpZ2h0J1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlSW1hZ2UoKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGhpZGVOYXZpZ2F0aW9uQXJyb3dzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmxlZnRBcnJvd1Zpc2libGUgPSBmYWxzZVxuICAgICAgICB0aGlzLnJpZ2h0QXJyb3dWaXNpYmxlID0gZmFsc2VcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZUltYWdlKCk6IHZvaWQge1xuICAgICAgICAvLyB3YWl0IGZvciBhbmltYXRpb24gdG8gZW5kXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVRdWFsaXR5KClcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ2FjdGl2ZSddID0gdHJ1ZVxuICAgICAgICAgICAgdGhpcy5pbWFnZXMuZm9yRWFjaChpbWFnZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGltYWdlICE9IHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF0pIHtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VbJ2FjdGl2ZSddID0gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSAwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSwgNTAwKVxuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlUXVhbGl0eSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgc2NyZWVuV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aFxuICAgICAgICBjb25zdCBzY3JlZW5IZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHRcblxuICAgICAgICBzd2l0Y2ggKHRoaXMucXVhbGl0eVNlbGVjdGVkKSB7XG4gICAgICAgICAgICBjYXNlICdhdXRvJzoge1xuICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlTZWxlY3RlZCA9ICdwcmV2aWV3X3h4cydcblxuICAgICAgICAgICAgICAgIGlmIChzY3JlZW5XaWR0aCA+IHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ3ByZXZpZXdfeHhzJ10ud2lkdGggJiZcbiAgICAgICAgICAgICAgICAgICAgc2NyZWVuSGVpZ2h0ID4gdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XVsncHJldmlld194eHMnXS5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeVNlbGVjdGVkID0gJ3ByZXZpZXdfeHMnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzY3JlZW5XaWR0aCA+IHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ3ByZXZpZXdfeHMnXS53aWR0aCAmJlxuICAgICAgICAgICAgICAgICAgICBzY3JlZW5IZWlnaHQgPiB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWydwcmV2aWV3X3hzJ10uaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlTZWxlY3RlZCA9ICdwcmV2aWV3X3MnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzY3JlZW5XaWR0aCA+IHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ3ByZXZpZXdfcyddLndpZHRoICYmXG4gICAgICAgICAgICAgICAgICAgIHNjcmVlbkhlaWdodCA+IHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ3ByZXZpZXdfcyddLmhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhdGVnb3J5U2VsZWN0ZWQgPSAncHJldmlld19tJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2NyZWVuV2lkdGggPiB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWydwcmV2aWV3X20nXS53aWR0aCAmJlxuICAgICAgICAgICAgICAgICAgICBzY3JlZW5IZWlnaHQgPiB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWydwcmV2aWV3X20nXS5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeVNlbGVjdGVkID0gJ3ByZXZpZXdfbCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNjcmVlbldpZHRoID4gdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XVsncHJldmlld19sJ10ud2lkdGggJiZcbiAgICAgICAgICAgICAgICAgICAgc2NyZWVuSGVpZ2h0ID4gdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XVsncHJldmlld19sJ10uaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlTZWxlY3RlZCA9ICdwcmV2aWV3X3hsJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2NyZWVuV2lkdGggPiB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWydwcmV2aWV3X3hsJ10ud2lkdGggJiZcbiAgICAgICAgICAgICAgICAgICAgc2NyZWVuSGVpZ2h0ID4gdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XVsncHJldmlld194bCddLmhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhdGVnb3J5U2VsZWN0ZWQgPSAncmF3J1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnbG93Jzoge1xuICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlTZWxlY3RlZCA9ICdwcmV2aWV3X3h4cydcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnbWlkJzoge1xuICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlTZWxlY3RlZCA9ICdwcmV2aWV3X20nXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2hpZ2gnOiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeVNlbGVjdGVkID0gJ3JhdydcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICB0aGlzLmNhdGVnb3J5U2VsZWN0ZWQgPSAncHJldmlld19tJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuIl19