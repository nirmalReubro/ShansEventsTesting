import { Injectable, ChangeDetectorRef, Component, EventEmitter, HostListener, Input, Output, ViewChild, ViewChildren, NgModule } from '@angular/core';
import { Subject } from 'rxjs';
import { HttpClient, HttpClientModule } from '@angular/common/http';
import { animate, state, style, transition, trigger } from '@angular/animations';
import { FormsModule } from '@angular/forms';
import { CommonModule } from '@angular/common';
import { BrowserAnimationsModule } from '@angular/platform-browser/animations';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var ImageService = /** @class */ (function () {
    function ImageService() {
        this.imagesUpdatedSource = new Subject();
        this.imageSelectedIndexUpdatedSource = new Subject();
        this.showImageViewerSource = new Subject();
        this.imagesUpdated$ = this.imagesUpdatedSource.asObservable();
        this.imageSelectedIndexUpdated$ = this.imageSelectedIndexUpdatedSource.asObservable();
        this.showImageViewerChanged$ = this.showImageViewerSource.asObservable();
    }
    /**
     * @param {?} images
     * @return {?}
     */
    ImageService.prototype.updateImages = /**
     * @param {?} images
     * @return {?}
     */
    function (images) {
        this.imagesUpdatedSource.next(images);
    };
    /**
     * @param {?} newIndex
     * @return {?}
     */
    ImageService.prototype.updateSelectedImageIndex = /**
     * @param {?} newIndex
     * @return {?}
     */
    function (newIndex) {
        this.imageSelectedIndexUpdatedSource.next(newIndex);
    };
    /**
     * @param {?} show
     * @return {?}
     */
    ImageService.prototype.showImageViewer = /**
     * @param {?} show
     * @return {?}
     */
    function (show) {
        this.showImageViewerSource.next(show);
    };
    ImageService.decorators = [
        { type: Injectable },
    ];
    return ImageService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var GalleryComponent = /** @class */ (function () {
    function GalleryComponent(imageService, http, changeDetectorRef) {
        this.imageService = imageService;
        this.http = http;
        this.changeDetectorRef = changeDetectorRef;
        this.gallery = [];
        this.imageDataStaticPath = 'assets/img/gallery/';
        this.imageDataCompletePath = '';
        this.dataFileName = 'data.json';
        this.images = [];
        this.minimalQualityCategory = 'preview_xxs';
        this.rowIndex = 0;
        this.rightArrowInactive = false;
        this.leftArrowInactive = false;
        this.providedImageMargin = 3;
        this.providedImageSize = 7;
        this.providedGalleryName = '';
        this.providedMetadataUri = undefined;
        this.rowsPerPage = 200;
        this.viewerChange = new EventEmitter();
    }
    /**
     * @param {?} event
     * @return {?}
     */
    GalleryComponent.prototype.triggerCycle = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.scaleGallery();
    };
    /**
     * @param {?} event
     * @return {?}
     */
    GalleryComponent.prototype.windowResize = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.render();
    };
    /**
     * @return {?}
     */
    GalleryComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.fetchDataAndRender();
        this.viewerSubscription = this.imageService.showImageViewerChanged$
            .subscribe(function (visibility) { return _this.viewerChange.emit(visibility); });
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    GalleryComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        // input params changed
        if (changes['providedGalleryName'] != undefined) {
            this.fetchDataAndRender();
        }
        else {
            this.render();
        }
    };
    /**
     * @return {?}
     */
    GalleryComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this.viewerSubscription) {
            this.viewerSubscription.unsubscribe();
        }
    };
    /**
     * @param {?} img
     * @return {?}
     */
    GalleryComponent.prototype.openImageViewer = /**
     * @param {?} img
     * @return {?}
     */
    function (img) {
        this.imageService.updateImages(this.images);
        this.imageService.updateSelectedImageIndex(this.images.indexOf(img));
        this.imageService.showImageViewer(true);
    };
    /**
     * direction (-1: left, 1: right)
     */
    /**
     * direction (-1: left, 1: right)
     * @param {?} direction
     * @return {?}
     */
    GalleryComponent.prototype.navigate = /**
     * direction (-1: left, 1: right)
     * @param {?} direction
     * @return {?}
     */
    function (direction) {
        if ((direction === 1 && this.rowIndex < this.gallery.length - this.rowsPerPage)
            || (direction === -1 && this.rowIndex > 0)) {
            this.rowIndex += (this.rowsPerPage * direction);
        }
        this.refreshNavigationErrorState();
    };
    /**
     * @return {?}
     */
    GalleryComponent.prototype.calcImageMargin = /**
     * @return {?}
     */
    function () {
        var /** @type {?} */ galleryWidth = this.getGalleryWidth();
        var /** @type {?} */ ratio = galleryWidth / 1920;
        return Math.round(Math.max(1, this.providedImageMargin * ratio));
    };
    /**
     * @return {?}
     */
    GalleryComponent.prototype.fetchDataAndRender = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.imageDataCompletePath = this.providedMetadataUri;
        if (!this.providedMetadataUri) {
            this.imageDataCompletePath = this.providedGalleryName !== '' ?
                this.imageDataStaticPath + this.providedGalleryName + "/" + this.dataFileName :
                this.imageDataStaticPath + this.dataFileName;
        }
        this.http.get(this.imageDataCompletePath)
            .subscribe(function (data) {
            _this.images = data;
            _this.imageService.updateImages(_this.images);
            _this.images.forEach(function (image) {
                image['galleryImageLoaded'] = false;
                image['viewerImageLoaded'] = false;
                image['srcAfterFocus'] = '';
            });
            // twice, single leads to different strange browser behaviour
            // twice, single leads to different strange browser behaviour
            _this.render();
            _this.render();
        }, function (err) {
            if (_this.providedMetadataUri) {
                console.error("Provided endpoint '" + _this.providedMetadataUri + "' did not serve metadata correctly or in the expected format.\n      See here for more information: https://github.com/BenjaminBrandmeier/angular2-image-gallery/blob/master/docs/externalDataSource.md,\n      Original error: " + err);
            }
            else {
                console.error("Did you run the convert script from angular2-image-gallery for your images first? Original error: " + err);
            }
        }, function () { return undefined; });
    };
    /**
     * @return {?}
     */
    GalleryComponent.prototype.render = /**
     * @return {?}
     */
    function () {
        this.gallery = [];
        var /** @type {?} */ tempRow = [this.images[0]];
        var /** @type {?} */ currentRowIndex = 0;
        var /** @type {?} */ i = 0;
        for (i; i < this.images.length; i++) {
            while (this.images[i + 1] && this.shouldAddCandidate(tempRow, this.images[i + 1])) {
                i++;
            }
            if (this.images[i + 1]) {
                tempRow.pop();
            }
            this.gallery[currentRowIndex++] = tempRow;
            tempRow = [this.images[i + 1]];
        }
        this.scaleGallery();
    };
    /**
     * @param {?} imgRow
     * @param {?} candidate
     * @return {?}
     */
    GalleryComponent.prototype.shouldAddCandidate = /**
     * @param {?} imgRow
     * @param {?} candidate
     * @return {?}
     */
    function (imgRow, candidate) {
        var /** @type {?} */ oldDifference = this.calcIdealHeight() - this.calcRowHeight(imgRow);
        imgRow.push(candidate);
        var /** @type {?} */ newDifference = this.calcIdealHeight() - this.calcRowHeight(imgRow);
        return Math.abs(oldDifference) > Math.abs(newDifference);
    };
    /**
     * @param {?} imgRow
     * @return {?}
     */
    GalleryComponent.prototype.calcRowHeight = /**
     * @param {?} imgRow
     * @return {?}
     */
    function (imgRow) {
        var /** @type {?} */ originalRowWidth = this.calcOriginalRowWidth(imgRow);
        var /** @type {?} */ ratio = (this.getGalleryWidth() - (imgRow.length - 1) * this.calcImageMargin()) / originalRowWidth;
        var /** @type {?} */ rowHeight = imgRow[0][this.minimalQualityCategory]['height'] * ratio;
        return rowHeight;
    };
    /**
     * @param {?} imgRow
     * @return {?}
     */
    GalleryComponent.prototype.calcOriginalRowWidth = /**
     * @param {?} imgRow
     * @return {?}
     */
    function (imgRow) {
        var _this = this;
        var /** @type {?} */ originalRowWidth = 0;
        imgRow.forEach(function (img) {
            var /** @type {?} */ individualRatio = _this.calcIdealHeight() / img[_this.minimalQualityCategory]['height'];
            img[_this.minimalQualityCategory]['width'] = img[_this.minimalQualityCategory]['width'] * individualRatio;
            img[_this.minimalQualityCategory]['height'] = _this.calcIdealHeight();
            originalRowWidth += img[_this.minimalQualityCategory]['width'];
        });
        return originalRowWidth;
    };
    /**
     * @return {?}
     */
    GalleryComponent.prototype.calcIdealHeight = /**
     * @return {?}
     */
    function () {
        return this.getGalleryWidth() / (80 / this.providedImageSize) + 100;
    };
    /**
     * @return {?}
     */
    GalleryComponent.prototype.getGalleryWidth = /**
     * @return {?}
     */
    function () {
        if (this.galleryContainer.nativeElement.clientWidth === 0) {
            // for IE11
            return this.galleryContainer.nativeElement.scrollWidth;
        }
        return this.galleryContainer.nativeElement.clientWidth;
    };
    /**
     * @return {?}
     */
    GalleryComponent.prototype.scaleGallery = /**
     * @return {?}
     */
    function () {
        var _this = this;
        var /** @type {?} */ imageCounter = 0;
        var /** @type {?} */ maximumGalleryImageHeight = 0;
        this.gallery.slice(this.rowIndex, this.rowIndex + this.rowsPerPage)
            .forEach(function (imgRow) {
            var /** @type {?} */ originalRowWidth = _this.calcOriginalRowWidth(imgRow);
            if (imgRow !== _this.gallery[_this.gallery.length - 1]) {
                var /** @type {?} */ ratio_1 = (_this.getGalleryWidth() - (imgRow.length - 1) * _this.calcImageMargin()) / originalRowWidth;
                imgRow.forEach(function (img) {
                    img['width'] = img[_this.minimalQualityCategory]['width'] * ratio_1;
                    img['height'] = img[_this.minimalQualityCategory]['height'] * ratio_1;
                    maximumGalleryImageHeight = Math.max(maximumGalleryImageHeight, img['height']);
                    _this.checkForAsyncLoading(img, imageCounter++);
                });
            }
            else {
                imgRow.forEach(function (img) {
                    img.width = img[_this.minimalQualityCategory]['width'];
                    img.height = img[_this.minimalQualityCategory]['height'];
                    maximumGalleryImageHeight = Math.max(maximumGalleryImageHeight, img['height']);
                    _this.checkForAsyncLoading(img, imageCounter++);
                });
            }
        });
        this.minimalQualityCategory = maximumGalleryImageHeight > 375 ? 'preview_xs' : 'preview_xxs';
        this.refreshNavigationErrorState();
        this.changeDetectorRef.detectChanges();
    };
    /**
     * @param {?} image
     * @param {?} imageCounter
     * @return {?}
     */
    GalleryComponent.prototype.checkForAsyncLoading = /**
     * @param {?} image
     * @param {?} imageCounter
     * @return {?}
     */
    function (image, imageCounter) {
        var /** @type {?} */ imageElements = this.imageElements.toArray();
        if (image['galleryImageLoaded'] ||
            (imageElements.length > 0 &&
                imageElements[imageCounter] &&
                this.isScrolledIntoView(imageElements[imageCounter].nativeElement))) {
            image['galleryImageLoaded'] = true;
            image['srcAfterFocus'] = image[this.minimalQualityCategory]['path'];
        }
        else {
            image['srcAfterFocus'] = '';
        }
    };
    /**
     * @param {?} element
     * @return {?}
     */
    GalleryComponent.prototype.isScrolledIntoView = /**
     * @param {?} element
     * @return {?}
     */
    function (element) {
        var /** @type {?} */ elementTop = element.getBoundingClientRect().top;
        var /** @type {?} */ elementBottom = element.getBoundingClientRect().bottom;
        return elementTop < window.innerHeight && elementBottom >= 0 && (elementBottom > 0 || elementTop > 0);
    };
    /**
     * @return {?}
     */
    GalleryComponent.prototype.refreshNavigationErrorState = /**
     * @return {?}
     */
    function () {
        this.leftArrowInactive = this.rowIndex == 0;
        this.rightArrowInactive = this.rowIndex > (this.gallery.length - this.rowsPerPage);
    };
    GalleryComponent.decorators = [
        { type: Component, args: [{
                    selector: 'gallery',
                    template: "<div #galleryContainer class=\"galleryContainer\">\n    <div class=\"innerGalleryContainer\">\n        <div *ngFor='let imgrow of gallery | slice:rowIndex:rowIndex+rowsPerPage; let i = index'\n             class=\"imagerow\"\n             [style.margin-bottom.px]=\"calcImageMargin()\">\n            <img #imageElement\n                 *ngFor='let img of imgrow; let j = index'\n                 class=\"thumbnail\"\n                 [style.width.px]=\"img['width']\"\n                 [style.height.px]=\"img['height']\"\n                 (click)=\"openImageViewer(img)\"\n                 [src]=\"img['srcAfterFocus']\"\n                 [style.background]=\"img.dominantColor\"\n                 [style.margin-right.px]=\"calcImageMargin()\"/>\n        </div>\n    </div>\n\n    <div class=\"pagerContainer\" *ngIf=\"(!rightArrowInactive || !leftArrowInactive)\">\n        <img [ngClass]=\"{'inactive': leftArrowInactive}\" class=\"pager left\"\n             src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxzdmcgaWQ9IkxheWVyXzEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQ4IDQ4OyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNDggNDgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnPjxwYXRoIGQ9Ik0yNCw0NkMxMS45LDQ2LDIsMzYuMSwyLDI0UzExLjksMiwyNCwyczIyLDkuOSwyMiwyMlMzNi4xLDQ2LDI0LDQ2eiBNMjQsNEMxMyw0LDQsMTMsNCwyNGMwLDExLDksMjAsMjAsMjAgICBjMTEsMCwyMC05LDIwLTIwQzQ0LDEzLDM1LDQsMjQsNHoiLz48L2c+PGc+PHBvbHlnb24gcG9pbnRzPSIyNy42LDM2LjcgMTQuOSwyNCAyNy42LDExLjMgMjkuMSwxMi43IDE3LjgsMjQgMjkuMSwzNS4zICAiLz48L2c+PC9zdmc+\"\n             (click)=\"navigate(-1)\"/>\n        <img [ngClass]=\"{'inactive': rightArrowInactive}\" class=\"pager right\"\n             src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxzdmcgaWQ9IkxheWVyXzEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQ4IDQ4OyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNDggNDgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnPjxwYXRoIGQ9Ik0yNCw0NkMxMS45LDQ2LDIsMzYuMSwyLDI0UzExLjksMiwyNCwyczIyLDkuOSwyMiwyMlMzNi4xLDQ2LDI0LDQ2eiBNMjQsNEMxMyw0LDQsMTMsNCwyNHM5LDIwLDIwLDIwczIwLTksMjAtMjAgICBTMzUsNCwyNCw0eiIvPjwvZz48Zz48cG9seWdvbiBwb2ludHM9IjIxLjQsMzYuNyAxOS45LDM1LjMgMzEuMiwyNCAxOS45LDEyLjcgMjEuNCwxMS4zIDM0LjEsMjQgICIvPjwvZz48L3N2Zz4=\"\n             (click)=\"navigate(1)\"/>\n    </div>\n</div>\n\n<viewer></viewer>\n",
                    styles: [".innerGalleryContainer{position:relative}.galleryContainer{height:100%;width:100%;overflow:hidden}.innerGalleryContainer img:last-child{margin-right:-1px!important}.galleryContainer img:hover{-webkit-filter:brightness(50%);filter:brightness(50%);transition:all ease-out .2s;cursor:pointer}.imagerow{margin-right:1px;overflow:hidden;display:flex}::-webkit-scrollbar{display:none}.asyncLoadingContainer{position:absolute;background-color:transparent;height:0;width:0;bottom:120px}.pagerContainer{margin:40px auto;width:180px}.pager{display:block;height:60px}@media (max-width:700px){.pagerContainer{margin:40px auto;width:150px}.pager{display:block;height:45px}}.pager.inactive{opacity:.15}.pager.left{float:left}.pager.right{float:right}"]
                },] },
    ];
    /** @nocollapse */
    GalleryComponent.ctorParameters = function () { return [
        { type: ImageService },
        { type: HttpClient },
        { type: ChangeDetectorRef }
    ]; };
    GalleryComponent.propDecorators = {
        providedImageMargin: [{ type: Input, args: ['flexBorderSize',] }],
        providedImageSize: [{ type: Input, args: ['flexImageSize',] }],
        providedGalleryName: [{ type: Input, args: ['galleryName',] }],
        providedMetadataUri: [{ type: Input, args: ['metadataUri',] }],
        rowsPerPage: [{ type: Input, args: ['maxRowsPerPage',] }],
        viewerChange: [{ type: Output }],
        galleryContainer: [{ type: ViewChild, args: ['galleryContainer',] }],
        imageElements: [{ type: ViewChildren, args: ['imageElement',] }],
        triggerCycle: [{ type: HostListener, args: ['window:scroll', ['$event'],] }],
        windowResize: [{ type: HostListener, args: ['window:resize', ['$event'],] }]
    };
    return GalleryComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var ViewerComponent = /** @class */ (function () {
    function ViewerComponent(imageService) {
        var _this = this;
        this.imageService = imageService;
        this.images = [{}];
        this.currentIdx = 0;
        this.leftArrowVisible = true;
        this.rightArrowVisible = true;
        this.categorySelected = 'preview_xxs';
        this.qualitySelectorShown = false;
        this.qualitySelected = 'auto';
        imageService.imagesUpdated$.subscribe(function (images) {
            _this.images = images;
        });
        imageService.imageSelectedIndexUpdated$.subscribe(function (newIndex) {
            _this.currentIdx = newIndex;
            _this.images.forEach(function (image) { return image['active'] = false; });
            _this.images[_this.currentIdx]['active'] = true;
            _this.transform = 0;
            _this.updateQuality();
        });
        imageService.showImageViewerChanged$.subscribe(function (showViewer) {
            _this.showViewer = showViewer;
        });
        this.math = Math;
    }
    Object.defineProperty(ViewerComponent.prototype, "leftArrowActive", {
        get: /**
         * @return {?}
         */
        function () {
            return this.currentIdx > 0;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ViewerComponent.prototype, "rightArrowActive", {
        get: /**
         * @return {?}
         */
        function () {
            return this.currentIdx < this.images.length - 1;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} swipe
     * @return {?}
     */
    ViewerComponent.prototype.pan = /**
     * @param {?} swipe
     * @return {?}
     */
    function (swipe) {
        this.transform = swipe.deltaX;
    };
    /**
     * @return {?}
     */
    ViewerComponent.prototype.onResize = /**
     * @return {?}
     */
    function () {
        this.images.forEach(function (image) {
            image['viewerImageLoaded'] = false;
            image['active'] = false;
        });
        this.updateImage();
    };
    /**
     * @return {?}
     */
    ViewerComponent.prototype.showQualitySelector = /**
     * @return {?}
     */
    function () {
        this.qualitySelectorShown = !this.qualitySelectorShown;
    };
    /**
     * @param {?} newQuality
     * @return {?}
     */
    ViewerComponent.prototype.qualityChanged = /**
     * @param {?} newQuality
     * @return {?}
     */
    function (newQuality) {
        this.qualitySelected = newQuality;
        this.updateImage();
    };
    /**
     * @param {?} image
     * @return {?}
     */
    ViewerComponent.prototype.imageLoaded = /**
     * @param {?} image
     * @return {?}
     */
    function (image) {
        image['viewerImageLoaded'] = true;
    };
    /**
     * direction (-1: left, 1: right)
     * swipe (user swiped)
     */
    /**
     * direction (-1: left, 1: right)
     * swipe (user swiped)
     * @param {?} direction
     * @param {?} swipe
     * @return {?}
     */
    ViewerComponent.prototype.navigate = /**
     * direction (-1: left, 1: right)
     * swipe (user swiped)
     * @param {?} direction
     * @param {?} swipe
     * @return {?}
     */
    function (direction, swipe) {
        if ((direction === 1 && this.currentIdx < this.images.length - 1) ||
            (direction === -1 && this.currentIdx > 0)) {
            if (direction == -1) {
                this.images[this.currentIdx]['transition'] = 'leaveToRight';
                this.images[this.currentIdx - 1]['transition'] = 'enterFromLeft';
            }
            else {
                this.images[this.currentIdx]['transition'] = 'leaveToLeft';
                this.images[this.currentIdx + 1]['transition'] = 'enterFromRight';
            }
            this.currentIdx += direction;
            if (swipe) {
                this.hideNavigationArrows();
            }
            else {
                this.showNavigationArrows();
            }
            this.updateImage();
        }
    };
    /**
     * @return {?}
     */
    ViewerComponent.prototype.showNavigationArrows = /**
     * @return {?}
     */
    function () {
        this.leftArrowVisible = true;
        this.rightArrowVisible = true;
    };
    /**
     * @return {?}
     */
    ViewerComponent.prototype.closeViewer = /**
     * @return {?}
     */
    function () {
        this.images.forEach(function (image) { return image['transition'] = undefined; });
        this.images.forEach(function (image) { return image['active'] = false; });
        this.imageService.showImageViewer(false);
    };
    /**
     * @param {?} event
     * @return {?}
     */
    ViewerComponent.prototype.onKeydown = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        var /** @type {?} */ prevent = [37, 39, 27, 36, 35]
            .find(function (no) { return no === event.keyCode; });
        if (prevent) {
            event.preventDefault();
        }
        switch (prevent) {
            case 37:
                // navigate left
                this.navigate(-1, false);
                break;
            case 39:
                // navigate right
                this.navigate(1, false);
                break;
            case 27:
                // esc
                this.closeViewer();
                break;
            case 36:
                // pos 1
                this.images[this.currentIdx]['transition'] = 'leaveToRight';
                this.currentIdx = 0;
                this.images[this.currentIdx]['transition'] = 'enterFromLeft';
                this.updateImage();
                break;
            case 35:
                // end
                this.images[this.currentIdx]['transition'] = 'leaveToLeft';
                this.currentIdx = this.images.length - 1;
                this.images[this.currentIdx]['transition'] = 'enterFromRight';
                this.updateImage();
                break;
            default:
                break;
        }
    };
    /**
     * @return {?}
     */
    ViewerComponent.prototype.hideNavigationArrows = /**
     * @return {?}
     */
    function () {
        this.leftArrowVisible = false;
        this.rightArrowVisible = false;
    };
    /**
     * @return {?}
     */
    ViewerComponent.prototype.updateImage = /**
     * @return {?}
     */
    function () {
        var _this = this;
        // wait for animation to end
        setTimeout(function () {
            _this.updateQuality();
            _this.images[_this.currentIdx]['active'] = true;
            _this.images.forEach(function (image) {
                if (image != _this.images[_this.currentIdx]) {
                    image['active'] = false;
                    _this.transform = 0;
                }
            });
        }, 500);
    };
    /**
     * @return {?}
     */
    ViewerComponent.prototype.updateQuality = /**
     * @return {?}
     */
    function () {
        var /** @type {?} */ screenWidth = window.innerWidth;
        var /** @type {?} */ screenHeight = window.innerHeight;
        switch (this.qualitySelected) {
            case 'auto': {
                this.categorySelected = 'preview_xxs';
                if (screenWidth > this.images[this.currentIdx]['preview_xxs'].width &&
                    screenHeight > this.images[this.currentIdx]['preview_xxs'].height) {
                    this.categorySelected = 'preview_xs';
                }
                if (screenWidth > this.images[this.currentIdx]['preview_xs'].width &&
                    screenHeight > this.images[this.currentIdx]['preview_xs'].height) {
                    this.categorySelected = 'preview_s';
                }
                if (screenWidth > this.images[this.currentIdx]['preview_s'].width &&
                    screenHeight > this.images[this.currentIdx]['preview_s'].height) {
                    this.categorySelected = 'preview_m';
                }
                if (screenWidth > this.images[this.currentIdx]['preview_m'].width &&
                    screenHeight > this.images[this.currentIdx]['preview_m'].height) {
                    this.categorySelected = 'preview_l';
                }
                if (screenWidth > this.images[this.currentIdx]['preview_l'].width &&
                    screenHeight > this.images[this.currentIdx]['preview_l'].height) {
                    this.categorySelected = 'preview_xl';
                }
                if (screenWidth > this.images[this.currentIdx]['preview_xl'].width &&
                    screenHeight > this.images[this.currentIdx]['preview_xl'].height) {
                    this.categorySelected = 'raw';
                }
                break;
            }
            case 'low': {
                this.categorySelected = 'preview_xxs';
                break;
            }
            case 'mid': {
                this.categorySelected = 'preview_m';
                break;
            }
            case 'high': {
                this.categorySelected = 'raw';
                break;
            }
            default: {
                this.categorySelected = 'preview_m';
            }
        }
    };
    ViewerComponent.decorators = [
        { type: Component, args: [{
                    selector: 'viewer',
                    template: "<div class=\"outerContainer\" (window:resize)=\"onResize()\" *ngIf=\"showViewer\" [@showViewerTransition]=\"showViewer\">\n\n\n    <img [ngClass]=\"{'activeArrow': leftArrowActive}\" class=\"arrow left\"\n         src=\"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0cHgiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjx0aXRsZS8+PGRlc2MvPiAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgaWQ9Im1pdSIgc3Ryb2tlPSIjNTU1IiBzdHJva2Utd2lkdGg9IjAuMiI+ICAgICA8ZyBpZD0iQXJ0Ym9hcmQtMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM5NS4wMDAwMDAsIC0xOTEuMDAwMDAwKSI+PGcgaWQ9InNsaWNlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMTUuMDAwMDAwLCAxMTkuMDAwMDAwKSIvPjxwYXRoICAgICAgIGQ9Ik0zOTYsMjAyLjUgQzM5NiwxOTYuMTQ4NzI1IDQwMS4xNDg3MjUsMTkxIDQwNy41LDE5MSBDNDEzLjg1MTI3NSwxOTEgNDE5LDE5Ni4xNDg3MjUgNDE5LDIwMi41IEM0MTksMjA4Ljg1MTI3NSA0MTMuODUxMjc1LDIxNCA0MDcuNSwyMTQgQzQwMS4xNDg3MjUsMjE0IDM5NiwyMDguODUxMjc1IDM5NiwyMDIuNSBaIE00MDguNjU2ODU0LDE5Ni44NDMxNDYgTDQxMC4wNzEwNjgsMTk4LjI1NzM1OSBMNDA1LjgyODQyNywyMDIuNSBMNDEwLjA3MTA2OCwyMDYuNzQyNjQxIEw0MDguNjU2ODU0LDIwOC4xNTY4NTQgTDQwMywyMDIuNSBMNDA4LjY1Njg1NCwxOTYuODQzMTQ2IFoiICAgICAgIGZpbGw9IiNhYWEiICAgICAgIGlkPSJjaXJjbGUtYmFjay1hcnJvdy1nbHlwaCIvPjwvZz4gICA8L2c+IDwvc3ZnPg==\"\n         [hidden]=\"!leftArrowVisible\" (click)=\"navigate(-1, false)\"/>\n    <img [ngClass]=\"{'activeArrow': rightArrowActive}\" class=\"arrow right\"\n         src=\"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0cHgiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjx0aXRsZS8+PGRlc2MvPjxkZWZzLz4gICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGlkPSJtaXUiIHN0cm9rZT0iIzU1NSIgc3Ryb2tlLXdpZHRoPSIwLjIiPiAgICAgPGcgaWQ9IkFydGJvYXJkLTEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00NjcuMDAwMDAwLCAtMTkxLjAwMDAwMCkiPjxnIGlkPSJzbGljZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjE1LjAwMDAwMCwgMTE5LjAwMDAwMCkiLz48cGF0aCAgICAgICBkPSJNNDY4LDIwMi41IEM0NjgsMTk2LjE0ODcyNSA0NzMuMTQ4NzI1LDE5MSA0NzkuNSwxOTEgQzQ4NS44NTEyNzUsMTkxIDQ5MSwxOTYuMTQ4NzI1IDQ5MSwyMDIuNSBDNDkxLDIwOC44NTEyNzUgNDg1Ljg1MTI3NSwyMTQgNDc5LjUsMjE0IEM0NzMuMTQ4NzI1LDIxNCA0NjgsMjA4Ljg1MTI3NSA0NjgsMjAyLjUgWiBNNDgwLjY1Njg1NCwxOTYuODQzMTQ2IEw0ODIuMDcxMDY4LDE5OC4yNTczNTkgTDQ3Ny44Mjg0MjcsMjAyLjUgTDQ4Mi4wNzEwNjgsMjA2Ljc0MjY0MSBMNDgwLjY1Njg1NCwyMDguMTU2ODU0IEw0NzUsMjAyLjUgTDQ4MC42NTY4NTQsMTk2Ljg0MzE0NiBaIiAgICAgICBmaWxsPSIjYWFhIiAgICAgICBpZD0iY2lyY2xlLW5leHQtYXJyb3ctZGlzY2xvc3VyZS1nbHlwaCIgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDc5LjUwMDAwMCwgMjAyLjUwMDAwMCkgc2NhbGUoLTEsIDEpIHRyYW5zbGF0ZSgtNDc5LjUwMDAwMCwgLTIwMi41MDAwMDApICIvPjwvZz4gICA8L2c+IDwvc3ZnPg==\"\n         [hidden]=\"!rightArrowVisible\" (click)=\"navigate(1, false)\"/>\n\n    <div class=\"buttonContainer\">\n        <img class=\"action close\"\n             src=\"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjMwcHgiIGlkPSJMYXllcl8xIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgdmVyc2lvbj0iMS4xIiBmaWxsPSIjYWFhIiB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgd2lkdGg9IjI0cHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPiAgPHBhdGggICAgc3Ryb2tlLXdpZHRoPSIzMCIgc3Ryb2tlPSIjNDQ0IiAgICBkPSJNNDM3LjUsMzg2LjZMMzA2LjksMjU2bDEzMC42LTEzMC42YzE0LjEtMTQuMSwxNC4xLTM2LjgsMC01MC45Yy0xNC4xLTE0LjEtMzYuOC0xNC4xLTUwLjksMEwyNTYsMjA1LjFMMTI1LjQsNzQuNSAgYy0xNC4xLTE0LjEtMzYuOC0xNC4xLTUwLjksMGMtMTQuMSwxNC4xLTE0LjEsMzYuOCwwLDUwLjlMMjA1LjEsMjU2TDc0LjUsMzg2LjZjLTE0LjEsMTQuMS0xNC4xLDM2LjgsMCw1MC45ICBjMTQuMSwxNC4xLDM2LjgsMTQuMSw1MC45LDBMMjU2LDMwNi45bDEzMC42LDEzMC42YzE0LjEsMTQuMSwzNi44LDE0LjEsNTAuOSwwQzQ1MS41LDQyMy40LDQ1MS41LDQwMC42LDQzNy41LDM4Ni42eiIvPjwvc3ZnPg==\"\n             (click)=\"closeViewer()\"/>\n    </div>\n\n    <div class=\"imageContainer\"\n         (click)=\"showNavigationArrows()\"\n         (swipeleft)=\"navigate(1, $event)\"\n         (swiperight)=\"navigate(-1, $event)\"\n         (pan)=\"pan($event)\">\n\n        <div *ngFor='let img of images; let j = index'\n             class=\"image\"\n             [class.active]=\"img['active']\"\n             [style.background-image]=\"img['viewerImageLoaded'] ? 'url('+img[categorySelected]['path']+')' : math.abs(currentIdx-j) <=1 ? 'url('+img['preview_xxs']['path']+')' : ''\"\n             [style.left]=\"transform+'px'\"\n             [@imageTransition]=\"img['transition']\"></div>\n\n        <img *ngFor='let img of images; let j = index'\n             class=\"preloading-image\"\n             (load)=\"imageLoaded(img)\"\n             src=\"{{ math.abs(currentIdx-j) <=1 ? img[categorySelected]['path'] : ''}}\"/>\n    </div>\n</div>\n\n",
                    styles: [".outerContainer{top:0;bottom:0;left:0;right:0;height:100%;width:100%;position:fixed;background-color:rgba(0,0,0,.95);font-family:sans-serif;z-index:1031}.imageContainer{position:absolute;float:none;top:0;bottom:0;left:0;right:0}.imageContainer .image,.imageContainer .preloading-image{visibility:hidden}.imageContainer .image.active{position:absolute;visibility:visible;background-repeat:no-repeat;background-size:contain;background-position:center;margin:auto;left:0;right:0;top:0;bottom:0;height:100%;width:100%;opacity:1}.arrow{opacity:0}.arrow:hover{cursor:pointer}.outerContainer:hover .arrow.activeArrow{height:calc(20px + 1.5vw);position:absolute;top:calc(50% - (20px + 1.5vw)/ 2);bottom:50%;z-index:1;opacity:1;transition:all ease-out .5s}.arrow.left{left:2vw}.arrow.right{right:2vw}.arrow:not(.activeArrow):hover{opacity:0;cursor:pointer;transition:all ease-out .5s}.buttonContainer{position:absolute;top:20px;right:20px;height:20px;text-align:center;opacity:1;z-index:200;transition:all ease-out .5s}.buttonContainer .action{height:100%;cursor:pointer;vertical-align:top}.buttonContainer .action:focus{outline:0}.buttonContainer .action:hover{background-color:#222;transition:all ease-out .3s}.buttonContainer .action.close{width:26px;height:26px}md-button-toggle.checked{background-color:#a0a0a0}.menuButton{position:absolute;bottom:20px;right:20px;text-align:center;opacity:1;z-index:200;transition:all ease-out .5s}@font-face{font-family:'Material Icons';font-style:normal;font-weight:400;src:local('Material Icons'),local('MaterialIcons-Regular'),url(https://fonts.gstatic.com/s/materialicons/v19/2fcrYFNaTjcS6g4U3t-Y5ZjZjT5FdEJ140U2DJYC3mY.woff2) format('woff2')}.material-icons{font-family:'Material Icons';font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased}"],
                    host: {
                        '(document:keydown)': 'onKeydown($event)'
                    },
                    animations: [
                        trigger('imageTransition', [
                            state('enterFromRight', style({
                                opacity: 1,
                                transform: 'translate(0px, 0px)'
                            })),
                            state('enterFromLeft', style({
                                opacity: 1,
                                transform: 'translate(0px, 0px)'
                            })),
                            state('leaveToLeft', style({
                                opacity: 0,
                                transform: 'translate(-100px, 0px)'
                            })),
                            state('leaveToRight', style({
                                opacity: 0,
                                transform: 'translate(100px, 0px)'
                            })),
                            transition('* => enterFromRight', [
                                style({
                                    opacity: 0,
                                    transform: 'translate(30px, 0px)'
                                }),
                                animate('250ms 500ms ease-in')
                            ]),
                            transition('* => enterFromLeft', [
                                style({
                                    opacity: 0,
                                    transform: 'translate(-30px, 0px)'
                                }),
                                animate('250ms 500ms ease-in')
                            ]),
                            transition('* => leaveToLeft', [
                                style({
                                    opacity: 1
                                }),
                                animate('250ms ease-out')
                            ]),
                            transition('* => leaveToRight', [
                                style({
                                    opacity: 1
                                }),
                                animate('250ms ease-out')
                            ])
                        ]),
                        trigger('showViewerTransition', [
                            state('true', style({
                                opacity: 1
                            })),
                            state('void', style({
                                opacity: 0
                            })),
                            transition('void => *', [
                                style({
                                    opacity: 0
                                }),
                                animate('1000ms ease-in')
                            ]),
                            transition('* => void', [
                                style({
                                    opacity: 1
                                }),
                                animate('500ms ease-out')
                            ])
                        ])
                    ]
                },] },
    ];
    /** @nocollapse */
    ViewerComponent.ctorParameters = function () { return [
        { type: ImageService }
    ]; };
    return ViewerComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var Angular2ImageGalleryModule = /** @class */ (function () {
    function Angular2ImageGalleryModule() {
    }
    Angular2ImageGalleryModule.decorators = [
        { type: NgModule, args: [{
                    imports: [
                        CommonModule,
                        FormsModule,
                        HttpClientModule,
                        BrowserAnimationsModule
                    ],
                    declarations: [
                        GalleryComponent,
                        ViewerComponent
                    ],
                    providers: [
                        ImageService
                    ],
                    exports: [
                        GalleryComponent,
                        ViewerComponent
                    ]
                },] },
    ];
    return Angular2ImageGalleryModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

export { ImageService, GalleryComponent, ViewerComponent, Angular2ImageGalleryModule };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ndWxhcjItaW1hZ2UtZ2FsbGVyeS5qcy5tYXAiLCJzb3VyY2VzIjpbIm5nOi8vYW5ndWxhcjItaW1hZ2UtZ2FsbGVyeS9saWIvc2VydmljZXMvaW1hZ2Uuc2VydmljZS50cyIsIm5nOi8vYW5ndWxhcjItaW1hZ2UtZ2FsbGVyeS9saWIvZ2FsbGVyeS9nYWxsZXJ5LmNvbXBvbmVudC50cyIsIm5nOi8vYW5ndWxhcjItaW1hZ2UtZ2FsbGVyeS9saWIvdmlld2VyL3ZpZXdlci5jb21wb25lbnQudHMiLCJuZzovL2FuZ3VsYXIyLWltYWdlLWdhbGxlcnkvbGliL2FuZ3VsYXIyLWltYWdlLWdhbGxlcnkubW9kdWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJ1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3ViamVjdCB9IGZyb20gJ3J4anMnXG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBJbWFnZVNlcnZpY2Uge1xuICAgIHByaXZhdGUgaW1hZ2VzVXBkYXRlZFNvdXJjZSA9IG5ldyBTdWJqZWN0PEFycmF5PGFueT4+KClcbiAgICBwcml2YXRlIGltYWdlU2VsZWN0ZWRJbmRleFVwZGF0ZWRTb3VyY2UgPSBuZXcgU3ViamVjdDxudW1iZXI+KClcbiAgICBwcml2YXRlIHNob3dJbWFnZVZpZXdlclNvdXJjZSA9IG5ldyBTdWJqZWN0PGJvb2xlYW4+KClcblxuICAgIGltYWdlc1VwZGF0ZWQkOiBPYnNlcnZhYmxlPEFycmF5PGFueT4+ID0gdGhpcy5pbWFnZXNVcGRhdGVkU291cmNlLmFzT2JzZXJ2YWJsZSgpXG4gICAgaW1hZ2VTZWxlY3RlZEluZGV4VXBkYXRlZCQ6IE9ic2VydmFibGU8bnVtYmVyPiA9IHRoaXMuaW1hZ2VTZWxlY3RlZEluZGV4VXBkYXRlZFNvdXJjZS5hc09ic2VydmFibGUoKVxuICAgIHNob3dJbWFnZVZpZXdlckNoYW5nZWQkOiBPYnNlcnZhYmxlPGJvb2xlYW4+ID0gdGhpcy5zaG93SW1hZ2VWaWV3ZXJTb3VyY2UuYXNPYnNlcnZhYmxlKClcblxuICAgIHVwZGF0ZUltYWdlcyhpbWFnZXM6IEFycmF5PGFueT4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5pbWFnZXNVcGRhdGVkU291cmNlLm5leHQoaW1hZ2VzKVxuICAgIH1cblxuICAgIHVwZGF0ZVNlbGVjdGVkSW1hZ2VJbmRleChuZXdJbmRleDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaW1hZ2VTZWxlY3RlZEluZGV4VXBkYXRlZFNvdXJjZS5uZXh0KG5ld0luZGV4KVxuICAgIH1cblxuICAgIHNob3dJbWFnZVZpZXdlcihzaG93OiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2hvd0ltYWdlVmlld2VyU291cmNlLm5leHQoc2hvdylcbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICBDaGFuZ2VEZXRlY3RvclJlZiwgQ29tcG9uZW50LCBFbGVtZW50UmVmLCBFdmVudEVtaXR0ZXIsIEhvc3RMaXN0ZW5lcixcbiAgSW5wdXQsIE9uQ2hhbmdlcywgT25EZXN0cm95LCBPbkluaXQsIE91dHB1dCwgUXVlcnlMaXN0LCBTaW1wbGVDaGFuZ2VzLCBWaWV3Q2hpbGQsIFZpZXdDaGlsZHJlblxufSBmcm9tICdAYW5ndWxhci9jb3JlJ1xuaW1wb3J0IHsgSW1hZ2VTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvaW1hZ2Uuc2VydmljZSdcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMvaW50ZXJuYWwvU3Vic2NyaXB0aW9uJ1xuaW1wb3J0IHsgSHR0cENsaWVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJ1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2dhbGxlcnknLFxuICAgIHRlbXBsYXRlOiBgPGRpdiAjZ2FsbGVyeUNvbnRhaW5lciBjbGFzcz1cImdhbGxlcnlDb250YWluZXJcIj5cbiAgICA8ZGl2IGNsYXNzPVwiaW5uZXJHYWxsZXJ5Q29udGFpbmVyXCI+XG4gICAgICAgIDxkaXYgKm5nRm9yPSdsZXQgaW1ncm93IG9mIGdhbGxlcnkgfCBzbGljZTpyb3dJbmRleDpyb3dJbmRleCtyb3dzUGVyUGFnZTsgbGV0IGkgPSBpbmRleCdcbiAgICAgICAgICAgICBjbGFzcz1cImltYWdlcm93XCJcbiAgICAgICAgICAgICBbc3R5bGUubWFyZ2luLWJvdHRvbS5weF09XCJjYWxjSW1hZ2VNYXJnaW4oKVwiPlxuICAgICAgICAgICAgPGltZyAjaW1hZ2VFbGVtZW50XG4gICAgICAgICAgICAgICAgICpuZ0Zvcj0nbGV0IGltZyBvZiBpbWdyb3c7IGxldCBqID0gaW5kZXgnXG4gICAgICAgICAgICAgICAgIGNsYXNzPVwidGh1bWJuYWlsXCJcbiAgICAgICAgICAgICAgICAgW3N0eWxlLndpZHRoLnB4XT1cImltZ1snd2lkdGgnXVwiXG4gICAgICAgICAgICAgICAgIFtzdHlsZS5oZWlnaHQucHhdPVwiaW1nWydoZWlnaHQnXVwiXG4gICAgICAgICAgICAgICAgIChjbGljayk9XCJvcGVuSW1hZ2VWaWV3ZXIoaW1nKVwiXG4gICAgICAgICAgICAgICAgIFtzcmNdPVwiaW1nWydzcmNBZnRlckZvY3VzJ11cIlxuICAgICAgICAgICAgICAgICBbc3R5bGUuYmFja2dyb3VuZF09XCJpbWcuZG9taW5hbnRDb2xvclwiXG4gICAgICAgICAgICAgICAgIFtzdHlsZS5tYXJnaW4tcmlnaHQucHhdPVwiY2FsY0ltYWdlTWFyZ2luKClcIi8+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuXG4gICAgPGRpdiBjbGFzcz1cInBhZ2VyQ29udGFpbmVyXCIgKm5nSWY9XCIoIXJpZ2h0QXJyb3dJbmFjdGl2ZSB8fCAhbGVmdEFycm93SW5hY3RpdmUpXCI+XG4gICAgICAgIDxpbWcgW25nQ2xhc3NdPVwieydpbmFjdGl2ZSc6IGxlZnRBcnJvd0luYWN0aXZlfVwiIGNsYXNzPVwicGFnZXIgbGVmdFwiXG4gICAgICAgICAgICAgc3JjPVwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUEvUGp4emRtY2dhV1E5SWt4aGVXVnlYekVpSUhOMGVXeGxQU0psYm1GaWJHVXRZbUZqYTJkeWIzVnVaRHB1WlhjZ01DQXdJRFE0SURRNE95SWdkbVZ5YzJsdmJqMGlNUzR4SWlCMmFXVjNRbTk0UFNJd0lEQWdORGdnTkRnaUlIaHRiRHB6Y0dGalpUMGljSEpsYzJWeWRtVWlJSGh0Ykc1elBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5SWdlRzFzYm5NNmVHeHBibXM5SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpFNU9Ua3ZlR3hwYm1zaVBqeG5Qanh3WVhSb0lHUTlJazB5TkN3ME5rTXhNUzQ1TERRMkxESXNNell1TVN3eUxESTBVekV4TGprc01pd3lOQ3d5Y3pJeUxEa3VPU3d5TWl3eU1sTXpOaTR4TERRMkxESTBMRFEyZWlCTk1qUXNORU14TXl3MExEUXNNVE1zTkN3eU5HTXdMREV4TERrc01qQXNNakFzTWpBZ0lDQmpNVEVzTUN3eU1DMDVMREl3TFRJd1F6UTBMREV6TERNMUxEUXNNalFzTkhvaUx6NDhMMmMrUEdjK1BIQnZiSGxuYjI0Z2NHOXBiblJ6UFNJeU55NDJMRE0yTGpjZ01UUXVPU3d5TkNBeU55NDJMREV4TGpNZ01qa3VNU3d4TWk0M0lERTNMamdzTWpRZ01qa3VNU3d6TlM0eklDQWlMejQ4TDJjK1BDOXpkbWMrXCJcbiAgICAgICAgICAgICAoY2xpY2spPVwibmF2aWdhdGUoLTEpXCIvPlxuICAgICAgICA8aW1nIFtuZ0NsYXNzXT1cInsnaW5hY3RpdmUnOiByaWdodEFycm93SW5hY3RpdmV9XCIgY2xhc3M9XCJwYWdlciByaWdodFwiXG4gICAgICAgICAgICAgc3JjPVwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUEvUGp4emRtY2dhV1E5SWt4aGVXVnlYekVpSUhOMGVXeGxQU0psYm1GaWJHVXRZbUZqYTJkeWIzVnVaRHB1WlhjZ01DQXdJRFE0SURRNE95SWdkbVZ5YzJsdmJqMGlNUzR4SWlCMmFXVjNRbTk0UFNJd0lEQWdORGdnTkRnaUlIaHRiRHB6Y0dGalpUMGljSEpsYzJWeWRtVWlJSGh0Ykc1elBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5SWdlRzFzYm5NNmVHeHBibXM5SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpFNU9Ua3ZlR3hwYm1zaVBqeG5Qanh3WVhSb0lHUTlJazB5TkN3ME5rTXhNUzQ1TERRMkxESXNNell1TVN3eUxESTBVekV4TGprc01pd3lOQ3d5Y3pJeUxEa3VPU3d5TWl3eU1sTXpOaTR4TERRMkxESTBMRFEyZWlCTk1qUXNORU14TXl3MExEUXNNVE1zTkN3eU5ITTVMREl3TERJd0xESXdjekl3TFRrc01qQXRNakFnSUNCVE16VXNOQ3d5TkN3MGVpSXZQand2Wno0OFp6NDhjRzlzZVdkdmJpQndiMmx1ZEhNOUlqSXhMalFzTXpZdU55QXhPUzQ1TERNMUxqTWdNekV1TWl3eU5DQXhPUzQ1TERFeUxqY2dNakV1TkN3eE1TNHpJRE0wTGpFc01qUWdJQ0l2UGp3dlp6NDhMM04yWno0PVwiXG4gICAgICAgICAgICAgKGNsaWNrKT1cIm5hdmlnYXRlKDEpXCIvPlxuICAgIDwvZGl2PlxuPC9kaXY+XG5cbjx2aWV3ZXI+PC92aWV3ZXI+XG5gLFxuICAgIHN0eWxlczogW2AuaW5uZXJHYWxsZXJ5Q29udGFpbmVye3Bvc2l0aW9uOnJlbGF0aXZlfS5nYWxsZXJ5Q29udGFpbmVye2hlaWdodDoxMDAlO3dpZHRoOjEwMCU7b3ZlcmZsb3c6aGlkZGVufS5pbm5lckdhbGxlcnlDb250YWluZXIgaW1nOmxhc3QtY2hpbGR7bWFyZ2luLXJpZ2h0Oi0xcHghaW1wb3J0YW50fS5nYWxsZXJ5Q29udGFpbmVyIGltZzpob3Zlcnstd2Via2l0LWZpbHRlcjpicmlnaHRuZXNzKDUwJSk7ZmlsdGVyOmJyaWdodG5lc3MoNTAlKTt0cmFuc2l0aW9uOmFsbCBlYXNlLW91dCAuMnM7Y3Vyc29yOnBvaW50ZXJ9LmltYWdlcm93e21hcmdpbi1yaWdodDoxcHg7b3ZlcmZsb3c6aGlkZGVuO2Rpc3BsYXk6ZmxleH06Oi13ZWJraXQtc2Nyb2xsYmFye2Rpc3BsYXk6bm9uZX0uYXN5bmNMb2FkaW5nQ29udGFpbmVye3Bvc2l0aW9uOmFic29sdXRlO2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7aGVpZ2h0OjA7d2lkdGg6MDtib3R0b206MTIwcHh9LnBhZ2VyQ29udGFpbmVye21hcmdpbjo0MHB4IGF1dG87d2lkdGg6MTgwcHh9LnBhZ2Vye2Rpc3BsYXk6YmxvY2s7aGVpZ2h0OjYwcHh9QG1lZGlhIChtYXgtd2lkdGg6NzAwcHgpey5wYWdlckNvbnRhaW5lcnttYXJnaW46NDBweCBhdXRvO3dpZHRoOjE1MHB4fS5wYWdlcntkaXNwbGF5OmJsb2NrO2hlaWdodDo0NXB4fX0ucGFnZXIuaW5hY3RpdmV7b3BhY2l0eTouMTV9LnBhZ2VyLmxlZnR7ZmxvYXQ6bGVmdH0ucGFnZXIucmlnaHR7ZmxvYXQ6cmlnaHR9YF1cbn0pXG5leHBvcnQgY2xhc3MgR2FsbGVyeUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95LCBPbkNoYW5nZXMge1xuICAgIGdhbGxlcnk6IEFycmF5PGFueT4gPSBbXVxuICAgIGltYWdlRGF0YVN0YXRpY1BhdGg6IHN0cmluZyA9ICdhc3NldHMvaW1nL2dhbGxlcnkvJ1xuICAgIGltYWdlRGF0YUNvbXBsZXRlUGF0aDogc3RyaW5nID0gJydcbiAgICBkYXRhRmlsZU5hbWU6IHN0cmluZyA9ICdkYXRhLmpzb24nXG4gICAgaW1hZ2VzOiBBcnJheTxhbnk+ID0gW11cbiAgICBtaW5pbWFsUXVhbGl0eUNhdGVnb3J5ID0gJ3ByZXZpZXdfeHhzJ1xuICAgIHZpZXdlclN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uXG4gICAgcm93SW5kZXg6IG51bWJlciA9IDBcbiAgICByaWdodEFycm93SW5hY3RpdmU6IGJvb2xlYW4gPSBmYWxzZVxuICAgIGxlZnRBcnJvd0luYWN0aXZlOiBib29sZWFuID0gZmFsc2VcblxuICAgIEBJbnB1dCgnZmxleEJvcmRlclNpemUnKSBwcm92aWRlZEltYWdlTWFyZ2luOiBudW1iZXIgPSAzXG4gICAgQElucHV0KCdmbGV4SW1hZ2VTaXplJykgcHJvdmlkZWRJbWFnZVNpemU6IG51bWJlciA9IDdcbiAgICBASW5wdXQoJ2dhbGxlcnlOYW1lJykgcHJvdmlkZWRHYWxsZXJ5TmFtZTogc3RyaW5nID0gJydcbiAgICBASW5wdXQoJ21ldGFkYXRhVXJpJykgcHJvdmlkZWRNZXRhZGF0YVVyaTogc3RyaW5nID0gdW5kZWZpbmVkXG4gICAgQElucHV0KCdtYXhSb3dzUGVyUGFnZScpIHJvd3NQZXJQYWdlOiBudW1iZXIgPSAyMDBcblxuICAgIEBPdXRwdXQoKSB2aWV3ZXJDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGJvb2xlYW4+KClcblxuICAgIEBWaWV3Q2hpbGQoJ2dhbGxlcnlDb250YWluZXInKSBnYWxsZXJ5Q29udGFpbmVyOiBFbGVtZW50UmVmXG4gICAgQFZpZXdDaGlsZHJlbignaW1hZ2VFbGVtZW50JykgaW1hZ2VFbGVtZW50czogUXVlcnlMaXN0PGFueT5cblxuICAgIEBIb3N0TGlzdGVuZXIoJ3dpbmRvdzpzY3JvbGwnLCBbJyRldmVudCddKSB0cmlnZ2VyQ3ljbGUoZXZlbnQ6IGFueSk6IHZvaWQge1xuICAgICAgICB0aGlzLnNjYWxlR2FsbGVyeSgpXG4gICAgfVxuXG4gICAgQEhvc3RMaXN0ZW5lcignd2luZG93OnJlc2l6ZScsIFsnJGV2ZW50J10pIHdpbmRvd1Jlc2l6ZShldmVudDogYW55KTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVuZGVyKClcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgaW1hZ2VTZXJ2aWNlOiBJbWFnZVNlcnZpY2UsIHB1YmxpYyBodHRwOiBIdHRwQ2xpZW50LCBwdWJsaWMgY2hhbmdlRGV0ZWN0b3JSZWY6IENoYW5nZURldGVjdG9yUmVmKSB7XG4gICAgfVxuXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZmV0Y2hEYXRhQW5kUmVuZGVyKClcbiAgICAgICAgdGhpcy52aWV3ZXJTdWJzY3JpcHRpb24gPSB0aGlzLmltYWdlU2VydmljZS5zaG93SW1hZ2VWaWV3ZXJDaGFuZ2VkJFxuICAgICAgICAgICAgLnN1YnNjcmliZSgodmlzaWJpbGl0eTogYm9vbGVhbikgPT4gdGhpcy52aWV3ZXJDaGFuZ2UuZW1pdCh2aXNpYmlsaXR5KSlcbiAgICB9XG5cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XG4gICAgICAgIC8vIGlucHV0IHBhcmFtcyBjaGFuZ2VkXG4gICAgICAgIGlmIChjaGFuZ2VzWydwcm92aWRlZEdhbGxlcnlOYW1lJ10gIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmZldGNoRGF0YUFuZFJlbmRlcigpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMudmlld2VyU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnZpZXdlclN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvcGVuSW1hZ2VWaWV3ZXIoaW1nOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5pbWFnZVNlcnZpY2UudXBkYXRlSW1hZ2VzKHRoaXMuaW1hZ2VzKVxuICAgICAgICB0aGlzLmltYWdlU2VydmljZS51cGRhdGVTZWxlY3RlZEltYWdlSW5kZXgodGhpcy5pbWFnZXMuaW5kZXhPZihpbWcpKVxuICAgICAgICB0aGlzLmltYWdlU2VydmljZS5zaG93SW1hZ2VWaWV3ZXIodHJ1ZSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBkaXJlY3Rpb24gKC0xOiBsZWZ0LCAxOiByaWdodClcbiAgICAgKi9cbiAgICBuYXZpZ2F0ZShkaXJlY3Rpb246IG51bWJlcik6IHZvaWQge1xuICAgICAgICBpZiAoKGRpcmVjdGlvbiA9PT0gMSAmJiB0aGlzLnJvd0luZGV4IDwgdGhpcy5nYWxsZXJ5Lmxlbmd0aCAtIHRoaXMucm93c1BlclBhZ2UpXG4gICAgICAgICAgICB8fCAoZGlyZWN0aW9uID09PSAtMSAmJiB0aGlzLnJvd0luZGV4ID4gMCkpIHtcbiAgICAgICAgICAgIHRoaXMucm93SW5kZXggKz0gKHRoaXMucm93c1BlclBhZ2UgKiBkaXJlY3Rpb24pXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZWZyZXNoTmF2aWdhdGlvbkVycm9yU3RhdGUoKVxuICAgIH1cblxuICAgIGNhbGNJbWFnZU1hcmdpbigpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBnYWxsZXJ5V2lkdGggPSB0aGlzLmdldEdhbGxlcnlXaWR0aCgpXG4gICAgICAgIGNvbnN0IHJhdGlvID0gZ2FsbGVyeVdpZHRoIC8gMTkyMFxuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChNYXRoLm1heCgxLCB0aGlzLnByb3ZpZGVkSW1hZ2VNYXJnaW4gKiByYXRpbykpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmZXRjaERhdGFBbmRSZW5kZXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaW1hZ2VEYXRhQ29tcGxldGVQYXRoID0gdGhpcy5wcm92aWRlZE1ldGFkYXRhVXJpXG5cbiAgICAgICAgaWYgKCF0aGlzLnByb3ZpZGVkTWV0YWRhdGFVcmkpIHtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VEYXRhQ29tcGxldGVQYXRoID0gdGhpcy5wcm92aWRlZEdhbGxlcnlOYW1lICE9PSAnJyA/XG4gICAgICAgICAgICAgICAgYCR7dGhpcy5pbWFnZURhdGFTdGF0aWNQYXRoICsgdGhpcy5wcm92aWRlZEdhbGxlcnlOYW1lfS8ke3RoaXMuZGF0YUZpbGVOYW1lfWAgOlxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VEYXRhU3RhdGljUGF0aCArIHRoaXMuZGF0YUZpbGVOYW1lXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmh0dHAuZ2V0KHRoaXMuaW1hZ2VEYXRhQ29tcGxldGVQYXRoKVxuICAgICAgICAgIC5zdWJzY3JpYmUoXG4gICAgICAgICAgICAoZGF0YTogQXJyYXk8YW55PikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlcyA9IGRhdGFcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWFnZVNlcnZpY2UudXBkYXRlSW1hZ2VzKHRoaXMuaW1hZ2VzKVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VzLmZvckVhY2goaW1hZ2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIGltYWdlWydnYWxsZXJ5SW1hZ2VMb2FkZWQnXSA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgaW1hZ2VbJ3ZpZXdlckltYWdlTG9hZGVkJ10gPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgIGltYWdlWydzcmNBZnRlckZvY3VzJ10gPSAnJ1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAvLyB0d2ljZSwgc2luZ2xlIGxlYWRzIHRvIGRpZmZlcmVudCBzdHJhbmdlIGJyb3dzZXIgYmVoYXZpb3VyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGVyciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb3ZpZGVkTWV0YWRhdGFVcmkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBQcm92aWRlZCBlbmRwb2ludCAnJHt0aGlzLnByb3ZpZGVkTWV0YWRhdGFVcml9JyBkaWQgbm90IHNlcnZlIG1ldGFkYXRhIGNvcnJlY3RseSBvciBpbiB0aGUgZXhwZWN0ZWQgZm9ybWF0LlxuICAgICAgU2VlIGhlcmUgZm9yIG1vcmUgaW5mb3JtYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9CZW5qYW1pbkJyYW5kbWVpZXIvYW5ndWxhcjItaW1hZ2UtZ2FsbGVyeS9ibG9iL21hc3Rlci9kb2NzL2V4dGVybmFsRGF0YVNvdXJjZS5tZCxcbiAgICAgIE9yaWdpbmFsIGVycm9yOiAke2Vycn1gKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRGlkIHlvdSBydW4gdGhlIGNvbnZlcnQgc2NyaXB0IGZyb20gYW5ndWxhcjItaW1hZ2UtZ2FsbGVyeSBmb3IgeW91ciBpbWFnZXMgZmlyc3Q/IE9yaWdpbmFsIGVycm9yOiAke2Vycn1gKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoKSA9PiB1bmRlZmluZWQpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZ2FsbGVyeSA9IFtdXG5cbiAgICAgICAgbGV0IHRlbXBSb3cgPSBbdGhpcy5pbWFnZXNbMF1dXG4gICAgICAgIGxldCBjdXJyZW50Um93SW5kZXggPSAwXG4gICAgICAgIGxldCBpID0gMFxuXG4gICAgICAgIGZvciAoaTsgaSA8IHRoaXMuaW1hZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB3aGlsZSAodGhpcy5pbWFnZXNbaSArIDFdICYmIHRoaXMuc2hvdWxkQWRkQ2FuZGlkYXRlKHRlbXBSb3csIHRoaXMuaW1hZ2VzW2kgKyAxXSkpIHtcbiAgICAgICAgICAgICAgICBpKytcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmltYWdlc1tpICsgMV0pIHtcbiAgICAgICAgICAgICAgICB0ZW1wUm93LnBvcCgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmdhbGxlcnlbY3VycmVudFJvd0luZGV4KytdID0gdGVtcFJvd1xuXG4gICAgICAgICAgICB0ZW1wUm93ID0gW3RoaXMuaW1hZ2VzW2kgKyAxXV1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2NhbGVHYWxsZXJ5KClcbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3VsZEFkZENhbmRpZGF0ZShpbWdSb3c6IEFycmF5PGFueT4sIGNhbmRpZGF0ZTogYW55KTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IG9sZERpZmZlcmVuY2UgPSB0aGlzLmNhbGNJZGVhbEhlaWdodCgpIC0gdGhpcy5jYWxjUm93SGVpZ2h0KGltZ1JvdylcbiAgICAgICAgaW1nUm93LnB1c2goY2FuZGlkYXRlKVxuICAgICAgICBjb25zdCBuZXdEaWZmZXJlbmNlID0gdGhpcy5jYWxjSWRlYWxIZWlnaHQoKSAtIHRoaXMuY2FsY1Jvd0hlaWdodChpbWdSb3cpXG5cbiAgICAgICAgcmV0dXJuIE1hdGguYWJzKG9sZERpZmZlcmVuY2UpID4gTWF0aC5hYnMobmV3RGlmZmVyZW5jZSlcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGNSb3dIZWlnaHQoaW1nUm93OiBBcnJheTxhbnk+KTogbnVtYmVyIHtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxSb3dXaWR0aCA9IHRoaXMuY2FsY09yaWdpbmFsUm93V2lkdGgoaW1nUm93KVxuXG4gICAgICAgIGNvbnN0IHJhdGlvID0gKHRoaXMuZ2V0R2FsbGVyeVdpZHRoKCkgLSAoaW1nUm93Lmxlbmd0aCAtIDEpICogdGhpcy5jYWxjSW1hZ2VNYXJnaW4oKSkgLyBvcmlnaW5hbFJvd1dpZHRoXG4gICAgICAgIGNvbnN0IHJvd0hlaWdodCA9IGltZ1Jvd1swXVt0aGlzLm1pbmltYWxRdWFsaXR5Q2F0ZWdvcnldWydoZWlnaHQnXSAqIHJhdGlvXG5cbiAgICAgICAgcmV0dXJuIHJvd0hlaWdodFxuICAgIH1cblxuICAgIHByaXZhdGUgY2FsY09yaWdpbmFsUm93V2lkdGgoaW1nUm93OiBBcnJheTxhbnk+KTogbnVtYmVyIHtcbiAgICAgICAgbGV0IG9yaWdpbmFsUm93V2lkdGggPSAwXG4gICAgICAgIGltZ1Jvdy5mb3JFYWNoKGltZyA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbmRpdmlkdWFsUmF0aW8gPSB0aGlzLmNhbGNJZGVhbEhlaWdodCgpIC8gaW1nW3RoaXMubWluaW1hbFF1YWxpdHlDYXRlZ29yeV1bJ2hlaWdodCddXG4gICAgICAgICAgICBpbWdbdGhpcy5taW5pbWFsUXVhbGl0eUNhdGVnb3J5XVsnd2lkdGgnXSA9IGltZ1t0aGlzLm1pbmltYWxRdWFsaXR5Q2F0ZWdvcnldWyd3aWR0aCddICogaW5kaXZpZHVhbFJhdGlvXG4gICAgICAgICAgICBpbWdbdGhpcy5taW5pbWFsUXVhbGl0eUNhdGVnb3J5XVsnaGVpZ2h0J10gPSB0aGlzLmNhbGNJZGVhbEhlaWdodCgpXG4gICAgICAgICAgICBvcmlnaW5hbFJvd1dpZHRoICs9IGltZ1t0aGlzLm1pbmltYWxRdWFsaXR5Q2F0ZWdvcnldWyd3aWR0aCddXG4gICAgICAgIH0pXG5cbiAgICAgICAgcmV0dXJuIG9yaWdpbmFsUm93V2lkdGhcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGNJZGVhbEhlaWdodCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRHYWxsZXJ5V2lkdGgoKSAvICg4MCAvIHRoaXMucHJvdmlkZWRJbWFnZVNpemUpICsgMTAwXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRHYWxsZXJ5V2lkdGgoKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKHRoaXMuZ2FsbGVyeUNvbnRhaW5lci5uYXRpdmVFbGVtZW50LmNsaWVudFdpZHRoID09PSAwKSB7XG4gICAgICAgICAgICAvLyBmb3IgSUUxMVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2FsbGVyeUNvbnRhaW5lci5uYXRpdmVFbGVtZW50LnNjcm9sbFdpZHRoXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2FsbGVyeUNvbnRhaW5lci5uYXRpdmVFbGVtZW50LmNsaWVudFdpZHRoXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzY2FsZUdhbGxlcnkoKTogdm9pZCB7XG4gICAgICAgIGxldCBpbWFnZUNvdW50ZXIgPSAwXG4gICAgICAgIGxldCBtYXhpbXVtR2FsbGVyeUltYWdlSGVpZ2h0ID0gMFxuXG4gICAgICAgIHRoaXMuZ2FsbGVyeS5zbGljZSh0aGlzLnJvd0luZGV4LCB0aGlzLnJvd0luZGV4ICsgdGhpcy5yb3dzUGVyUGFnZSlcbiAgICAgICAgICAuZm9yRWFjaChpbWdSb3cgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxSb3dXaWR0aCA9IHRoaXMuY2FsY09yaWdpbmFsUm93V2lkdGgoaW1nUm93KVxuXG4gICAgICAgICAgICBpZiAoaW1nUm93ICE9PSB0aGlzLmdhbGxlcnlbdGhpcy5nYWxsZXJ5Lmxlbmd0aCAtIDFdKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmF0aW8gPSAodGhpcy5nZXRHYWxsZXJ5V2lkdGgoKSAtIChpbWdSb3cubGVuZ3RoIC0gMSkgKiB0aGlzLmNhbGNJbWFnZU1hcmdpbigpKSAvIG9yaWdpbmFsUm93V2lkdGhcblxuICAgICAgICAgICAgICAgIGltZ1Jvdy5mb3JFYWNoKChpbWc6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpbWdbJ3dpZHRoJ10gPSBpbWdbdGhpcy5taW5pbWFsUXVhbGl0eUNhdGVnb3J5XVsnd2lkdGgnXSAqIHJhdGlvXG4gICAgICAgICAgICAgICAgICAgIGltZ1snaGVpZ2h0J10gPSBpbWdbdGhpcy5taW5pbWFsUXVhbGl0eUNhdGVnb3J5XVsnaGVpZ2h0J10gKiByYXRpb1xuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtR2FsbGVyeUltYWdlSGVpZ2h0ID0gTWF0aC5tYXgobWF4aW11bUdhbGxlcnlJbWFnZUhlaWdodCwgaW1nWydoZWlnaHQnXSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja0ZvckFzeW5jTG9hZGluZyhpbWcsIGltYWdlQ291bnRlcisrKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGltZ1Jvdy5mb3JFYWNoKChpbWc6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpbWcud2lkdGggPSBpbWdbdGhpcy5taW5pbWFsUXVhbGl0eUNhdGVnb3J5XVsnd2lkdGgnXVxuICAgICAgICAgICAgICAgICAgICBpbWcuaGVpZ2h0ID0gaW1nW3RoaXMubWluaW1hbFF1YWxpdHlDYXRlZ29yeV1bJ2hlaWdodCddXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW1HYWxsZXJ5SW1hZ2VIZWlnaHQgPSBNYXRoLm1heChtYXhpbXVtR2FsbGVyeUltYWdlSGVpZ2h0LCBpbWdbJ2hlaWdodCddKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrRm9yQXN5bmNMb2FkaW5nKGltZywgaW1hZ2VDb3VudGVyKyspXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICB0aGlzLm1pbmltYWxRdWFsaXR5Q2F0ZWdvcnkgPSBtYXhpbXVtR2FsbGVyeUltYWdlSGVpZ2h0ID4gMzc1ID8gJ3ByZXZpZXdfeHMnIDogJ3ByZXZpZXdfeHhzJ1xuICAgICAgICB0aGlzLnJlZnJlc2hOYXZpZ2F0aW9uRXJyb3JTdGF0ZSgpXG5cbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKClcbiAgICB9XG5cbiAgICBwcml2YXRlIGNoZWNrRm9yQXN5bmNMb2FkaW5nKGltYWdlOiBhbnksIGltYWdlQ291bnRlcjogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGltYWdlRWxlbWVudHMgPSB0aGlzLmltYWdlRWxlbWVudHMudG9BcnJheSgpXG5cbiAgICAgICAgaWYgKGltYWdlWydnYWxsZXJ5SW1hZ2VMb2FkZWQnXSB8fFxuICAgICAgICAgICAgKGltYWdlRWxlbWVudHMubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICBpbWFnZUVsZW1lbnRzW2ltYWdlQ291bnRlcl0gJiZcbiAgICAgICAgICAgICAgdGhpcy5pc1Njcm9sbGVkSW50b1ZpZXcoaW1hZ2VFbGVtZW50c1tpbWFnZUNvdW50ZXJdLm5hdGl2ZUVsZW1lbnQpKSkge1xuICAgICAgICAgICAgaW1hZ2VbJ2dhbGxlcnlJbWFnZUxvYWRlZCddID0gdHJ1ZVxuICAgICAgICAgICAgaW1hZ2VbJ3NyY0FmdGVyRm9jdXMnXSA9IGltYWdlW3RoaXMubWluaW1hbFF1YWxpdHlDYXRlZ29yeV1bJ3BhdGgnXVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW1hZ2VbJ3NyY0FmdGVyRm9jdXMnXSA9ICcnXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGlzU2Nyb2xsZWRJbnRvVmlldyhlbGVtZW50OiBhbnkpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgZWxlbWVudFRvcCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wXG4gICAgICAgIGNvbnN0IGVsZW1lbnRCb3R0b20gPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbVxuXG4gICAgICAgIHJldHVybiBlbGVtZW50VG9wIDwgd2luZG93LmlubmVySGVpZ2h0ICYmIGVsZW1lbnRCb3R0b20gPj0gMCAmJiAoZWxlbWVudEJvdHRvbSA+IDAgfHwgZWxlbWVudFRvcCA+IDApXG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWZyZXNoTmF2aWdhdGlvbkVycm9yU3RhdGUoKTogdm9pZCB7XG4gICAgICAgIHRoaXMubGVmdEFycm93SW5hY3RpdmUgPSB0aGlzLnJvd0luZGV4ID09IDBcbiAgICAgICAgdGhpcy5yaWdodEFycm93SW5hY3RpdmUgPSB0aGlzLnJvd0luZGV4ID4gKHRoaXMuZ2FsbGVyeS5sZW5ndGggLSB0aGlzLnJvd3NQZXJQYWdlKVxuICAgIH1cbn1cbiIsImltcG9ydCB7IEltYWdlU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2ltYWdlLnNlcnZpY2UnXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAYW5ndWxhci9jb3JlJ1xuaW1wb3J0IHsgYW5pbWF0ZSwgc3RhdGUsIHN0eWxlLCB0cmFuc2l0aW9uLCB0cmlnZ2VyIH0gZnJvbSAnQGFuZ3VsYXIvYW5pbWF0aW9ucydcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICd2aWV3ZXInLFxuICAgIHRlbXBsYXRlOiBgPGRpdiBjbGFzcz1cIm91dGVyQ29udGFpbmVyXCIgKHdpbmRvdzpyZXNpemUpPVwib25SZXNpemUoKVwiICpuZ0lmPVwic2hvd1ZpZXdlclwiIFtAc2hvd1ZpZXdlclRyYW5zaXRpb25dPVwic2hvd1ZpZXdlclwiPlxuXG5cbiAgICA8aW1nIFtuZ0NsYXNzXT1cInsnYWN0aXZlQXJyb3cnOiBsZWZ0QXJyb3dBY3RpdmV9XCIgY2xhc3M9XCJhcnJvdyBsZWZ0XCJcbiAgICAgICAgIHNyYz1cImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5Qm9aV2xuYUhROUlqSTBjSGdpSUhabGNuTnBiMjQ5SWpFdU1TSWdkbWxsZDBKdmVEMGlNQ0F3SURJMElESTBJaUIzYVdSMGFEMGlNalJ3ZUNJZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWlCNGJXeHVjenB6YTJWMFkyZzlJbWgwZEhBNkx5OTNkM2N1WW05b1pXMXBZVzVqYjJScGJtY3VZMjl0TDNOclpYUmphQzl1Y3lJZ2VHMXNibk02ZUd4cGJtczlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MekU1T1RrdmVHeHBibXNpUGp4MGFYUnNaUzgrUEdSbGMyTXZQaUFnSUR4bklHWnBiR3c5SW01dmJtVWlJR1pwYkd3dGNuVnNaVDBpWlhabGJtOWtaQ0lnYVdROUltMXBkU0lnYzNSeWIydGxQU0lqTlRVMUlpQnpkSEp2YTJVdGQybGtkR2c5SWpBdU1pSStJQ0FnSUNBOFp5QnBaRDBpUVhKMFltOWhjbVF0TVNJZ2RISmhibk5tYjNKdFBTSjBjbUZ1YzJ4aGRHVW9MVE01TlM0d01EQXdNREFzSUMweE9URXVNREF3TURBd0tTSStQR2NnYVdROUluTnNhV05sSWlCMGNtRnVjMlp2Y20wOUluUnlZVzV6YkdGMFpTZ3lNVFV1TURBd01EQXdMQ0F4TVRrdU1EQXdNREF3S1NJdlBqeHdZWFJvSUNBZ0lDQWdJR1E5SWswek9UWXNNakF5TGpVZ1F6TTVOaXd4T1RZdU1UUTROekkxSURRd01TNHhORGczTWpVc01Ua3hJRFF3Tnk0MUxERTVNU0JETkRFekxqZzFNVEkzTlN3eE9URWdOREU1TERFNU5pNHhORGczTWpVZ05ERTVMREl3TWk0MUlFTTBNVGtzTWpBNExqZzFNVEkzTlNBME1UTXVPRFV4TWpjMUxESXhOQ0EwTURjdU5Td3lNVFFnUXpRd01TNHhORGczTWpVc01qRTBJRE01Tml3eU1EZ3VPRFV4TWpjMUlETTVOaXd5TURJdU5TQmFJRTAwTURndU5qVTJPRFUwTERFNU5pNDRORE14TkRZZ1REUXhNQzR3TnpFd05qZ3NNVGs0TGpJMU56TTFPU0JNTkRBMUxqZ3lPRFF5Tnl3eU1ESXVOU0JNTkRFd0xqQTNNVEEyT0N3eU1EWXVOelF5TmpReElFdzBNRGd1TmpVMk9EVTBMREl3T0M0eE5UWTROVFFnVERRd015d3lNREl1TlNCTU5EQTRMalkxTmpnMU5Dd3hPVFl1T0RRek1UUTJJRm9pSUNBZ0lDQWdJR1pwYkd3OUlpTmhZV0VpSUNBZ0lDQWdJR2xrUFNKamFYSmpiR1V0WW1GamF5MWhjbkp2ZHkxbmJIbHdhQ0l2UGp3dlp6NGdJQ0E4TDJjK0lEd3ZjM1puUGc9PVwiXG4gICAgICAgICBbaGlkZGVuXT1cIiFsZWZ0QXJyb3dWaXNpYmxlXCIgKGNsaWNrKT1cIm5hdmlnYXRlKC0xLCBmYWxzZSlcIi8+XG4gICAgPGltZyBbbmdDbGFzc109XCJ7J2FjdGl2ZUFycm93JzogcmlnaHRBcnJvd0FjdGl2ZX1cIiBjbGFzcz1cImFycm93IHJpZ2h0XCJcbiAgICAgICAgIHNyYz1cImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5Qm9aV2xuYUhROUlqSTBjSGdpSUhabGNuTnBiMjQ5SWpFdU1TSWdkbWxsZDBKdmVEMGlNQ0F3SURJMElESTBJaUIzYVdSMGFEMGlNalJ3ZUNJZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWlCNGJXeHVjenB6YTJWMFkyZzlJbWgwZEhBNkx5OTNkM2N1WW05b1pXMXBZVzVqYjJScGJtY3VZMjl0TDNOclpYUmphQzl1Y3lJZ2VHMXNibk02ZUd4cGJtczlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MekU1T1RrdmVHeHBibXNpUGp4MGFYUnNaUzgrUEdSbGMyTXZQanhrWldaekx6NGdJQ0E4WnlCbWFXeHNQU0p1YjI1bElpQm1hV3hzTFhKMWJHVTlJbVYyWlc1dlpHUWlJR2xrUFNKdGFYVWlJSE4wY205clpUMGlJelUxTlNJZ2MzUnliMnRsTFhkcFpIUm9QU0l3TGpJaVBpQWdJQ0FnUEdjZ2FXUTlJa0Z5ZEdKdllYSmtMVEVpSUhSeVlXNXpabTl5YlQwaWRISmhibk5zWVhSbEtDMDBOamN1TURBd01EQXdMQ0F0TVRreExqQXdNREF3TUNraVBqeG5JR2xrUFNKemJHbGpaU0lnZEhKaGJuTm1iM0p0UFNKMGNtRnVjMnhoZEdVb01qRTFMakF3TURBd01Dd2dNVEU1TGpBd01EQXdNQ2tpTHo0OGNHRjBhQ0FnSUNBZ0lDQmtQU0pOTkRZNExESXdNaTQxSUVNME5qZ3NNVGsyTGpFME9EY3lOU0EwTnpNdU1UUTROekkxTERFNU1TQTBOemt1TlN3eE9URWdRelE0TlM0NE5URXlOelVzTVRreElEUTVNU3d4T1RZdU1UUTROekkxSURRNU1Td3lNREl1TlNCRE5Ea3hMREl3T0M0NE5URXlOelVnTkRnMUxqZzFNVEkzTlN3eU1UUWdORGM1TGpVc01qRTBJRU0wTnpNdU1UUTROekkxTERJeE5DQTBOamdzTWpBNExqZzFNVEkzTlNBME5qZ3NNakF5TGpVZ1dpQk5ORGd3TGpZMU5qZzFOQ3d4T1RZdU9EUXpNVFEySUV3ME9ESXVNRGN4TURZNExERTVPQzR5TlRjek5Ua2dURFEzTnk0NE1qZzBNamNzTWpBeUxqVWdURFE0TWk0d056RXdOamdzTWpBMkxqYzBNalkwTVNCTU5EZ3dMalkxTmpnMU5Dd3lNRGd1TVRVMk9EVTBJRXcwTnpVc01qQXlMalVnVERRNE1DNDJOVFk0TlRRc01UazJMamcwTXpFME5pQmFJaUFnSUNBZ0lDQm1hV3hzUFNJallXRmhJaUFnSUNBZ0lDQnBaRDBpWTJseVkyeGxMVzVsZUhRdFlYSnliM2N0WkdselkyeHZjM1Z5WlMxbmJIbHdhQ0lnSUNBZ0lDQWdkSEpoYm5ObWIzSnRQU0owY21GdWMyeGhkR1VvTkRjNUxqVXdNREF3TUN3Z01qQXlMalV3TURBd01Da2djMk5oYkdVb0xURXNJREVwSUhSeVlXNXpiR0YwWlNndE5EYzVMalV3TURBd01Dd2dMVEl3TWk0MU1EQXdNREFwSUNJdlBqd3ZaejRnSUNBOEwyYytJRHd2YzNablBnPT1cIlxuICAgICAgICAgW2hpZGRlbl09XCIhcmlnaHRBcnJvd1Zpc2libGVcIiAoY2xpY2spPVwibmF2aWdhdGUoMSwgZmFsc2UpXCIvPlxuXG4gICAgPGRpdiBjbGFzcz1cImJ1dHRvbkNvbnRhaW5lclwiPlxuICAgICAgICA8aW1nIGNsYXNzPVwiYWN0aW9uIGNsb3NlXCJcbiAgICAgICAgICAgICBzcmM9XCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUJvWldsbmFIUTlJak13Y0hnaUlHbGtQU0pNWVhsbGNsOHhJaUJ6ZEhsc1pUMGlaVzVoWW14bExXSmhZMnRuY205MWJtUTZibVYzSURBZ01DQTFNVElnTlRFeU95SWdkbVZ5YzJsdmJqMGlNUzR4SWlCbWFXeHNQU0lqWVdGaElpQjJhV1YzUW05NFBTSXdJREFnTlRFeUlEVXhNaUlnZDJsa2RHZzlJakkwY0hnaUlIaHRiRHB6Y0dGalpUMGljSEpsYzJWeWRtVWlJSGh0Ykc1elBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5SWdlRzFzYm5NNmVHeHBibXM5SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpFNU9Ua3ZlR3hwYm1zaVBpQWdQSEJoZEdnZ0lDQWdjM1J5YjJ0bExYZHBaSFJvUFNJek1DSWdjM1J5YjJ0bFBTSWpORFEwSWlBZ0lDQmtQU0pOTkRNM0xqVXNNemcyTGpaTU16QTJMamtzTWpVMmJERXpNQzQyTFRFek1DNDJZekUwTGpFdE1UUXVNU3d4TkM0eExUTTJMamdzTUMwMU1DNDVZeTB4TkM0eExURTBMakV0TXpZdU9DMHhOQzR4TFRVd0xqa3NNRXd5TlRZc01qQTFMakZNTVRJMUxqUXNOelF1TlNBZ1l5MHhOQzR4TFRFMExqRXRNell1T0MweE5DNHhMVFV3TGprc01HTXRNVFF1TVN3eE5DNHhMVEUwTGpFc016WXVPQ3d3TERVd0xqbE1NakExTGpFc01qVTJURGMwTGpVc016ZzJMalpqTFRFMExqRXNNVFF1TVMweE5DNHhMRE0yTGpnc01DdzFNQzQ1SUNCak1UUXVNU3d4TkM0eExETTJMamdzTVRRdU1TdzFNQzQ1TERCTU1qVTJMRE13Tmk0NWJERXpNQzQyTERFek1DNDJZekUwTGpFc01UUXVNU3d6Tmk0NExERTBMakVzTlRBdU9Td3dRelExTVM0MUxEUXlNeTQwTERRMU1TNDFMRFF3TUM0MkxEUXpOeTQxTERNNE5pNDJlaUl2UGp3dmMzWm5QZz09XCJcbiAgICAgICAgICAgICAoY2xpY2spPVwiY2xvc2VWaWV3ZXIoKVwiLz5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJpbWFnZUNvbnRhaW5lclwiXG4gICAgICAgICAoY2xpY2spPVwic2hvd05hdmlnYXRpb25BcnJvd3MoKVwiXG4gICAgICAgICAoc3dpcGVsZWZ0KT1cIm5hdmlnYXRlKDEsICRldmVudClcIlxuICAgICAgICAgKHN3aXBlcmlnaHQpPVwibmF2aWdhdGUoLTEsICRldmVudClcIlxuICAgICAgICAgKHBhbik9XCJwYW4oJGV2ZW50KVwiPlxuXG4gICAgICAgIDxkaXYgKm5nRm9yPSdsZXQgaW1nIG9mIGltYWdlczsgbGV0IGogPSBpbmRleCdcbiAgICAgICAgICAgICBjbGFzcz1cImltYWdlXCJcbiAgICAgICAgICAgICBbY2xhc3MuYWN0aXZlXT1cImltZ1snYWN0aXZlJ11cIlxuICAgICAgICAgICAgIFtzdHlsZS5iYWNrZ3JvdW5kLWltYWdlXT1cImltZ1sndmlld2VySW1hZ2VMb2FkZWQnXSA/ICd1cmwoJytpbWdbY2F0ZWdvcnlTZWxlY3RlZF1bJ3BhdGgnXSsnKScgOiBtYXRoLmFicyhjdXJyZW50SWR4LWopIDw9MSA/ICd1cmwoJytpbWdbJ3ByZXZpZXdfeHhzJ11bJ3BhdGgnXSsnKScgOiAnJ1wiXG4gICAgICAgICAgICAgW3N0eWxlLmxlZnRdPVwidHJhbnNmb3JtKydweCdcIlxuICAgICAgICAgICAgIFtAaW1hZ2VUcmFuc2l0aW9uXT1cImltZ1sndHJhbnNpdGlvbiddXCI+PC9kaXY+XG5cbiAgICAgICAgPGltZyAqbmdGb3I9J2xldCBpbWcgb2YgaW1hZ2VzOyBsZXQgaiA9IGluZGV4J1xuICAgICAgICAgICAgIGNsYXNzPVwicHJlbG9hZGluZy1pbWFnZVwiXG4gICAgICAgICAgICAgKGxvYWQpPVwiaW1hZ2VMb2FkZWQoaW1nKVwiXG4gICAgICAgICAgICAgc3JjPVwie3sgbWF0aC5hYnMoY3VycmVudElkeC1qKSA8PTEgPyBpbWdbY2F0ZWdvcnlTZWxlY3RlZF1bJ3BhdGgnXSA6ICcnfX1cIi8+XG4gICAgPC9kaXY+XG48L2Rpdj5cblxuYCxcbiAgICBzdHlsZXM6IFtgLm91dGVyQ29udGFpbmVye3RvcDowO2JvdHRvbTowO2xlZnQ6MDtyaWdodDowO2hlaWdodDoxMDAlO3dpZHRoOjEwMCU7cG9zaXRpb246Zml4ZWQ7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC45NSk7Zm9udC1mYW1pbHk6c2Fucy1zZXJpZjt6LWluZGV4OjEwMzF9LmltYWdlQ29udGFpbmVye3Bvc2l0aW9uOmFic29sdXRlO2Zsb2F0Om5vbmU7dG9wOjA7Ym90dG9tOjA7bGVmdDowO3JpZ2h0OjB9LmltYWdlQ29udGFpbmVyIC5pbWFnZSwuaW1hZ2VDb250YWluZXIgLnByZWxvYWRpbmctaW1hZ2V7dmlzaWJpbGl0eTpoaWRkZW59LmltYWdlQ29udGFpbmVyIC5pbWFnZS5hY3RpdmV7cG9zaXRpb246YWJzb2x1dGU7dmlzaWJpbGl0eTp2aXNpYmxlO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXNpemU6Y29udGFpbjtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlcjttYXJnaW46YXV0bztsZWZ0OjA7cmlnaHQ6MDt0b3A6MDtib3R0b206MDtoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO29wYWNpdHk6MX0uYXJyb3d7b3BhY2l0eTowfS5hcnJvdzpob3ZlcntjdXJzb3I6cG9pbnRlcn0ub3V0ZXJDb250YWluZXI6aG92ZXIgLmFycm93LmFjdGl2ZUFycm93e2hlaWdodDpjYWxjKDIwcHggKyAxLjV2dyk7cG9zaXRpb246YWJzb2x1dGU7dG9wOmNhbGMoNTAlIC0gKDIwcHggKyAxLjV2dykvIDIpO2JvdHRvbTo1MCU7ei1pbmRleDoxO29wYWNpdHk6MTt0cmFuc2l0aW9uOmFsbCBlYXNlLW91dCAuNXN9LmFycm93LmxlZnR7bGVmdDoydnd9LmFycm93LnJpZ2h0e3JpZ2h0OjJ2d30uYXJyb3c6bm90KC5hY3RpdmVBcnJvdyk6aG92ZXJ7b3BhY2l0eTowO2N1cnNvcjpwb2ludGVyO3RyYW5zaXRpb246YWxsIGVhc2Utb3V0IC41c30uYnV0dG9uQ29udGFpbmVye3Bvc2l0aW9uOmFic29sdXRlO3RvcDoyMHB4O3JpZ2h0OjIwcHg7aGVpZ2h0OjIwcHg7dGV4dC1hbGlnbjpjZW50ZXI7b3BhY2l0eToxO3otaW5kZXg6MjAwO3RyYW5zaXRpb246YWxsIGVhc2Utb3V0IC41c30uYnV0dG9uQ29udGFpbmVyIC5hY3Rpb257aGVpZ2h0OjEwMCU7Y3Vyc29yOnBvaW50ZXI7dmVydGljYWwtYWxpZ246dG9wfS5idXR0b25Db250YWluZXIgLmFjdGlvbjpmb2N1c3tvdXRsaW5lOjB9LmJ1dHRvbkNvbnRhaW5lciAuYWN0aW9uOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzIyMjt0cmFuc2l0aW9uOmFsbCBlYXNlLW91dCAuM3N9LmJ1dHRvbkNvbnRhaW5lciAuYWN0aW9uLmNsb3Nle3dpZHRoOjI2cHg7aGVpZ2h0OjI2cHh9bWQtYnV0dG9uLXRvZ2dsZS5jaGVja2Vke2JhY2tncm91bmQtY29sb3I6I2EwYTBhMH0ubWVudUJ1dHRvbntwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206MjBweDtyaWdodDoyMHB4O3RleHQtYWxpZ246Y2VudGVyO29wYWNpdHk6MTt6LWluZGV4OjIwMDt0cmFuc2l0aW9uOmFsbCBlYXNlLW91dCAuNXN9QGZvbnQtZmFjZXtmb250LWZhbWlseTonTWF0ZXJpYWwgSWNvbnMnO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtd2VpZ2h0OjQwMDtzcmM6bG9jYWwoJ01hdGVyaWFsIEljb25zJyksbG9jYWwoJ01hdGVyaWFsSWNvbnMtUmVndWxhcicpLHVybChodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tL3MvbWF0ZXJpYWxpY29ucy92MTkvMmZjcllGTmFUamNTNmc0VTN0LVk1WmpaalQ1RmRFSjE0MFUyREpZQzNtWS53b2ZmMikgZm9ybWF0KCd3b2ZmMicpfS5tYXRlcmlhbC1pY29uc3tmb250LWZhbWlseTonTWF0ZXJpYWwgSWNvbnMnO2ZvbnQtd2VpZ2h0OjQwMDtmb250LXN0eWxlOm5vcm1hbDtmb250LXNpemU6MjRweDtsaW5lLWhlaWdodDoxO2xldHRlci1zcGFjaW5nOm5vcm1hbDt0ZXh0LXRyYW5zZm9ybTpub25lO2Rpc3BsYXk6aW5saW5lLWJsb2NrO3doaXRlLXNwYWNlOm5vd3JhcDt3b3JkLXdyYXA6bm9ybWFsO2RpcmVjdGlvbjpsdHI7LXdlYmtpdC1mb250LWZlYXR1cmUtc2V0dGluZ3M6J2xpZ2EnOy13ZWJraXQtZm9udC1zbW9vdGhpbmc6YW50aWFsaWFzZWR9YF0sXG4gICAgaG9zdDoge1xuICAgICAgICAnKGRvY3VtZW50OmtleWRvd24pJzogJ29uS2V5ZG93bigkZXZlbnQpJ1xuICAgIH0sXG4gICAgYW5pbWF0aW9uczogW1xuICAgICAgICB0cmlnZ2VyKCdpbWFnZVRyYW5zaXRpb24nLCBbXG4gICAgICAgICAgICBzdGF0ZSgnZW50ZXJGcm9tUmlnaHQnLCBzdHlsZSh7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUoMHB4LCAwcHgpJ1xuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgc3RhdGUoJ2VudGVyRnJvbUxlZnQnLCBzdHlsZSh7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUoMHB4LCAwcHgpJ1xuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgc3RhdGUoJ2xlYXZlVG9MZWZ0Jywgc3R5bGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlKC0xMDBweCwgMHB4KSdcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgIHN0YXRlKCdsZWF2ZVRvUmlnaHQnLCBzdHlsZSh7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUoMTAwcHgsIDBweCknXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgICB0cmFuc2l0aW9uKCcqID0+IGVudGVyRnJvbVJpZ2h0JywgW1xuICAgICAgICAgICAgICAgIHN0eWxlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlKDMwcHgsIDBweCknXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgYW5pbWF0ZSgnMjUwbXMgNTAwbXMgZWFzZS1pbicpXG4gICAgICAgICAgICBdKSxcbiAgICAgICAgICAgIHRyYW5zaXRpb24oJyogPT4gZW50ZXJGcm9tTGVmdCcsIFtcbiAgICAgICAgICAgICAgICBzdHlsZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgtMzBweCwgMHB4KSdcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBhbmltYXRlKCcyNTBtcyA1MDBtcyBlYXNlLWluJylcbiAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgdHJhbnNpdGlvbignKiA9PiBsZWF2ZVRvTGVmdCcsIFtcbiAgICAgICAgICAgICAgICBzdHlsZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBhbmltYXRlKCcyNTBtcyBlYXNlLW91dCcpXVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHRyYW5zaXRpb24oJyogPT4gbGVhdmVUb1JpZ2h0JywgW1xuICAgICAgICAgICAgICAgIHN0eWxlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGFuaW1hdGUoJzI1MG1zIGVhc2Utb3V0JyldXG4gICAgICAgICAgICApXG4gICAgICAgIF0pLFxuICAgICAgICB0cmlnZ2VyKCdzaG93Vmlld2VyVHJhbnNpdGlvbicsIFtcbiAgICAgICAgICAgIHN0YXRlKCd0cnVlJywgc3R5bGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgIHN0YXRlKCd2b2lkJywgc3R5bGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgIHRyYW5zaXRpb24oJ3ZvaWQgPT4gKicsIFtcbiAgICAgICAgICAgICAgICBzdHlsZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBhbmltYXRlKCcxMDAwbXMgZWFzZS1pbicpXVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHRyYW5zaXRpb24oJyogPT4gdm9pZCcsIFtcbiAgICAgICAgICAgICAgICBzdHlsZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBhbmltYXRlKCc1MDBtcyBlYXNlLW91dCcpXVxuICAgICAgICAgICAgKVxuICAgICAgICBdKVxuICAgIF1cbn0pXG5cbmV4cG9ydCBjbGFzcyBWaWV3ZXJDb21wb25lbnQge1xuICAgIHNob3dWaWV3ZXI6IGJvb2xlYW5cbiAgICBpbWFnZXM6IEFycmF5PGFueT4gPSBbe31dXG4gICAgY3VycmVudElkeDogbnVtYmVyID0gMFxuICAgIGxlZnRBcnJvd1Zpc2libGU6IGJvb2xlYW4gPSB0cnVlXG4gICAgcmlnaHRBcnJvd1Zpc2libGU6IGJvb2xlYW4gPSB0cnVlXG4gICAgY2F0ZWdvcnlTZWxlY3RlZDogc3RyaW5nID0gJ3ByZXZpZXdfeHhzJ1xuICAgIHRyYW5zZm9ybTogbnVtYmVyXG4gICAgbWF0aDogTWF0aFxuICAgIHByaXZhdGUgcXVhbGl0eVNlbGVjdG9yU2hvd246IGJvb2xlYW4gPSBmYWxzZVxuICAgIHByaXZhdGUgcXVhbGl0eVNlbGVjdGVkOiBzdHJpbmcgPSAnYXV0bydcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgaW1hZ2VTZXJ2aWNlOiBJbWFnZVNlcnZpY2UpIHtcbiAgICAgICAgaW1hZ2VTZXJ2aWNlLmltYWdlc1VwZGF0ZWQkLnN1YnNjcmliZShcbiAgICAgICAgICAgIGltYWdlcyA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZXMgPSBpbWFnZXNcbiAgICAgICAgICAgIH0pXG4gICAgICAgIGltYWdlU2VydmljZS5pbWFnZVNlbGVjdGVkSW5kZXhVcGRhdGVkJC5zdWJzY3JpYmUoXG4gICAgICAgICAgICBuZXdJbmRleCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50SWR4ID0gbmV3SW5kZXhcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlcy5mb3JFYWNoKGltYWdlID0+IGltYWdlWydhY3RpdmUnXSA9IGZhbHNlKVxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ2FjdGl2ZSddID0gdHJ1ZVxuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtID0gMFxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUXVhbGl0eSgpXG4gICAgICAgICAgICB9KVxuICAgICAgICBpbWFnZVNlcnZpY2Uuc2hvd0ltYWdlVmlld2VyQ2hhbmdlZCQuc3Vic2NyaWJlKFxuICAgICAgICAgICAgc2hvd1ZpZXdlciA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93Vmlld2VyID0gc2hvd1ZpZXdlclxuICAgICAgICAgICAgfSlcbiAgICAgICAgdGhpcy5tYXRoID0gTWF0aFxuICAgIH1cblxuICAgIGdldCBsZWZ0QXJyb3dBY3RpdmUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRJZHggPiAwXG4gICAgfVxuXG4gICAgZ2V0IHJpZ2h0QXJyb3dBY3RpdmUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRJZHggPCB0aGlzLmltYWdlcy5sZW5ndGggLSAxXG4gICAgfVxuXG4gICAgcGFuKHN3aXBlOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSBzd2lwZS5kZWx0YVhcbiAgICB9XG5cbiAgICBvblJlc2l6ZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5pbWFnZXMuZm9yRWFjaChpbWFnZSA9PiB7XG4gICAgICAgICAgICBpbWFnZVsndmlld2VySW1hZ2VMb2FkZWQnXSA9IGZhbHNlXG4gICAgICAgICAgICBpbWFnZVsnYWN0aXZlJ10gPSBmYWxzZVxuICAgICAgICB9KVxuICAgICAgICB0aGlzLnVwZGF0ZUltYWdlKClcbiAgICB9XG5cbiAgICBzaG93UXVhbGl0eVNlbGVjdG9yKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnF1YWxpdHlTZWxlY3RvclNob3duID0gIXRoaXMucXVhbGl0eVNlbGVjdG9yU2hvd25cbiAgICB9XG5cbiAgICBxdWFsaXR5Q2hhbmdlZChuZXdRdWFsaXR5OiBhbnkpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5xdWFsaXR5U2VsZWN0ZWQgPSBuZXdRdWFsaXR5XG4gICAgICAgIHRoaXMudXBkYXRlSW1hZ2UoKVxuICAgIH1cblxuICAgIGltYWdlTG9hZGVkKGltYWdlOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgaW1hZ2VbJ3ZpZXdlckltYWdlTG9hZGVkJ10gPSB0cnVlXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZGlyZWN0aW9uICgtMTogbGVmdCwgMTogcmlnaHQpXG4gICAgICogc3dpcGUgKHVzZXIgc3dpcGVkKVxuICAgICAqL1xuICAgIG5hdmlnYXRlKGRpcmVjdGlvbjogbnVtYmVyLCBzd2lwZTogYW55KTogdm9pZCB7XG4gICAgICAgIGlmICgoZGlyZWN0aW9uID09PSAxICYmIHRoaXMuY3VycmVudElkeCA8IHRoaXMuaW1hZ2VzLmxlbmd0aCAtIDEpIHx8XG4gICAgICAgICAgICAoZGlyZWN0aW9uID09PSAtMSAmJiB0aGlzLmN1cnJlbnRJZHggPiAwKSkge1xuXG4gICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XVsndHJhbnNpdGlvbiddID0gJ2xlYXZlVG9SaWdodCdcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHggLSAxXVsndHJhbnNpdGlvbiddID0gJ2VudGVyRnJvbUxlZnQnXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ3RyYW5zaXRpb24nXSA9ICdsZWF2ZVRvTGVmdCdcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHggKyAxXVsndHJhbnNpdGlvbiddID0gJ2VudGVyRnJvbVJpZ2h0J1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jdXJyZW50SWR4ICs9IGRpcmVjdGlvblxuXG4gICAgICAgICAgICBpZiAoc3dpcGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVOYXZpZ2F0aW9uQXJyb3dzKClcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93TmF2aWdhdGlvbkFycm93cygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUltYWdlKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNob3dOYXZpZ2F0aW9uQXJyb3dzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmxlZnRBcnJvd1Zpc2libGUgPSB0cnVlXG4gICAgICAgIHRoaXMucmlnaHRBcnJvd1Zpc2libGUgPSB0cnVlXG4gICAgfVxuXG4gICAgY2xvc2VWaWV3ZXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaW1hZ2VzLmZvckVhY2goaW1hZ2UgPT4gaW1hZ2VbJ3RyYW5zaXRpb24nXSA9IHVuZGVmaW5lZClcbiAgICAgICAgdGhpcy5pbWFnZXMuZm9yRWFjaChpbWFnZSA9PiBpbWFnZVsnYWN0aXZlJ10gPSBmYWxzZSlcbiAgICAgICAgdGhpcy5pbWFnZVNlcnZpY2Uuc2hvd0ltYWdlVmlld2VyKGZhbHNlKVxuICAgIH1cblxuICAgIG9uS2V5ZG93bihldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgICAgICBjb25zdCBwcmV2ZW50ID0gWzM3LCAzOSwgMjcsIDM2LCAzNV1cbiAgICAgICAgICAgIC5maW5kKG5vID0+IG5vID09PSBldmVudC5rZXlDb2RlKVxuICAgICAgICBpZiAocHJldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICB9XG5cbiAgICAgICAgc3dpdGNoIChwcmV2ZW50KSB7XG4gICAgICAgICAgICBjYXNlIDM3OlxuICAgICAgICAgICAgICAgIC8vIG5hdmlnYXRlIGxlZnRcbiAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRlKC0xLCBmYWxzZSlcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAzOTpcbiAgICAgICAgICAgICAgICAvLyBuYXZpZ2F0ZSByaWdodFxuICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGUoMSwgZmFsc2UpXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgMjc6XG4gICAgICAgICAgICAgICAgLy8gZXNjXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVZpZXdlcigpXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgMzY6XG4gICAgICAgICAgICAgICAgLy8gcG9zIDFcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWyd0cmFuc2l0aW9uJ10gPSAnbGVhdmVUb1JpZ2h0J1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudElkeCA9IDBcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWyd0cmFuc2l0aW9uJ10gPSAnZW50ZXJGcm9tTGVmdCdcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUltYWdlKClcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAzNTpcbiAgICAgICAgICAgICAgICAvLyBlbmRcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWyd0cmFuc2l0aW9uJ10gPSAnbGVhdmVUb0xlZnQnXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50SWR4ID0gdGhpcy5pbWFnZXMubGVuZ3RoIC0gMVxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ3RyYW5zaXRpb24nXSA9ICdlbnRlckZyb21SaWdodCdcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUltYWdlKClcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoaWRlTmF2aWdhdGlvbkFycm93cygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5sZWZ0QXJyb3dWaXNpYmxlID0gZmFsc2VcbiAgICAgICAgdGhpcy5yaWdodEFycm93VmlzaWJsZSA9IGZhbHNlXG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVJbWFnZSgpOiB2b2lkIHtcbiAgICAgICAgLy8gd2FpdCBmb3IgYW5pbWF0aW9uIHRvIGVuZFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUXVhbGl0eSgpXG4gICAgICAgICAgICB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWydhY3RpdmUnXSA9IHRydWVcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VzLmZvckVhY2goaW1hZ2UgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpbWFnZSAhPSB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdKSB7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlWydhY3RpdmUnXSA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtID0gMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sIDUwMClcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZVF1YWxpdHkoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHNjcmVlbldpZHRoID0gd2luZG93LmlubmVyV2lkdGhcbiAgICAgICAgY29uc3Qgc2NyZWVuSGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0XG5cbiAgICAgICAgc3dpdGNoICh0aGlzLnF1YWxpdHlTZWxlY3RlZCkge1xuICAgICAgICAgICAgY2FzZSAnYXV0byc6IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhdGVnb3J5U2VsZWN0ZWQgPSAncHJldmlld194eHMnXG5cbiAgICAgICAgICAgICAgICBpZiAoc2NyZWVuV2lkdGggPiB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWydwcmV2aWV3X3h4cyddLndpZHRoICYmXG4gICAgICAgICAgICAgICAgICAgIHNjcmVlbkhlaWdodCA+IHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ3ByZXZpZXdfeHhzJ10uaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlTZWxlY3RlZCA9ICdwcmV2aWV3X3hzJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2NyZWVuV2lkdGggPiB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWydwcmV2aWV3X3hzJ10ud2lkdGggJiZcbiAgICAgICAgICAgICAgICAgICAgc2NyZWVuSGVpZ2h0ID4gdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XVsncHJldmlld194cyddLmhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhdGVnb3J5U2VsZWN0ZWQgPSAncHJldmlld19zJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2NyZWVuV2lkdGggPiB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWydwcmV2aWV3X3MnXS53aWR0aCAmJlxuICAgICAgICAgICAgICAgICAgICBzY3JlZW5IZWlnaHQgPiB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWydwcmV2aWV3X3MnXS5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeVNlbGVjdGVkID0gJ3ByZXZpZXdfbSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNjcmVlbldpZHRoID4gdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XVsncHJldmlld19tJ10ud2lkdGggJiZcbiAgICAgICAgICAgICAgICAgICAgc2NyZWVuSGVpZ2h0ID4gdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XVsncHJldmlld19tJ10uaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlTZWxlY3RlZCA9ICdwcmV2aWV3X2wnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzY3JlZW5XaWR0aCA+IHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ3ByZXZpZXdfbCddLndpZHRoICYmXG4gICAgICAgICAgICAgICAgICAgIHNjcmVlbkhlaWdodCA+IHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ3ByZXZpZXdfbCddLmhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhdGVnb3J5U2VsZWN0ZWQgPSAncHJldmlld194bCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNjcmVlbldpZHRoID4gdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XVsncHJldmlld194bCddLndpZHRoICYmXG4gICAgICAgICAgICAgICAgICAgIHNjcmVlbkhlaWdodCA+IHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ3ByZXZpZXdfeGwnXS5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeVNlbGVjdGVkID0gJ3JhdydcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2xvdyc6IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhdGVnb3J5U2VsZWN0ZWQgPSAncHJldmlld194eHMnXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ21pZCc6IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhdGVnb3J5U2VsZWN0ZWQgPSAncHJldmlld19tJ1xuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdoaWdoJzoge1xuICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlTZWxlY3RlZCA9ICdyYXcnXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeVNlbGVjdGVkID0gJ3ByZXZpZXdfbSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSdcbmltcG9ydCB7IEltYWdlU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvaW1hZ2Uuc2VydmljZSdcbmltcG9ydCB7IEdhbGxlcnlDb21wb25lbnQgfSBmcm9tICcuL2dhbGxlcnkvZ2FsbGVyeS5jb21wb25lbnQnXG5pbXBvcnQgeyBWaWV3ZXJDb21wb25lbnQgfSBmcm9tICcuL3ZpZXdlci92aWV3ZXIuY29tcG9uZW50J1xuaW1wb3J0IHsgRm9ybXNNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9mb3JtcydcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbidcbmltcG9ydCB7IEJyb3dzZXJBbmltYXRpb25zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlci9hbmltYXRpb25zJ1xuaW1wb3J0IHsgSHR0cENsaWVudE1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJ1xuXG5ATmdNb2R1bGUoe1xuICBpbXBvcnRzOiBbXG4gICAgQ29tbW9uTW9kdWxlLFxuICAgIEZvcm1zTW9kdWxlLFxuICAgIEh0dHBDbGllbnRNb2R1bGUsXG4gICAgQnJvd3NlckFuaW1hdGlvbnNNb2R1bGVcbiAgXSxcbiAgZGVjbGFyYXRpb25zOiBbXG4gICAgR2FsbGVyeUNvbXBvbmVudCxcbiAgICBWaWV3ZXJDb21wb25lbnRcbiAgXSxcbiAgcHJvdmlkZXJzOiBbXG4gICAgSW1hZ2VTZXJ2aWNlXG4gIF0sXG4gIGV4cG9ydHM6IFtcbiAgICBHYWxsZXJ5Q29tcG9uZW50LFxuICAgIFZpZXdlckNvbXBvbmVudFxuICBdXG59KVxuZXhwb3J0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QU0sRUFBRTtvQkFDbkUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLFlBQVksQ0FBQTtpQkFDdkM7Z0JBQ0QsSUFBSSxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsS0FBSztvQkFDOUQsWUFBWSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLE1BQU0sRUFBRTtvQkFDbEUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLFdBQVcsQ0FBQTtpQkFDdEM7Z0JBQ0QsSUFBSSxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsS0FBSztvQkFDN0QsWUFBWSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE1BQU0sRUFBRTtvQkFDakUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLFdBQVcsQ0FBQTtpQkFDdEM7Z0JBQ0QsSUFBSSxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsS0FBSztvQkFDN0QsWUFBWSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE1BQU0sRUFBRTtvQkFDakUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLFdBQVcsQ0FBQTtpQkFDdEM7Z0JBQ0QsSUFBSSxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsS0FBSztvQkFDN0QsWUFBWSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE1BQU0sRUFBRTtvQkFDakUsSUFBSSxDQUFD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